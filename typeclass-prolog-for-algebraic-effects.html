<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="english" xml:lang="english">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Implementing algebraic effects through typeclass prolog</title>
<meta name="author" content="Justin Veilleux" />
<meta name="generator" content="Org Mode" />
<style type="text/css">
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  pre.src-C\+\+:before { content: 'C++'; }
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'JavaScript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<style>
/* Sidenote reference number */
.sidenote-ref {
  font-size: 0.75em;
  vertical-align: super;
  cursor: pointer;
}

/* Sidenote content */
.sidenote {
  font-size: 0.875rem;
  line-height: 1.4;
}

/* Desktop: side margins */
@media (min-width: 110em) {
  .sidenote-ref {
    cursor: default;
  }

  .sidenote {
    float: right;
    clear: right;
    width: 300px;
    margin-right: -350px;
    margin-bottom: 1rem;
    position: relative;
  }
}

/* Mobile: toggleable boxes */
@media (max-width: 110em) {
  .sidenote {
    display: none;
    border: 1px solid #ddd;
    padding: 0.75rem;
    margin: 0.5rem 0;
    background: #f9f9f9;
  }

  .sidenote.active {
    display: block;
  }
}
</style><link rel="stylesheet" type="text/css" href="Agda.css" />
<style>.org-latex-block { margin: auto; } </style>
</head>
<body>
<div id="content" class="content">
<h1 class="title">Implementing algebraic effects through typeclass prolog</h1>
<p>
Monads are a popular way to model effects in purely functional programming
languages, but they come with problems. For instance, to compose two effects, we
need a way to compose their associated monads. Since there isn't really a way to
define some product on the set of all monads, the solution is to use <a href="https://en.wikipedia.org/wiki/Monad_transformer">Monad
transformers</a>.<span class="sidenote-ref"
    onclick="this.nextElementSibling.classList.toggle('active')">1</span><span
    class="sidenote"><sup>1</sup>
A monad transformer is a thing that takes a monad and returns a monad.
</span> These are annoying to use (at least for me) and are
inflexible. An alternative that some (mostly research) languages are starting to
adopt is algebraic effects.
</p>

<p>
Algebraic effects are much easier to compose and reason about. They can be seen
as the type safe incarnation of delimited continuations.<span class="sidenote-ref"
    onclick="this.nextElementSibling.classList.toggle('active')">2</span><span
    class="sidenote"><sup>2</sup>
We used delimited continuations to implement <code>async</code> and <code>await</code> syntax in
<a href="async-await-syntax.html#ID-bc6ba032-8b50-4403-95db-abb7da96ae83">this post</a>.
</span> While they mostly
exist as special features in languages that few people use, we can actually
implement them in Haskell through a few language extensions and simple typeclass
metaprogramming acrobatics
</p>
<div id="outline-container-org8f87db8" class="outline-2">
<h2 id="org8f87db8"><span class="section-number-2">1.</span> Obligatory pragmas</h2>
<div class="outline-text-2" id="text-1">
<p>
We will be writing a lot of type level code and consequently, we will need to
give the compiler a a lot of <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">LANGUAGE</span></code> pragmas.
</p>

<p>
To be able to construct a <code class="src src-haskell">[<span style="color: #3548cf;">*</span> <span style="color: #3548cf;">-&gt;</span> <span style="color: #3548cf;">*</span>]</code>. This is useful, because we want
to use the familiar list structure, but at the type level.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005f5f;">{-# LANGUAGE DataKinds #-}</span>
<span style="color: #005f5f;">{-# LANGUAGE FunctionalDependencies #-}</span>
<span style="color: #005f5f;">{-# LANGUAGE QuantifiedConstraints #-}</span>
<span style="color: #005f5f;">{-# LANGUAGE ScopedTypeVariables #-}</span>
<span style="color: #005f5f;">{-# LANGUAGE TypeApplications #-}</span>
<span style="color: #005f5f;">{-# LANGUAGE TypeFamilies #-}</span>
<span style="color: #005f5f;">{-# LANGUAGE UndecidableInstances #-}</span>
</code></pre>
</div>
</div>
</div>
<div id="outline-container-orge1170f4" class="outline-2">
<h2 id="orge1170f4"><span class="section-number-2">2.</span> Imports</h2>
<div class="outline-text-2" id="text-2">
<p>
At some point, we are going to express the constraint "every element of that
type-level list of type constructors is a functor. This entails both being able
to pattern match on types (using type families), but also produce the kind of
thing we can put to the left of a <code class="src src-haskell"><span style="color: #3548cf;">=&gt;</span></code> in a type signature. Those
things are constraints and the Haskell compiler will try to solve the at compile
time.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">import</span> <span style="color: #531ab6; font-weight: bold;">GHC.Exts</span> (<span style="color: #531ab6; font-weight: bold;">Constraint</span>)
<span style="color: #005e8b; font-weight: bold;">import</span> <span style="color: #531ab6; font-weight: bold;">Data.Proxy</span>
</code></pre>
</div>
</div>
</div>
<div id="outline-container-orgb9742bb" class="outline-2">
<h2 id="orgb9742bb"><span class="section-number-2">3.</span> Recursive types as the fixpoint of a functor</h2>
<div class="outline-text-2" id="text-3">
<p>
One important fact about types that hold an infinite number of values is that
most of the time, they are an instance of what is called an inductive data type.
In Haskell, an inductive data type can be constructed by taking the fixpoint of
a positive type constructor called its generator. This means (approximately)
that we apply the type constructor to some other type an infinite amount of
times. Let's say we have the following type constructor:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">data</span> <span style="color: #531ab6; font-weight: bold;">N</span> n <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">S</span> n <span style="color: #3548cf;">|</span> <span style="color: #531ab6; font-weight: bold;">Z</span>
</code></pre>
</div>

<p>
In type algebra<span class="sidenote-ref"
    onclick="this.nextElementSibling.classList.toggle('active')">3</span><span
    class="sidenote"><sup>3</sup>
Not an actual thing people say, but I use this term to point to the fact
that the universe of types behaves (under isomorphism) like a semiring. It has
all the things you expect from the natural numbers: addition, multiplication,
distribution and the right units.
</span>, we can try and see what happens when we apply it to <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%278.748747pt%27 height=%277.918502pt%27 viewBox=%27-.500002 -7.4185 8.748747 7.918502%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g2-62%27 d=%27m4.07472-6.256538h2.779577c.169365 0 .348692 0 .348692-.199253s-.179328-.199253-.348692-.199253h-5.947696c-.14944 0-.358655 0-.358655 .199253s.209215 .199253 .358655 .199253h2.769614v5.897883c0 .14944 0 .358655 .199253 .358655s.199253-.179328 .199253-.358655v-5.897883z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page1%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g2-62%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\(
\top \)" style="height: 0.7789em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" /> an infinite number of times.
</p>


<div class="equation-container">
<span class="equation">
<img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%27344.711087pt%27 height=%2760.25792pt%27 viewBox=%27-.500002 -33.117752 344.711087 60.25792%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g2-62%27 d=%27m4.07472-6.256538h2.779577c.169365 0 .348692 0 .348692-.199253s-.179328-.199253-.348692-.199253h-5.947696c-.14944 0-.358655 0-.358655 .199253s.209215 .199253 .358655 .199253h2.769614v5.897883c0 .14944 0 .358655 .199253 .358655s.199253-.179328 .199253-.358655v-5.897883z%27/%3E%0A%3Cpath id=%27g7-49%27 d=%27m2.336239-4.435367c0-.188294-.013948-.195268-.209215-.195268c-.446326 .439352-1.080946 .446326-1.366874 .446326v.251059c.167372 0 .627646 0 1.011208-.195268v3.556663c0 .230137 0 .320797-.697385 .320797h-.265006v.251059c.125529-.006974 .983313-.027895 1.241345-.027895c.216189 0 1.094894 .020922 1.248319 .027895v-.251059h-.265006c-.697385 0-.697385-.09066-.697385-.320797v-3.863512z%27/%3E%0A%3Cpath id=%27g7-50%27 d=%27m3.521793-1.26924h-.237111c-.020922 .153425-.09066 .564882-.18132 .63462c-.055791 .041843-.592777 .041843-.690411 .041843h-1.283188c.732254-.648568 .976339-.843836 1.39477-1.171606c.516065-.411457 .99726-.843836 .99726-1.506351c0-.843836-.739228-1.3599-1.63188-1.3599c-.864757 0-1.45056 .606725-1.45056 1.248319c0 .355666 .299875 .390535 .369614 .390535c.167372 0 .369614-.118555 .369614-.369614c0-.125529-.048817-.369614-.411457-.369614c.216189-.495143 .690411-.648568 1.018182-.648568c.697385 0 1.060025 .54396 1.060025 1.108842c0 .606725-.432379 1.08792-.655542 1.338979l-1.680697 1.659776c-.069738 .062765-.069738 .076712-.069738 .27198h2.873225l.209215-1.26924z%27/%3E%0A%3Cpath id=%27g3-0%27 d=%27m5.188543-1.57609c.111582 0 .278954 0 .278954-.167372c0-.174346-.160399-.174346-.278954-.174346h-4.156413c-.111582 0-.278954 0-.278954 .167372c0 .174346 .160399 .174346 .278954 .174346h4.156413z%27/%3E%0A%3Cpath id=%27g3-49%27 d=%27m4.030884-1.910834c-.369614-.432379-.481196-.550934-.746202-.739228c-.425405-.306849-.871731-.425405-1.255293-.425405c-.864757 0-1.492403 .739228-1.492403 1.57609c0 .81594 .599751 1.569116 1.471482 1.569116c.969365 0 1.645828-.795019 1.896887-1.164633c.369614 .432379 .481196 .550934 .746202 .739228c.425405 .306849 .871731 .425405 1.255293 .425405c.864757 0 1.492403-.739228 1.492403-1.57609c0-.81594-.599751-1.569116-1.471482-1.569116c-.969365 0-1.645828 .795019-1.896887 1.164633zm.223163 .258032c.278954-.4533 .885679-1.157659 1.736488-1.157659c.718306 0 1.21345 .63462 1.21345 1.30411s-.54396 1.192528-1.185554 1.192528c-.648568 0-1.094894-.530012-1.764384-1.338979zm-.571856 .299875c-.278954 .4533-.885679 1.157659-1.736488 1.157659c-.718306 0-1.21345-.63462-1.21345-1.30411s.54396-1.192528 1.185554-1.192528c.648568 0 1.094894 .530012 1.764384 1.338979z%27/%3E%0A%3Cpath id=%27g6-40%27 d=%27m3.297634 2.391034c0-.029888 0-.049813-.169365-.219178c-1.24533-1.255293-1.564134-3.138232-1.564134-4.662516c0-1.733499 .37858-3.466999 1.603985-4.712329c.129514-.119552 .129514-.139477 .129514-.169365c0-.069738-.039851-.099626-.099626-.099626c-.099626 0-.996264 .67746-1.58406 1.942715c-.508095 1.09589-.627646 2.201743-.627646 3.038605c0 .777086 .109589 1.982565 .657534 3.108344c.597758 1.225405 1.454545 1.872976 1.554172 1.872976c.059776 0 .099626-.029888 .099626-.099626z%27/%3E%0A%3Cpath id=%27g6-41%27 d=%27m2.879203-2.49066c0-.777086-.109589-1.982565-.657534-3.108344c-.597758-1.225405-1.454545-1.872976-1.554172-1.872976c-.059776 0-.099626 .039851-.099626 .099626c0 .029888 0 .049813 .18929 .229141c.976339 .986301 1.544209 2.570361 1.544209 4.652553c0 1.703611-.368618 3.457036-1.603985 4.712329c-.129514 .119552-.129514 .139477-.129514 .169365c0 .059776 .039851 .099626 .099626 .099626c.099626 0 .996264-.67746 1.58406-1.942715c.508095-1.09589 .627646-2.201743 .627646-3.038605z%27/%3E%0A%3Cpath id=%27g6-43%27 d=%27m4.07472-2.291407h2.779577c.139477 0 .328767 0 .328767-.199253s-.18929-.199253-.328767-.199253h-2.779577v-2.789539c0-.139477 0-.328767-.199253-.328767s-.199253 .18929-.199253 .328767v2.789539h-2.789539c-.139477 0-.328767 0-.328767 .199253s.18929 .199253 .328767 .199253h2.789539v2.789539c0 .139477 0 .328767 .199253 .328767s.199253-.18929 .199253-.328767v-2.789539z%27/%3E%0A%3Cpath id=%27g6-61%27 d=%27m6.844334-3.257783c.14944 0 .33873 0 .33873-.199253s-.18929-.199253-.328767-.199253h-5.967621c-.139477 0-.328767 0-.328767 .199253s.18929 .199253 .33873 .199253h5.947696zm.009963 1.932752c.139477 0 .328767 0 .328767-.199253s-.18929-.199253-.33873-.199253h-5.947696c-.14944 0-.33873 0-.33873 .199253s.18929 .199253 .328767 .199253h5.967621z%27/%3E%0A%3Cpath id=%27g4-58%27 d=%27m1.912827-.52802c0-.288917-.239103-.52802-.52802-.52802s-.52802 .239103-.52802 .52802s.239103 .52802 .52802 .52802s.52802-.239103 .52802-.52802z%27/%3E%0A%3Cpath id=%27g4-78%27 d=%27m7.531756-5.758406c.099626-.398506 .278954-.707347 1.075965-.737235c.049813 0 .169365-.009963 .169365-.199253c0-.009963 0-.109589-.129514-.109589c-.328767 0-.67746 .029888-1.006227 .029888c-.33873 0-.687422-.029888-1.016189-.029888c-.059776 0-.179328 0-.179328 .199253c0 .109589 .099626 .109589 .179328 .109589c.56787 .009963 .67746 .219178 .67746 .438356c0 .029888-.019925 .179328-.029888 .209215l-1.115816 4.433375l-2.201743-5.200498c-.079701-.179328-.089664-.18929-.318804-.18929h-1.334994c-.199253 0-.288917 0-.288917 .199253c0 .109589 .089664 .109589 .278954 .109589c.049813 0 .67746 0 .67746 .089664l-1.334994 5.349938c-.099626 .398506-.268991 .71731-1.075965 .747198c-.059776 0-.169365 .009963-.169365 .199253c0 .069738 .049813 .109589 .129514 .109589c.318804 0 .667497-.029888 .996264-.029888c.33873 0 .697385 .029888 1.026152 .029888c.049813 0 .179328 0 .179328-.199253c0-.099626-.089664-.109589-.199253-.109589c-.577833-.019925-.657534-.239103-.657534-.438356c0-.069738 .009963-.119552 .039851-.229141l1.315068-5.260274c.039851 .059776 .039851 .079701 .089664 .179328l2.480697 5.867995c.069738 .169365 .099626 .18929 .18929 .18929c.109589 0 .109589-.029888 .159402-.209215l1.39477-5.549191z%27/%3E%0A%3Cpath id=%27g4-83%27 d=%27m6.425903-6.924035c0-.029888-.019925-.099626-.109589-.099626c-.049813 0-.059776 .009963-.179328 .14944l-.478207 .56787c-.259029-.468244-.777086-.71731-1.424658-.71731c-1.265255 0-2.460772 1.145704-2.460772 2.351183c0 .806974 .52802 1.265255 1.036115 1.414695l1.066002 .278954c.368618 .089664 .916563 .239103 .916563 1.05604c0 .896638-.816936 1.833126-1.793275 1.833126c-.637609 0-1.743462-.219178-1.743462-1.454545c0-.239103 .049813-.478207 .059776-.537983c.009963-.039851 .019925-.049813 .019925-.069738c0-.099626-.069738-.109589-.119552-.109589s-.069738 .009963-.099626 .039851c-.039851 .039851-.597758 2.311333-.597758 2.34122c0 .059776 .049813 .099626 .109589 .099626c.049813 0 .059776-.009963 .179328-.14944l.488169-.56787c.428394 .577833 1.105853 .71731 1.683686 .71731c1.354919 0 2.530511-1.325031 2.530511-2.560399c0-.687422-.33873-1.026152-.488169-1.165629c-.229141-.229141-.37858-.268991-1.265255-.498132c-.219178-.059776-.577833-.159402-.667497-.179328c-.268991-.089664-.607721-.37858-.607721-.9066c0-.806974 .797011-1.653798 1.743462-1.653798c.826899 0 1.43462 .428394 1.43462 1.544209c0 .318804-.039851 .498132-.039851 .557908c0 .009963 0 .099626 .119552 .099626c.099626 0 .109589-.029888 .14944-.199253l.537983-2.181818z%27/%3E%0A%3Cpath id=%27g4-90%27 d=%27m7.173101-6.56538c.009963-.039851 .029888-.089664 .029888-.14944c0-.089664-.049813-.089664-.249066-.089664h-4.204234c-.239103 0-.249066 .009963-.308842 .199253l-.547945 1.793275c-.019925 .049813-.029888 .119552-.029888 .139477c0 .009963 0 .109589 .119552 .109589c.089664 0 .109589-.069738 .129514-.099626c.37858-1.175592 .896638-1.833126 2.450809-1.833126h1.62391l-5.569116 6.22665c0 .009963-.039851 .14944-.039851 .179328c0 .089664 .069738 .089664 .249066 .089664h4.333748c.239103 0 .249066-.009963 .308842-.199253l.707347-2.201743c.009963-.039851 .039851-.109589 .039851-.14944c0-.049813-.039851-.109589-.129514-.109589s-.099626 .039851-.169365 .249066c-.438356 1.354919-.916563 2.072229-2.610212 2.072229h-1.703611l5.569116-6.22665z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page2%27%3E%0A%3Cuse x=%2760.211919%27 y=%27-23.013735%27 xlink:href=%27%23g4-78%27/%3E%0A%3Cuse x=%2769.302809%27 y=%27-27.127231%27 xlink:href=%27%23g3-49%27/%3E%0A%3Cuse x=%2777.743401%27 y=%27-23.013735%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%2781.617775%27 y=%27-23.013735%27 xlink:href=%27%23g2-62%27/%3E%0A%3Cuse x=%2789.366522%27 y=%27-23.013735%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%2796.00821%27 y=%27-23.013735%27 xlink:href=%27%23g6-61%27/%3E%0A%3Cuse x=%27106.52429%27 y=%27-23.013735%27 xlink:href=%27%23g4-90%27/%3E%0A%3Cuse x=%27116.251652%27 y=%27-23.013735%27 xlink:href=%27%23g6-43%27/%3E%0A%3Cuse x=%27126.214265%27 y=%27-23.013735%27 xlink:href=%27%23g4-83%27/%3E%0A%3Cuse x=%27132.897527%27 y=%27-23.013735%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%27136.771901%27 y=%27-23.013735%27 xlink:href=%27%23g4-78%27/%3E%0A%3Cuse x=%27145.862791%27 y=%27-27.127231%27 xlink:href=%27%23g3-49%27/%3E%0A%3Cuse x=%27153.805266%27 y=%27-27.127231%27 xlink:href=%27%23g3-0%27/%3E%0A%3Cuse x=%27160.031945%27 y=%27-27.127231%27 xlink:href=%27%23g7-49%27/%3E%0A%3Cuse x=%27164.501286%27 y=%27-23.013735%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%27168.37566%27 y=%27-23.013735%27 xlink:href=%27%23g2-62%27/%3E%0A%3Cuse x=%27176.124407%27 y=%27-23.013735%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%27179.998781%27 y=%27-23.013735%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%2796.00821%27 y=%27-6.834341%27 xlink:href=%27%23g6-61%27/%3E%0A%3Cuse x=%27106.52429%27 y=%27-6.834341%27 xlink:href=%27%23g4-90%27/%3E%0A%3Cuse x=%27116.251652%27 y=%27-6.834341%27 xlink:href=%27%23g6-43%27/%3E%0A%3Cuse x=%27126.214265%27 y=%27-6.834341%27 xlink:href=%27%23g4-83%27/%3E%0A%3Cuse x=%27132.897527%27 y=%27-6.834341%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%27136.771901%27 y=%27-6.834341%27 xlink:href=%27%23g4-90%27/%3E%0A%3Cuse x=%27144.285397%27 y=%27-6.834341%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%27150.373637%27 y=%27-6.834341%27 xlink:href=%27%23g6-43%27/%3E%0A%3Cuse x=%27160.336251%27 y=%27-6.834341%27 xlink:href=%27%23g4-83%27/%3E%0A%3Cuse x=%27167.019513%27 y=%27-6.834341%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%27170.893886%27 y=%27-6.834341%27 xlink:href=%27%23g4-78%27/%3E%0A%3Cuse x=%27179.984777%27 y=%27-10.947837%27 xlink:href=%27%23g3-49%27/%3E%0A%3Cuse x=%27187.927251%27 y=%27-10.947837%27 xlink:href=%27%23g3-0%27/%3E%0A%3Cuse x=%27194.15393%27 y=%27-10.947837%27 xlink:href=%27%23g7-50%27/%3E%0A%3Cuse x=%27198.623271%27 y=%27-6.834341%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%27202.497645%27 y=%27-6.834341%27 xlink:href=%27%23g2-62%27/%3E%0A%3Cuse x=%27210.246393%27 y=%27-6.834341%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%27214.120767%27 y=%27-6.834341%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%2796.00821%27 y=%278.109619%27 xlink:href=%27%23g6-61%27/%3E%0A%3Cuse x=%27106.52429%27 y=%278.109619%27 xlink:href=%27%23g4-58%27/%3E%0A%3Cuse x=%27110.952098%27 y=%278.109619%27 xlink:href=%27%23g4-58%27/%3E%0A%3Cuse x=%27115.379905%27 y=%278.109619%27 xlink:href=%27%23g4-58%27/%3E%0A%3Cuse x=%2796.00821%27 y=%2723.053579%27 xlink:href=%27%23g6-61%27/%3E%0A%3Cuse x=%27106.52429%27 y=%2723.053579%27 xlink:href=%27%23g4-90%27/%3E%0A%3Cuse x=%27116.251652%27 y=%2723.053579%27 xlink:href=%27%23g6-43%27/%3E%0A%3Cuse x=%27126.214265%27 y=%2723.053579%27 xlink:href=%27%23g4-83%27/%3E%0A%3Cuse x=%27132.897527%27 y=%2723.053579%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%27136.771901%27 y=%2723.053579%27 xlink:href=%27%23g4-90%27/%3E%0A%3Cuse x=%27144.285397%27 y=%2723.053579%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%27150.373637%27 y=%2723.053579%27 xlink:href=%27%23g6-43%27/%3E%0A%3Cuse x=%27160.336251%27 y=%2723.053579%27 xlink:href=%27%23g4-83%27/%3E%0A%3Cuse x=%27167.019513%27 y=%2723.053579%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%27170.893886%27 y=%2723.053579%27 xlink:href=%27%23g4-83%27/%3E%0A%3Cuse x=%27177.577149%27 y=%2723.053579%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%27181.451522%27 y=%2723.053579%27 xlink:href=%27%23g4-90%27/%3E%0A%3Cuse x=%27188.965019%27 y=%2723.053579%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%27192.839392%27 y=%2723.053579%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%27198.927632%27 y=%2723.053579%27 xlink:href=%27%23g6-43%27/%3E%0A%3Cuse x=%27208.890246%27 y=%2723.053579%27 xlink:href=%27%23g4-83%27/%3E%0A%3Cuse x=%27215.573508%27 y=%2723.053579%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%27219.447882%27 y=%2723.053579%27 xlink:href=%27%23g4-83%27/%3E%0A%3Cuse x=%27226.131144%27 y=%2723.053579%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%27230.005517%27 y=%2723.053579%27 xlink:href=%27%23g4-83%27/%3E%0A%3Cuse x=%27236.68878%27 y=%2723.053579%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%27240.563153%27 y=%2723.053579%27 xlink:href=%27%23g4-90%27/%3E%0A%3Cuse x=%27248.07665%27 y=%2723.053579%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%27251.951023%27 y=%2723.053579%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%27255.825397%27 y=%2723.053579%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%27261.913637%27 y=%2723.053579%27 xlink:href=%27%23g6-43%27/%3E%0A%3Cuse x=%27271.87625%27 y=%2723.053579%27 xlink:href=%27%23g4-58%27/%3E%0A%3Cuse x=%27276.304058%27 y=%2723.053579%27 xlink:href=%27%23g4-58%27/%3E%0A%3Cuse x=%27280.731866%27 y=%2723.053579%27 xlink:href=%27%23g4-58%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\begin{equation*}
\begin{aligned}
N^{\infty}(\top)
&amp;amp;= Z + S(N^{\infty-1}(\top)) \\
&amp;amp;= Z + S(Z) + S(N^{\infty-2}(\top)) \\
&amp;amp;= \dots \\
&amp;amp;= Z + S(Z) + S(S(Z)) + S(S(S(Z))) + \dots \\
\end{aligned}
\end{equation*}
" style="height: 5.9274em; vertical-align: -2.6697em; display: inline-block" class="org-latex org-latex-inline" />
</span>
</div>

<p>
If we look at the unrolling closely, the results of this infinite type series is
precisely the natural numbers.
</p>

<p>
In Haskell, one can codify this idea of looping a type constructor unto itself
an infinite number of times through the <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Fix</span></code> type constructor:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">data</span> <span style="color: #531ab6; font-weight: bold;">Fix</span> f <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">In</span> (f (<span style="color: #531ab6; font-weight: bold;">Fix</span> f))
</code></pre>
</div>

<p>
Obviously, nobody would want to work with <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Fix</span> <span style="color: #531ab6; font-weight: bold;">N</span></code> instead of
<code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Nat</span></code>, but the former has richer structure that can be exploited to
produce extra generic code. In the following sections, we are going to take the
idea of a functor fix point and extend it to create a nice API for algebraic
effects.
</p>
</div>
</div>
<div id="outline-container-org7bcfe3a" class="outline-2">
<h2 id="org7bcfe3a"><span class="section-number-2">4.</span> Syntax trees as fixpoint of sum of functors</h2>
<div class="outline-text-2" id="text-4">
<p>
Let's think about the idea of an abstract syntax tree. This will be a tree that
has a couple of different node types. Some of these nodes are going to have
children, some won't. Some of these nodes are going to contain extra
information, some won't. We can represent a specific node type, its number of
children and the extra stuff contains through a one-argument type constructor.
Let's define the type constructors associated to the node types of the trees of
arithmetic expressions.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">data</span> <span style="color: #531ab6; font-weight: bold;">Plus</span> s <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">Plus</span> s s
  <span style="color: #005e8b; font-weight: bold;">deriving</span> (<span style="color: #531ab6; font-weight: bold;">Functor</span>, <span style="color: #531ab6; font-weight: bold;">Show</span>)

<span style="color: #005e8b; font-weight: bold;">data</span> <span style="color: #531ab6; font-weight: bold;">Zero</span> s <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">Zero</span>
  <span style="color: #005e8b; font-weight: bold;">deriving</span> (<span style="color: #531ab6; font-weight: bold;">Functor</span>, <span style="color: #531ab6; font-weight: bold;">Show</span>)

<span style="color: #005e8b; font-weight: bold;">data</span> <span style="color: #531ab6; font-weight: bold;">Times</span> s <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">Times</span> s s
  <span style="color: #005e8b; font-weight: bold;">deriving</span> (<span style="color: #531ab6; font-weight: bold;">Functor</span>, <span style="color: #531ab6; font-weight: bold;">Show</span>)

<span style="color: #005e8b; font-weight: bold;">data</span> <span style="color: #531ab6; font-weight: bold;">One</span> s <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">One</span>
  <span style="color: #005e8b; font-weight: bold;">deriving</span> (<span style="color: #531ab6; font-weight: bold;">Functor</span>, <span style="color: #531ab6; font-weight: bold;">Show</span>)
</code></pre>
</div>

<p>
Once we have the building blocks of our expression tree, we still need to
assemble them! Currently, we only have a bunch of one-level expression trees
with holes. The first step will be to merge them into a single type constructor
(with many value constructors), the second step will be to take its fixpoint,
which will close the loop and give us a closed type.
</p>

<p>
It is straightforward to define a <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">:+:</span></code> operator on one-argument type
constructors
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">data</span> (a <span style="color: #531ab6; font-weight: bold;">:+:</span> b) x <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">InL</span> (a x) <span style="color: #3548cf;">|</span> <span style="color: #531ab6; font-weight: bold;">InR</span> (b x)
  <span style="color: #005e8b; font-weight: bold;">deriving</span> (<span style="color: #531ab6; font-weight: bold;">Functor</span>, <span style="color: #531ab6; font-weight: bold;">Show</span>)
</code></pre>
</div>

<p>
Then, to get the actual type of arithmetic expression trees, we would simply
have to do this:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">type</span> <span style="color: #531ab6; font-weight: bold;">Expr</span> <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">Fix</span> (<span style="color: #531ab6; font-weight: bold;">Plus</span> <span style="color: #531ab6; font-weight: bold;">:+:</span> <span style="color: #531ab6; font-weight: bold;">Zero</span> <span style="color: #531ab6; font-weight: bold;">:+:</span> <span style="color: #531ab6; font-weight: bold;">Times</span> <span style="color: #531ab6; font-weight: bold;">:+:</span> <span style="color: #531ab6; font-weight: bold;">One</span>)
</code></pre>
</div>

<p>
however, this is not the best we can do. While this way of summing pairs of
functor together until there is only one left is intuitive, it uniformity (and
polymorphism-friendlyness) the structure of a real "sum all the functors in this
list" operator.
</p>
</div>
</div>
<div id="outline-container-orgaf66cc7" class="outline-2">
<h2 id="orgaf66cc7"><span class="section-number-2">5.</span> The <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Sum</span></code> constructor</h2>
<div class="outline-text-2" id="text-5">
<p>
If we have a list of type constructors <code class="src src-haskell"><span style="color: #8f0075;">fs</span> <span style="color: #3548cf;">::</span> [<span style="color: #3548cf;">*</span> <span style="color: #3548cf;">-&gt;</span> <span style="color: #3548cf;">*</span>] </code>, we can sum
them all in one shot through what looks a lot like the definition of the list
type. An element of ((the sum of constructors) applied to a type)<span class="sidenote-ref"
    onclick="this.nextElementSibling.classList.toggle('active')">4</span><span
    class="sidenote"><sup>4</sup>
I wish English had better ways of making precedence explicit.
</span> is
either an element of the first constructor applied to the type or an element of
((the sum of the other constructors) applied to the type).
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">data</span> <span style="color: #531ab6; font-weight: bold;">Sum</span> (fs <span style="color: #3548cf;">::</span> [<span style="color: #3548cf;">*</span> <span style="color: #3548cf;">-&gt;</span> <span style="color: #3548cf;">*</span>]) (x <span style="color: #3548cf;">::</span> <span style="color: #3548cf;">*</span>) <span style="color: #005e8b; font-weight: bold;">where</span>
  <span style="color: #531ab6; font-weight: bold;">Head</span> <span style="color: #3548cf;">::</span> f x <span style="color: #3548cf;">-&gt;</span> <span style="color: #531ab6; font-weight: bold;">Sum</span> (f '<span style="color: #531ab6; font-weight: bold;">:</span> fs) x
  <span style="color: #531ab6; font-weight: bold;">Tail</span> <span style="color: #3548cf;">::</span> <span style="color: #531ab6; font-weight: bold;">Sum</span> fs x <span style="color: #3548cf;">-&gt;</span> <span style="color: #531ab6; font-weight: bold;">Sum</span>  (f '<span style="color: #531ab6; font-weight: bold;">:</span> fs) x
</code></pre>
</div>

<p>
One advantage of this representation over the <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">:+:</span></code> one is the fact
that taking the sum of an empty list automatically gives us the empty type
(notice there is no constructor that produces a <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Sum</span> '<span style="color: #531ab6; font-weight: bold;">[]</span> x</code>) while it
would have been necessary to use a special empty type in the case of the binary
constructor addition.
</p>

<p>
Now let's <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Fix</span></code> our <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Sum</span></code> and see it in action action!
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #8f0075;">zeroPlusOne</span> <span style="color: #3548cf;">::</span> <span style="color: #531ab6; font-weight: bold;">Fix</span> (<span style="color: #531ab6; font-weight: bold;">Sum</span> [<span style="color: #531ab6; font-weight: bold;">Zero</span>, <span style="color: #531ab6; font-weight: bold;">Plus</span>, <span style="color: #531ab6; font-weight: bold;">One</span>])
<span style="color: #8f0075;">zeroPlusOne</span> <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">In</span> <span style="color: #3548cf;">$</span> <span style="color: #531ab6; font-weight: bold;">Tail</span> <span style="color: #3548cf;">$</span> <span style="color: #531ab6; font-weight: bold;">Head</span> <span style="color: #3548cf;">$</span> <span style="color: #531ab6; font-weight: bold;">Plus</span> (<span style="color: #531ab6; font-weight: bold;">In</span> <span style="color: #3548cf;">$</span> <span style="color: #531ab6; font-weight: bold;">Head</span> <span style="color: #3548cf;">$</span> <span style="color: #531ab6; font-weight: bold;">Zero</span>) (<span style="color: #531ab6; font-weight: bold;">In</span> <span style="color: #3548cf;">$</span> <span style="color: #531ab6; font-weight: bold;">Tail</span> <span style="color: #3548cf;">$</span> <span style="color: #531ab6; font-weight: bold;">Tail</span> <span style="color: #3548cf;">$</span> <span style="color: #531ab6; font-weight: bold;">Head</span> <span style="color: #3548cf;">$</span> <span style="color: #531ab6; font-weight: bold;">One</span>)
</code></pre>
</div>

<p>
Actually using this way to write the terms would be pretty awful. We will borrow
the technique presented in the paper Data types à la carte<a href="#citeproc_bib_item_1">[1]</a>
to implement smart constructors that let us express the same terms, but in a
more concise way.
</p>
</div>
</div>
<div id="outline-container-org7e7aa93" class="outline-2">
<h2 id="org7e7aa93"><span class="section-number-2">6.</span> Free monads</h2>
<div class="outline-text-2" id="text-6">
<p>
Recall the definition of a monad: "A monad <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%278.205633pt%27 height=%277.807787pt%27 viewBox=%27-.500002 -7.307786 8.205633 7.807787%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-84%27 d=%27m4.254047-6.047323c.069738-.278954 .109589-.33873 .229141-.368618c.089664-.019925 .418431-.019925 .627646-.019925c1.006227 0 1.454545 .039851 1.454545 .816936c0 .14944-.039851 .537983-.079701 .797011c-.009963 .039851-.029888 .159402-.029888 .18929c0 .059776 .029888 .129514 .119552 .129514c.109589 0 .129514-.079701 .14944-.229141l.268991-1.733499c.009963-.039851 .019925-.139477 .019925-.169365c0-.109589-.099626-.109589-.268991-.109589h-5.529265c-.239103 0-.249066 .009963-.318804 .199253l-.597758 1.753425c-.009963 .019925-.059776 .159402-.059776 .179328c0 .059776 .049813 .109589 .119552 .109589c.099626 0 .109589-.049813 .169365-.209215c.537983-1.544209 .797011-1.723537 2.271482-1.723537h.388543c.278954 0 .278954 .039851 .278954 .119552c0 .059776-.029888 .179328-.039851 .209215l-1.334994 5.32005c-.089664 .368618-.119552 .478207-1.185554 .478207c-.358655 0-.418431 0-.418431 .18929c0 .119552 .109589 .119552 .169365 .119552c.268991 0 .547945-.019925 .816936-.019925c.278954 0 .56787-.009963 .846824-.009963s.557908 .009963 .826899 .009963c.288917 0 .587796 .019925 .86675 .019925c.099626 0 .219178 0 .219178-.199253c0-.109589-.079701-.109589-.33873-.109589c-.249066 0-.37858 0-.637609-.019925c-.288917-.029888-.368618-.059776-.368618-.219178c0-.009963 0-.059776 .039851-.209215l1.325031-5.290162z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page7%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-84%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( T \)" style="height: 0.7680em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" /> is a monoid in the category
of endofunctors". In simpler english, this means that we have two natural
transformations
</p>



<div class="equation-container">
<span class="equation">
<img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%27344.711087pt%27 height=%2728.895396pt%27 viewBox=%27-.500002 -17.43649 344.711087 28.895396%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g2-33%27 d=%27m8.308842-2.291407c-.547945 .418431-.816936 .826899-.896638 .956413c-.448319 .687422-.52802 1.315068-.52802 1.325031c0 .119552 .119552 .119552 .199253 .119552c.169365 0 .179328-.019925 .219178-.199253c.229141-.976339 .816936-1.8132 1.942715-2.271482c.119552-.039851 .14944-.059776 .14944-.129514s-.059776-.099626-.079701-.109589c-.438356-.169365-1.643836-.667497-2.022416-2.34122c-.029888-.119552-.039851-.14944-.209215-.14944c-.079701 0-.199253 0-.199253 .119552c0 .019925 .089664 .647572 .508095 1.315068c.199253 .298879 .488169 .647572 .916563 .966376h-7.402242c-.179328 0-.358655 0-.358655 .199253s.179328 .199253 .358655 .199253h7.402242z%27/%3E%0A%3Cpath id=%27g6-58%27 d=%27m1.912827-3.765878c0-.288917-.239103-.52802-.52802-.52802s-.52802 .239103-.52802 .52802s.239103 .52802 .52802 .52802s.52802-.239103 .52802-.52802zm0 3.237858c0-.288917-.239103-.52802-.52802-.52802s-.52802 .239103-.52802 .52802s.239103 .52802 .52802 .52802s.52802-.239103 .52802-.52802z%27/%3E%0A%3Cpath id=%27g4-17%27 d=%27m4.861768-2.759651c.049813-.179328 .079701-.308842 .079701-.577833c0-.647572-.398506-1.066002-1.145704-1.066002c-.787049 0-1.305106 .518057-1.544209 .86675c-.049813-.56787-.468244-.86675-.916563-.86675c-.458281 0-.647572 .388543-.737235 .56787c-.179328 .33873-.308842 .936488-.308842 .966376c0 .099626 .099626 .099626 .119552 .099626c.099626 0 .109589-.009963 .169365-.229141c.169365-.707347 .368618-1.185554 .727273-1.185554c.169365 0 .308842 .079701 .308842 .458281c0 .209215-.029888 .318804-.159402 .836862l-.577833 2.30137c-.029888 .14944-.089664 .37858-.089664 .428394c0 .179328 .139477 .268991 .288917 .268991c.119552 0 .298879-.079701 .368618-.278954c.009963-.019925 .129514-.488169 .18929-.737235l.219178-.896638c.059776-.219178 .119552-.438356 .169365-.667497c.019925-.059776 .099626-.388543 .109589-.448319c.029888-.089664 .33873-.647572 .67746-.916563c.219178-.159402 .52802-.348692 .956413-.348692s.537983 .33873 .537983 .697385c0 .049813 0 .229141-.099626 .627646l-1.135741 4.582814c-.029888 .119552-.029888 .139477-.029888 .159402c0 .14944 .109589 .268991 .278954 .268991c.308842 0 .37858-.288917 .408468-.398506l1.135741-4.513076z%27/%3E%0A%3Cpath id=%27g4-22%27 d=%27m2.30137-3.496887c.049813-.209215 .14944-.587796 .14944-.637609c0-.169365-.119552-.268991-.288917-.268991c-.029888 0-.308842 .009963-.398506 .358655l-1.43462 5.768369c-.029888 .119552-.029888 .139477-.029888 .159402c0 .14944 .109589 .268991 .278954 .268991c.209215 0 .328767-.179328 .348692-.209215c.039851-.089664 .169365-.607721 .547945-2.141968c.318804 .268991 .767123 .308842 .966376 .308842c.697385 0 1.085928-.448319 1.325031-.727273c.089664 .448319 .458281 .727273 .896638 .727273c.348692 0 .577833-.229141 .737235-.547945c.169365-.358655 .298879-.966376 .298879-.986301c0-.099626-.089664-.099626-.119552-.099626c-.099626 0-.109589 .039851-.139477 .179328c-.169365 .647572-.348692 1.235367-.757161 1.235367c-.268991 0-.298879-.259029-.298879-.458281c0-.219178 .119552-.687422 .199253-1.036115l.278954-1.075965c.029888-.14944 .129514-.52802 .169365-.67746c.049813-.229141 .14944-.607721 .14944-.667497c0-.179328-.139477-.268991-.288917-.268991c-.049813 0-.308842 .009963-.388543 .348692l-.468244 1.863014c-.119552 .498132-.229141 .916563-.259029 1.016189c-.009963 .049813-.488169 .956413-1.295143 .956413c-.498132 0-.737235-.328767-.737235-.86675c0-.288917 .069738-.56787 .139477-.846824l.418431-1.673724z%27/%3E%0A%3Cpath id=%27g4-73%27 d=%27m3.726027-6.03736c.089664-.358655 .119552-.458281 .9066-.458281c.239103 0 .318804 0 .318804-.18929c0-.119552-.109589-.119552-.14944-.119552c-.288917 0-1.026152 .029888-1.315068 .029888c-.298879 0-1.026152-.029888-1.325031-.029888c-.069738 0-.199253 0-.199253 .199253c0 .109589 .089664 .109589 .278954 .109589c.418431 0 .687422 0 .687422 .18929c0 .049813 0 .069738-.019925 .159402l-1.344956 5.369863c-.089664 .368618-.119552 .468244-.9066 .468244c-.229141 0-.318804 0-.318804 .199253c0 .109589 .119552 .109589 .14944 .109589c.288917 0 1.016189-.029888 1.305106-.029888c.298879 0 1.036115 .029888 1.334994 .029888c.079701 0 .199253 0 .199253-.18929c0-.119552-.079701-.119552-.298879-.119552c-.179328 0-.229141 0-.428394-.019925c-.209215-.019925-.249066-.059776-.249066-.169365c0-.079701 .019925-.159402 .039851-.229141l1.334994-5.310087z%27/%3E%0A%3Cpath id=%27g4-84%27 d=%27m4.254047-6.047323c.069738-.278954 .109589-.33873 .229141-.368618c.089664-.019925 .418431-.019925 .627646-.019925c1.006227 0 1.454545 .039851 1.454545 .816936c0 .14944-.039851 .537983-.079701 .797011c-.009963 .039851-.029888 .159402-.029888 .18929c0 .059776 .029888 .129514 .119552 .129514c.109589 0 .129514-.079701 .14944-.229141l.268991-1.733499c.009963-.039851 .019925-.139477 .019925-.169365c0-.109589-.099626-.109589-.268991-.109589h-5.529265c-.239103 0-.249066 .009963-.318804 .199253l-.597758 1.753425c-.009963 .019925-.059776 .159402-.059776 .179328c0 .059776 .049813 .109589 .119552 .109589c.099626 0 .109589-.049813 .169365-.209215c.537983-1.544209 .797011-1.723537 2.271482-1.723537h.388543c.278954 0 .278954 .039851 .278954 .119552c0 .059776-.029888 .179328-.039851 .209215l-1.334994 5.32005c-.089664 .368618-.119552 .478207-1.185554 .478207c-.358655 0-.418431 0-.418431 .18929c0 .119552 .109589 .119552 .169365 .119552c.268991 0 .547945-.019925 .816936-.019925c.278954 0 .56787-.009963 .846824-.009963s.557908 .009963 .826899 .009963c.288917 0 .587796 .019925 .86675 .019925c.099626 0 .219178 0 .219178-.199253c0-.109589-.079701-.109589-.33873-.109589c-.249066 0-.37858 0-.637609-.019925c-.288917-.029888-.368618-.059776-.368618-.219178c0-.009963 0-.059776 .039851-.209215l1.325031-5.290162z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page4%27%3E%0A%3Cuse x=%27156.094775%27 y=%27-7.571643%27 xlink:href=%27%23g4-17%27/%3E%0A%3Cuse x=%27164.166311%27 y=%27-7.571643%27 xlink:href=%27%23g6-58%27/%3E%0A%3Cuse x=%27169.701052%27 y=%27-7.571643%27 xlink:href=%27%23g4-73%27/%3E%0A%3Cuse x=%27177.629576%27 y=%27-7.571643%27 xlink:href=%27%23g2-33%27/%3E%0A%3Cuse x=%27190.359577%27 y=%27-7.571643%27 xlink:href=%27%23g4-84%27/%3E%0A%3Cuse x=%27146.145923%27 y=%277.372317%27 xlink:href=%27%23g4-22%27/%3E%0A%3Cuse x=%27154.916239%27 y=%277.372317%27 xlink:href=%27%23g6-58%27/%3E%0A%3Cuse x=%27160.45098%27 y=%277.372317%27 xlink:href=%27%23g4-84%27/%3E%0A%3Cuse x=%27167.656623%27 y=%277.372317%27 xlink:href=%27%23g4-84%27/%3E%0A%3Cuse x=%27177.629599%27 y=%277.372317%27 xlink:href=%27%23g2-33%27/%3E%0A%3Cuse x=%27190.3596%27 y=%277.372317%27 xlink:href=%27%23g4-84%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\begin{equation*}
\begin{aligned}
\eta : I \to T \\
\mu : TT \to T \\
\end{aligned}
\end{equation*}
" style="height: 2.8424em; vertical-align: -1.1272em; display: inline-block" class="org-latex org-latex-inline" />
</span>
</div>

<p>
In Haskell, the monad typeclass presents <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%276.304194pt%27 height=%277.226639pt%27 viewBox=%27-.500002 -4.789458 6.304194 7.226639%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-17%27 d=%27m4.861768-2.759651c.049813-.179328 .079701-.308842 .079701-.577833c0-.647572-.398506-1.066002-1.145704-1.066002c-.787049 0-1.305106 .518057-1.544209 .86675c-.049813-.56787-.468244-.86675-.916563-.86675c-.458281 0-.647572 .388543-.737235 .56787c-.179328 .33873-.308842 .936488-.308842 .966376c0 .099626 .099626 .099626 .119552 .099626c.099626 0 .109589-.009963 .169365-.229141c.169365-.707347 .368618-1.185554 .727273-1.185554c.169365 0 .308842 .079701 .308842 .458281c0 .209215-.029888 .318804-.159402 .836862l-.577833 2.30137c-.029888 .14944-.089664 .37858-.089664 .428394c0 .179328 .139477 .268991 .288917 .268991c.119552 0 .298879-.079701 .368618-.278954c.009963-.019925 .129514-.488169 .18929-.737235l.219178-.896638c.059776-.219178 .119552-.438356 .169365-.667497c.019925-.059776 .099626-.388543 .109589-.448319c.029888-.089664 .33873-.647572 .67746-.916563c.219178-.159402 .52802-.348692 .956413-.348692s.537983 .33873 .537983 .697385c0 .049813 0 .229141-.099626 .627646l-1.135741 4.582814c-.029888 .119552-.029888 .139477-.029888 .159402c0 .14944 .109589 .268991 .278954 .268991c.308842 0 .37858-.288917 .408468-.398506l1.135741-4.513076z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page36%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-17%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( \eta \)" style="height: 0.7109em; vertical-align: -0.2397em; display: inline-block" class="org-latex org-latex-inline" /> as the polymorphic function
<code class="src src-haskell">pure</code> and <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%277.002975pt%27 height=%277.226639pt%27 viewBox=%27-.500002 -4.789458 7.002975 7.226639%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-22%27 d=%27m2.30137-3.496887c.049813-.209215 .14944-.587796 .14944-.637609c0-.169365-.119552-.268991-.288917-.268991c-.029888 0-.308842 .009963-.398506 .358655l-1.43462 5.768369c-.029888 .119552-.029888 .139477-.029888 .159402c0 .14944 .109589 .268991 .278954 .268991c.209215 0 .328767-.179328 .348692-.209215c.039851-.089664 .169365-.607721 .547945-2.141968c.318804 .268991 .767123 .308842 .966376 .308842c.697385 0 1.085928-.448319 1.325031-.727273c.089664 .448319 .458281 .727273 .896638 .727273c.348692 0 .577833-.229141 .737235-.547945c.169365-.358655 .298879-.966376 .298879-.986301c0-.099626-.089664-.099626-.119552-.099626c-.099626 0-.109589 .039851-.139477 .179328c-.169365 .647572-.348692 1.235367-.757161 1.235367c-.268991 0-.298879-.259029-.298879-.458281c0-.219178 .119552-.687422 .199253-1.036115l.278954-1.075965c.029888-.14944 .129514-.52802 .169365-.67746c.049813-.229141 .14944-.607721 .14944-.667497c0-.179328-.139477-.268991-.288917-.268991c-.049813 0-.308842 .009963-.388543 .348692l-.468244 1.863014c-.119552 .498132-.229141 .916563-.259029 1.016189c-.009963 .049813-.488169 .956413-1.295143 .956413c-.498132 0-.737235-.328767-.737235-.86675c0-.288917 .069738-.56787 .139477-.846824l.418431-1.673724z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page35%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-22%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( \mu \)" style="height: 0.7109em; vertical-align: -0.2397em; display: inline-block" class="org-latex org-latex-inline" /> as a (different, but equivalent) operator
<code class="src src-haskell"><span style="color: #3548cf;">&gt;&gt;=</span></code>. For a type constructor <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%278.205633pt%27 height=%277.807787pt%27 viewBox=%27-.500002 -7.307786 8.205633 7.807787%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-84%27 d=%27m4.254047-6.047323c.069738-.278954 .109589-.33873 .229141-.368618c.089664-.019925 .418431-.019925 .627646-.019925c1.006227 0 1.454545 .039851 1.454545 .816936c0 .14944-.039851 .537983-.079701 .797011c-.009963 .039851-.029888 .159402-.029888 .18929c0 .059776 .029888 .129514 .119552 .129514c.109589 0 .129514-.079701 .14944-.229141l.268991-1.733499c.009963-.039851 .019925-.139477 .019925-.169365c0-.109589-.099626-.109589-.268991-.109589h-5.529265c-.239103 0-.249066 .009963-.318804 .199253l-.597758 1.753425c-.009963 .019925-.059776 .159402-.059776 .179328c0 .059776 .049813 .109589 .119552 .109589c.099626 0 .109589-.049813 .169365-.209215c.537983-1.544209 .797011-1.723537 2.271482-1.723537h.388543c.278954 0 .278954 .039851 .278954 .119552c0 .059776-.029888 .179328-.039851 .209215l-1.334994 5.32005c-.089664 .368618-.119552 .478207-1.185554 .478207c-.358655 0-.418431 0-.418431 .18929c0 .119552 .109589 .119552 .169365 .119552c.268991 0 .547945-.019925 .816936-.019925c.278954 0 .56787-.009963 .846824-.009963s.557908 .009963 .826899 .009963c.288917 0 .587796 .019925 .86675 .019925c.099626 0 .219178 0 .219178-.199253c0-.109589-.079701-.109589-.33873-.109589c-.249066 0-.37858 0-.637609-.019925c-.288917-.029888-.368618-.059776-.368618-.219178c0-.009963 0-.059776 .039851-.209215l1.325031-5.290162z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page7%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-84%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( T \)" style="height: 0.7680em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" />, having an implementation of
those two functions that respect the monad identities<span class="sidenote-ref"
    onclick="this.nextElementSibling.classList.toggle('active')">5</span><span
    class="sidenote"><sup>5</sup>
The monad identities (recall it is "just" a monoid) are basically
associativity of <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%277.002975pt%27 height=%277.226639pt%27 viewBox=%27-.500002 -4.789458 7.002975 7.226639%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-22%27 d=%27m2.30137-3.496887c.049813-.209215 .14944-.587796 .14944-.637609c0-.169365-.119552-.268991-.288917-.268991c-.029888 0-.308842 .009963-.398506 .358655l-1.43462 5.768369c-.029888 .119552-.029888 .139477-.029888 .159402c0 .14944 .109589 .268991 .278954 .268991c.209215 0 .328767-.179328 .348692-.209215c.039851-.089664 .169365-.607721 .547945-2.141968c.318804 .268991 .767123 .308842 .966376 .308842c.697385 0 1.085928-.448319 1.325031-.727273c.089664 .448319 .458281 .727273 .896638 .727273c.348692 0 .577833-.229141 .737235-.547945c.169365-.358655 .298879-.966376 .298879-.986301c0-.099626-.089664-.099626-.119552-.099626c-.099626 0-.109589 .039851-.139477 .179328c-.169365 .647572-.348692 1.235367-.757161 1.235367c-.268991 0-.298879-.259029-.298879-.458281c0-.219178 .119552-.687422 .199253-1.036115l.278954-1.075965c.029888-.14944 .129514-.52802 .169365-.67746c.049813-.229141 .14944-.607721 .14944-.667497c0-.179328-.139477-.268991-.288917-.268991c-.049813 0-.308842 .009963-.388543 .348692l-.468244 1.863014c-.119552 .498132-.229141 .916563-.259029 1.016189c-.009963 .049813-.488169 .956413-1.295143 .956413c-.498132 0-.737235-.328767-.737235-.86675c0-.288917 .069738-.56787 .139477-.846824l.418431-1.673724z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page35%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-22%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( \mu \)" style="height: 0.7109em; vertical-align: -0.2397em; display: inline-block" class="org-latex org-latex-inline" /> and <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%276.304194pt%27 height=%277.226639pt%27 viewBox=%27-.500002 -4.789458 6.304194 7.226639%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-17%27 d=%27m4.861768-2.759651c.049813-.179328 .079701-.308842 .079701-.577833c0-.647572-.398506-1.066002-1.145704-1.066002c-.787049 0-1.305106 .518057-1.544209 .86675c-.049813-.56787-.468244-.86675-.916563-.86675c-.458281 0-.647572 .388543-.737235 .56787c-.179328 .33873-.308842 .936488-.308842 .966376c0 .099626 .099626 .099626 .119552 .099626c.099626 0 .109589-.009963 .169365-.229141c.169365-.707347 .368618-1.185554 .727273-1.185554c.169365 0 .308842 .079701 .308842 .458281c0 .209215-.029888 .318804-.159402 .836862l-.577833 2.30137c-.029888 .14944-.089664 .37858-.089664 .428394c0 .179328 .139477 .268991 .288917 .268991c.119552 0 .298879-.079701 .368618-.278954c.009963-.019925 .129514-.488169 .18929-.737235l.219178-.896638c.059776-.219178 .119552-.438356 .169365-.667497c.019925-.059776 .099626-.388543 .109589-.448319c.029888-.089664 .33873-.647572 .67746-.916563c.219178-.159402 .52802-.348692 .956413-.348692s.537983 .33873 .537983 .697385c0 .049813 0 .229141-.099626 .627646l-1.135741 4.582814c-.029888 .119552-.029888 .139477-.029888 .159402c0 .14944 .109589 .268991 .278954 .268991c.308842 0 .37858-.288917 .408468-.398506l1.135741-4.513076z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page36%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-17%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( \eta \)" style="height: 0.7109em; vertical-align: -0.2397em; display: inline-block" class="org-latex org-latex-inline" /> being its left and right unit.
</span> is basically what is
meant by a monad.
</p>

<p>
An important construction that we will use later is the free monad. We call this
monad "Free" because it doesn't add new equalities (or computational behavior)
to the functor we use to create it. Moreover, the way we construct it is pretty
much identical to the way we construct the free monoid over an alphabet. The
latter construction is more intuitive, so let's go over free monoids.
</p>

<p>
A monoid is a set <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2711.751343pt%27 height=%277.807787pt%27 viewBox=%27-.500002 -7.307786 11.751343 7.807787%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-77%27 d=%27m9.225405-6.03736c.089664-.358655 .109589-.458281 .856787-.458281c.229141 0 .318804 0 .318804-.199253c0-.109589-.099626-.109589-.268991-.109589h-1.315068c-.259029 0-.268991 0-.388543 .18929l-3.636364 5.678705l-.777086-5.638854c-.029888-.229141-.049813-.229141-.308842-.229141h-1.364882c-.18929 0-.298879 0-.298879 .18929c0 .119552 .089664 .119552 .288917 .119552c.129514 0 .308842 .009963 .428394 .019925c.159402 .019925 .219178 .049813 .219178 .159402c0 .039851-.009963 .069738-.039851 .18929l-1.265255 5.070984c-.099626 .398506-.268991 .71731-1.075965 .747198c-.049813 0-.179328 .009963-.179328 .18929c0 .089664 .059776 .119552 .139477 .119552c.318804 0 .667497-.029888 .996264-.029888c.33873 0 .697385 .029888 1.026152 .029888c.049813 0 .179328 0 .179328-.199253c0-.109589-.109589-.109589-.179328-.109589c-.56787-.009963-.67746-.209215-.67746-.438356c0-.069738 .009963-.119552 .039851-.229141l1.354919-5.429639h.009963l.856787 6.176837c.019925 .119552 .029888 .229141 .14944 .229141c.109589 0 .169365-.109589 .219178-.179328l4.024907-6.306351h.009963l-1.424658 5.708593c-.099626 .388543-.119552 .468244-.9066 .468244c-.169365 0-.278954 0-.278954 .18929c0 .119552 .119552 .119552 .14944 .119552c.278954 0 .956413-.029888 1.235367-.029888c.408468 0 .836862 .029888 1.24533 .029888c.059776 0 .18929 0 .18929-.199253c0-.109589-.089664-.109589-.278954-.109589c-.368618 0-.647572 0-.647572-.179328c0-.039851 0-.059776 .049813-.239103l1.325031-5.310087z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page8%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-77%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( M \)" style="height: 0.7680em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" /> with a neutral element <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2728.566657pt%27 height=%278.197303pt%27 viewBox=%27-.500002 -7.307786 28.566657 8.197303%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g2-50%27 d=%27m5.459527-2.291407c.169365 0 .348692 0 .348692-.199253s-.179328-.199253-.348692-.199253h-4.224159c.119552-1.334994 1.265255-2.291407 2.669988-2.291407h1.554172c.169365 0 .348692 0 .348692-.199253s-.179328-.199253-.348692-.199253h-1.574097c-1.703611 0-3.058531 1.295143-3.058531 2.889166s1.354919 2.889166 3.058531 2.889166h1.574097c.169365 0 .348692 0 .348692-.199253s-.179328-.199253-.348692-.199253h-1.554172c-1.404732 0-2.550436-.956413-2.669988-2.291407h4.224159z%27/%3E%0A%3Cpath id=%27g4-77%27 d=%27m9.225405-6.03736c.089664-.358655 .109589-.458281 .856787-.458281c.229141 0 .318804 0 .318804-.199253c0-.109589-.099626-.109589-.268991-.109589h-1.315068c-.259029 0-.268991 0-.388543 .18929l-3.636364 5.678705l-.777086-5.638854c-.029888-.229141-.049813-.229141-.308842-.229141h-1.364882c-.18929 0-.298879 0-.298879 .18929c0 .119552 .089664 .119552 .288917 .119552c.129514 0 .308842 .009963 .428394 .019925c.159402 .019925 .219178 .049813 .219178 .159402c0 .039851-.009963 .069738-.039851 .18929l-1.265255 5.070984c-.099626 .398506-.268991 .71731-1.075965 .747198c-.049813 0-.179328 .009963-.179328 .18929c0 .089664 .059776 .119552 .139477 .119552c.318804 0 .667497-.029888 .996264-.029888c.33873 0 .697385 .029888 1.026152 .029888c.049813 0 .179328 0 .179328-.199253c0-.109589-.109589-.109589-.179328-.109589c-.56787-.009963-.67746-.209215-.67746-.438356c0-.069738 .009963-.119552 .039851-.229141l1.354919-5.429639h.009963l.856787 6.176837c.019925 .119552 .029888 .229141 .14944 .229141c.109589 0 .169365-.109589 .219178-.179328l4.024907-6.306351h.009963l-1.424658 5.708593c-.099626 .388543-.119552 .468244-.9066 .468244c-.169365 0-.278954 0-.278954 .18929c0 .119552 .119552 .119552 .14944 .119552c.278954 0 .956413-.029888 1.235367-.029888c.408468 0 .836862 .029888 1.24533 .029888c.059776 0 .18929 0 .18929-.199253c0-.109589-.089664-.109589-.278954-.109589c-.368618 0-.647572 0-.647572-.179328c0-.039851 0-.059776 .049813-.239103l1.325031-5.310087z%27/%3E%0A%3Cpath id=%27g4-101%27 d=%27m1.863014-2.30137c.288917 0 1.026152-.019925 1.524284-.229141c.697385-.298879 .747198-.886675 .747198-1.026152c0-.438356-.37858-.846824-1.066002-.846824c-1.105853 0-2.610212 .966376-2.610212 2.709838c0 1.016189 .587796 1.803238 1.564134 1.803238c1.424658 0 2.261519-1.05604 2.261519-1.175592c0-.059776-.059776-.129514-.119552-.129514c-.049813 0-.069738 .019925-.129514 .099626c-.787049 .986301-1.872976 .986301-1.992528 .986301c-.777086 0-.86675-.836862-.86675-1.155666c0-.119552 .009963-.428394 .159402-1.036115h.52802zm-.468244-.219178c.388543-1.514321 1.414695-1.663761 1.673724-1.663761c.468244 0 .737235 .288917 .737235 .627646c0 1.036115-1.594022 1.036115-2.002491 1.036115h-.408468z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page9%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-101%27/%3E%0A%3Cuse x=%277.406204%27 y=%270%27 xlink:href=%27%23g2-50%27/%3E%0A%3Cuse x=%2716.815319%27 y=%270%27 xlink:href=%27%23g4-77%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( e \in M \)" style="height: 0.8063em; vertical-align: -0.0875em; display: inline-block" class="org-latex org-latex-inline" /> with a "multiplication" <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2771.997298pt%27 height=%278.638002pt%27 viewBox=%27-.500002 -7.307786 71.997298 8.638002%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-77%27 d=%27m9.225405-6.03736c.089664-.358655 .109589-.458281 .856787-.458281c.229141 0 .318804 0 .318804-.199253c0-.109589-.099626-.109589-.268991-.109589h-1.315068c-.259029 0-.268991 0-.388543 .18929l-3.636364 5.678705l-.777086-5.638854c-.029888-.229141-.049813-.229141-.308842-.229141h-1.364882c-.18929 0-.298879 0-.298879 .18929c0 .119552 .089664 .119552 .288917 .119552c.129514 0 .308842 .009963 .428394 .019925c.159402 .019925 .219178 .049813 .219178 .159402c0 .039851-.009963 .069738-.039851 .18929l-1.265255 5.070984c-.099626 .398506-.268991 .71731-1.075965 .747198c-.049813 0-.179328 .009963-.179328 .18929c0 .089664 .059776 .119552 .139477 .119552c.318804 0 .667497-.029888 .996264-.029888c.33873 0 .697385 .029888 1.026152 .029888c.049813 0 .179328 0 .179328-.199253c0-.109589-.109589-.109589-.179328-.109589c-.56787-.009963-.67746-.209215-.67746-.438356c0-.069738 .009963-.119552 .039851-.229141l1.354919-5.429639h.009963l.856787 6.176837c.019925 .119552 .029888 .229141 .14944 .229141c.109589 0 .169365-.109589 .219178-.179328l4.024907-6.306351h.009963l-1.424658 5.708593c-.099626 .388543-.119552 .468244-.9066 .468244c-.169365 0-.278954 0-.278954 .18929c0 .119552 .119552 .119552 .14944 .119552c.278954 0 .956413-.029888 1.235367-.029888c.408468 0 .836862 .029888 1.24533 .029888c.059776 0 .18929 0 .18929-.199253c0-.109589-.089664-.109589-.278954-.109589c-.368618 0-.647572 0-.647572-.179328c0-.039851 0-.059776 .049813-.239103l1.325031-5.310087z%27/%3E%0A%3Cpath id=%27g6-58%27 d=%27m1.912827-3.765878c0-.288917-.239103-.52802-.52802-.52802s-.52802 .239103-.52802 .52802s.239103 .52802 .52802 .52802s.52802-.239103 .52802-.52802zm0 3.237858c0-.288917-.239103-.52802-.52802-.52802s-.52802 .239103-.52802 .52802s.239103 .52802 .52802 .52802s.52802-.239103 .52802-.52802z%27/%3E%0A%3Cpath id=%27g2-1%27 d=%27m1.912827-2.49066c0-.288917-.239103-.52802-.52802-.52802s-.52802 .239103-.52802 .52802s.239103 .52802 .52802 .52802s.52802-.239103 .52802-.52802z%27/%3E%0A%3Cpath id=%27g2-2%27 d=%27m3.875467-2.769614l-1.992528-1.982565c-.119552-.119552-.139477-.139477-.219178-.139477c-.099626 0-.199253 .089664-.199253 .199253c0 .069738 .019925 .089664 .129514 .199253l1.992528 2.002491l-1.992528 2.002491c-.109589 .109589-.129514 .129514-.129514 .199253c0 .109589 .099626 .199253 .199253 .199253c.079701 0 .099626-.019925 .219178-.139477l1.982565-1.982565l2.062267 2.062267c.019925 .009963 .089664 .059776 .14944 .059776c.119552 0 .199253-.089664 .199253-.199253c0-.019925 0-.059776-.029888-.109589c-.009963-.019925-1.594022-1.58406-2.092154-2.092154l1.823163-1.823163c.049813-.059776 .199253-.18929 .249066-.249066c.009963-.019925 .049813-.059776 .049813-.129514c0-.109589-.079701-.199253-.199253-.199253c-.079701 0-.119552 .039851-.229141 .14944l-1.972603 1.972603z%27/%3E%0A%3Cpath id=%27g2-33%27 d=%27m8.308842-2.291407c-.547945 .418431-.816936 .826899-.896638 .956413c-.448319 .687422-.52802 1.315068-.52802 1.325031c0 .119552 .119552 .119552 .199253 .119552c.169365 0 .179328-.019925 .219178-.199253c.229141-.976339 .816936-1.8132 1.942715-2.271482c.119552-.039851 .14944-.059776 .14944-.129514s-.059776-.099626-.079701-.109589c-.438356-.169365-1.643836-.667497-2.022416-2.34122c-.029888-.119552-.039851-.14944-.209215-.14944c-.079701 0-.199253 0-.199253 .119552c0 .019925 .089664 .647572 .508095 1.315068c.199253 .298879 .488169 .647572 .916563 .966376h-7.402242c-.179328 0-.358655 0-.358655 .199253s.179328 .199253 .358655 .199253h7.402242z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page10%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g2-1%27/%3E%0A%3Cuse x=%275.534741%27 y=%270%27 xlink:href=%27%23g6-58%27/%3E%0A%3Cuse x=%2711.069482%27 y=%270%27 xlink:href=%27%23g4-77%27/%3E%0A%3Cuse x=%2724.034691%27 y=%270%27 xlink:href=%27%23g2-2%27/%3E%0A%3Cuse x=%2733.997304%27 y=%270%27 xlink:href=%27%23g4-77%27/%3E%0A%3Cuse x=%2747.515979%27 y=%270%27 xlink:href=%27%23g2-33%27/%3E%0A%3Cuse x=%2760.24598%27 y=%270%27 xlink:href=%27%23g4-77%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\(
\cdot : M \times M \to M \)" style="height: 0.8497em; vertical-align: -0.1309em; display: inline-block" class="org-latex org-latex-inline" />.
</p>

<p>
Examples of monoids are:
</p>

<ol class="org-ol">
<li>Natural numbers, zero, addition.</li>
<li>Positive natural numbers, one, multiplication.</li>
<li>Functions <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2730.887818pt%27 height=%277.863152pt%27 viewBox=%27-.500002 -7.363151 30.887818 7.863152%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g2-33%27 d=%27m8.308842-2.291407c-.547945 .418431-.816936 .826899-.896638 .956413c-.448319 .687422-.52802 1.315068-.52802 1.325031c0 .119552 .119552 .119552 .199253 .119552c.169365 0 .179328-.019925 .219178-.199253c.229141-.976339 .816936-1.8132 1.942715-2.271482c.119552-.039851 .14944-.059776 .14944-.129514s-.059776-.099626-.079701-.109589c-.438356-.169365-1.643836-.667497-2.022416-2.34122c-.029888-.119552-.039851-.14944-.209215-.14944c-.079701 0-.199253 0-.199253 .119552c0 .019925 .089664 .647572 .508095 1.315068c.199253 .298879 .488169 .647572 .916563 .966376h-7.402242c-.179328 0-.358655 0-.358655 .199253s.179328 .199253 .358655 .199253h7.402242z%27/%3E%0A%3Cpath id=%27g0-82%27 d=%27m2.669988-3.128269h.358655l1.494396 2.311333c.099626 .159402 .33873 .547945 .448319 .697385c.069738 .119552 .099626 .119552 .328767 .119552h1.374844c.179328 0 .328767 0 .328767-.179328c0-.079701-.059776-.14944-.14944-.169365c-.368618-.079701-.856787-.737235-1.09589-1.05604c-.069738-.099626-.56787-.757161-1.235367-1.833126c.886675-.159402 1.743462-.537983 1.743462-1.723537c0-1.384807-1.464508-1.863014-2.6401-1.863014h-3.128269c-.179328 0-.33873 0-.33873 .179328c0 .169365 .18929 .169365 .268991 .169365c.56787 0 .617684 .069738 .617684 .56787v4.991283c0 .498132-.049813 .56787-.617684 .56787c-.079701 0-.268991 0-.268991 .169365c0 .179328 .159402 .179328 .33873 .179328h2.729763c.179328 0 .328767 0 .328767-.179328c0-.169365-.169365-.169365-.278954-.169365c-.56787 0-.607721-.079701-.607721-.56787v-2.211706zm1.92279-.488169c.278954-.368618 .308842-.896638 .308842-1.334994c0-.478207-.059776-1.006227-.37858-1.414695c.408468 .089664 1.39477 .398506 1.39477 1.404732c0 .647572-.298879 1.155666-1.325031 1.344956zm-1.92279-2.321295c0-.209215 0-.537983 .617684-.537983c.846824 0 1.265255 .348692 1.265255 1.524284c0 1.285181-.308842 1.474471-1.882939 1.474471v-2.460772zm-1.354919 5.589041c.079701-.179328 .079701-.458281 .079701-.547945v-5.031133c0-.099626 0-.368618-.079701-.547945h1.135741c-.129514 .159402-.129514 .358655-.129514 .508095v5.070984c0 .099626 0 .368618 .079701 .547945h-1.085928zm2.122042-2.779577c.069738-.009963 .109589-.019925 .18929-.019925c.14944 0 .368618-.019925 .518057-.039851c.14944 .239103 1.225405 2.012453 2.052304 2.839352h-.966376l-1.793275-2.779577z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page11%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g0-82%27/%3E%0A%3Cuse x=%279.962593%27 y=%270%27 xlink:href=%27%23g2-33%27/%3E%0A%3Cuse x=%2722.692594%27 y=%270%27 xlink:href=%27%23g0-82%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( \mathbb{R} \to \mathbb{R} \)" style="height: 0.7735em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" />, the identity function <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2739.369941pt%27 height=%2710.962644pt%27 viewBox=%27-.500002 -7.971982 39.369941 10.962644%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g6-40%27 d=%27m3.297634 2.391034c0-.029888 0-.049813-.169365-.219178c-1.24533-1.255293-1.564134-3.138232-1.564134-4.662516c0-1.733499 .37858-3.466999 1.603985-4.712329c.129514-.119552 .129514-.139477 .129514-.169365c0-.069738-.039851-.099626-.099626-.099626c-.099626 0-.996264 .67746-1.58406 1.942715c-.508095 1.09589-.627646 2.201743-.627646 3.038605c0 .777086 .109589 1.982565 .657534 3.108344c.597758 1.225405 1.454545 1.872976 1.554172 1.872976c.059776 0 .099626-.029888 .099626-.099626z%27/%3E%0A%3Cpath id=%27g6-41%27 d=%27m2.879203-2.49066c0-.777086-.109589-1.982565-.657534-3.108344c-.597758-1.225405-1.454545-1.872976-1.554172-1.872976c-.059776 0-.099626 .039851-.099626 .099626c0 .029888 0 .049813 .18929 .229141c.976339 .986301 1.544209 2.570361 1.544209 4.652553c0 1.703611-.368618 3.457036-1.603985 4.712329c-.129514 .119552-.129514 .139477-.129514 .169365c0 .059776 .039851 .099626 .099626 .099626c.099626 0 .996264-.67746 1.58406-1.942715c.508095-1.09589 .627646-2.201743 .627646-3.038605z%27/%3E%0A%3Cpath id=%27g6-61%27 d=%27m6.844334-3.257783c.14944 0 .33873 0 .33873-.199253s-.18929-.199253-.328767-.199253h-5.967621c-.139477 0-.328767 0-.328767 .199253s.18929 .199253 .33873 .199253h5.947696zm.009963 1.932752c.139477 0 .328767 0 .328767-.199253s-.18929-.199253-.33873-.199253h-5.947696c-.14944 0-.33873 0-.33873 .199253s.18929 .199253 .328767 .199253h5.967621z%27/%3E%0A%3Cpath id=%27g4-102%27 d=%27m3.656289-3.985056h.856787c.199253 0 .298879 0 .298879-.199253c0-.109589-.099626-.109589-.268991-.109589h-.826899l.209215-1.135741c.039851-.209215 .179328-.916563 .239103-1.036115c.089664-.18929 .259029-.33873 .468244-.33873c.039851 0 .298879 0 .488169 .179328c-.438356 .039851-.537983 .388543-.537983 .537983c0 .229141 .179328 .348692 .368618 .348692c.259029 0 .547945-.219178 .547945-.597758c0-.458281-.458281-.687422-.86675-.687422c-.33873 0-.966376 .179328-1.265255 1.165629c-.059776 .209215-.089664 .308842-.328767 1.564134h-.687422c-.18929 0-.298879 0-.298879 .18929c0 .119552 .089664 .119552 .278954 .119552h.657534l-.747198 3.935243c-.179328 .966376-.348692 1.872976-.86675 1.872976c-.039851 0-.288917 0-.478207-.179328c.458281-.029888 .547945-.388543 .547945-.537983c0-.229141-.179328-.348692-.368618-.348692c-.259029 0-.547945 .219178-.547945 .597758c0 .448319 .438356 .687422 .846824 .687422c.547945 0 .946451-.587796 1.125778-.966376c.318804-.627646 .547945-1.833126 .557908-1.902864l.597758-3.158157z%27/%3E%0A%3Cpath id=%27g4-120%27 d=%27m3.327522-3.008717c.059776-.259029 .288917-1.175592 .986301-1.175592c.049813 0 .288917 0 .498132 .129514c-.278954 .049813-.478207 .298879-.478207 .537983c0 .159402 .109589 .348692 .37858 .348692c.219178 0 .537983-.179328 .537983-.577833c0-.518057-.587796-.657534-.926526-.657534c-.577833 0-.926526 .52802-1.046077 .757161c-.249066-.657534-.787049-.757161-1.075965-.757161c-1.036115 0-1.603985 1.285181-1.603985 1.534247c0 .099626 .099626 .099626 .119552 .099626c.079701 0 .109589-.019925 .129514-.109589c.33873-1.05604 .996264-1.305106 1.334994-1.305106c.18929 0 .537983 .089664 .537983 .667497c0 .308842-.169365 .976339-.537983 2.371108c-.159402 .617684-.508095 1.036115-.946451 1.036115c-.059776 0-.288917 0-.498132-.129514c.249066-.049813 .468244-.259029 .468244-.537983c0-.268991-.219178-.348692-.368618-.348692c-.298879 0-.547945 .259029-.547945 .577833c0 .458281 .498132 .657534 .936488 .657534c.657534 0 1.016189-.697385 1.046077-.757161c.119552 .368618 .478207 .757161 1.075965 .757161c1.026152 0 1.594022-1.285181 1.594022-1.534247c0-.099626-.089664-.099626-.119552-.099626c-.089664 0-.109589 .039851-.129514 .109589c-.328767 1.066002-1.006227 1.305106-1.325031 1.305106c-.388543 0-.547945-.318804-.547945-.657534c0-.219178 .059776-.438356 .169365-.876712l.33873-1.364882z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page12%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-102%27/%3E%0A%3Cuse x=%275.949947%27 y=%270%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%279.824321%27 y=%270%27 xlink:href=%27%23g4-120%27/%3E%0A%3Cuse x=%2715.518253%27 y=%270%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%2722.159959%27 y=%270%27 xlink:href=%27%23g6-61%27/%3E%0A%3Cuse x=%2732.676039%27 y=%270%27 xlink:href=%27%23g4-120%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( f(x) = x \)" style="height: 1.0784em; vertical-align: -0.2942em; display: inline-block" class="org-latex org-latex-inline" />,
composition.</li>
</ol>

<p>
The free monoid on an alphabet set <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%278.471999pt%27 height=%277.807787pt%27 viewBox=%27-.500002 -7.307786 8.471999 7.807787%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-65%27 d=%27m1.783313-1.145704c-.398506 .667497-.787049 .806974-1.225405 .836862c-.119552 .009963-.209215 .009963-.209215 .199253c0 .059776 .049813 .109589 .129514 .109589c.268991 0 .577833-.029888 .856787-.029888c.328767 0 .67746 .029888 .996264 .029888c.059776 0 .18929 0 .18929-.18929c0-.109589-.089664-.119552-.159402-.119552c-.229141-.019925-.468244-.099626-.468244-.348692c0-.119552 .059776-.229141 .139477-.368618l.757161-1.275218h2.500623c.019925 .209215 .159402 1.564134 .159402 1.663761c0 .298879-.518057 .328767-.71731 .328767c-.139477 0-.239103 0-.239103 .199253c0 .109589 .119552 .109589 .139477 .109589c.408468 0 .836862-.029888 1.24533-.029888c.249066 0 .876712 .029888 1.125778 .029888c.059776 0 .179328 0 .179328-.199253c0-.109589-.099626-.109589-.229141-.109589c-.617684 0-.617684-.069738-.647572-.358655l-.607721-6.22665c-.019925-.199253-.019925-.239103-.18929-.239103c-.159402 0-.199253 .069738-.259029 .169365l-3.466999 5.818182zm1.195517-1.464508l1.96264-3.287671l.318804 3.287671h-2.281445z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page28%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-65%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( A \)" style="height: 0.7680em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" /> is the "monoid with the least
equalities" that we can construct from that set. We do this by starting with our
alphabet <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%278.471999pt%27 height=%277.807787pt%27 viewBox=%27-.500002 -7.307786 8.471999 7.807787%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-65%27 d=%27m1.783313-1.145704c-.398506 .667497-.787049 .806974-1.225405 .836862c-.119552 .009963-.209215 .009963-.209215 .199253c0 .059776 .049813 .109589 .129514 .109589c.268991 0 .577833-.029888 .856787-.029888c.328767 0 .67746 .029888 .996264 .029888c.059776 0 .18929 0 .18929-.18929c0-.109589-.089664-.119552-.159402-.119552c-.229141-.019925-.468244-.099626-.468244-.348692c0-.119552 .059776-.229141 .139477-.368618l.757161-1.275218h2.500623c.019925 .209215 .159402 1.564134 .159402 1.663761c0 .298879-.518057 .328767-.71731 .328767c-.139477 0-.239103 0-.239103 .199253c0 .109589 .119552 .109589 .139477 .109589c.408468 0 .836862-.029888 1.24533-.029888c.249066 0 .876712 .029888 1.125778 .029888c.059776 0 .179328 0 .179328-.199253c0-.109589-.099626-.109589-.229141-.109589c-.617684 0-.617684-.069738-.647572-.358655l-.607721-6.22665c-.019925-.199253-.019925-.239103-.18929-.239103c-.159402 0-.199253 .069738-.259029 .169365l-3.466999 5.818182zm1.195517-1.464508l1.96264-3.287671l.318804 3.287671h-2.281445z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page28%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-65%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( A \)" style="height: 0.7680em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" /> and enforcing equalities (by adding elements and quotienting
them) until the monoid axioms are respected.
</p>

<ol class="org-ol">
<li>Let the set be <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%278.471999pt%27 height=%277.807787pt%27 viewBox=%27-.500002 -7.307786 8.471999 7.807787%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-65%27 d=%27m1.783313-1.145704c-.398506 .667497-.787049 .806974-1.225405 .836862c-.119552 .009963-.209215 .009963-.209215 .199253c0 .059776 .049813 .109589 .129514 .109589c.268991 0 .577833-.029888 .856787-.029888c.328767 0 .67746 .029888 .996264 .029888c.059776 0 .18929 0 .18929-.18929c0-.109589-.089664-.119552-.159402-.119552c-.229141-.019925-.468244-.099626-.468244-.348692c0-.119552 .059776-.229141 .139477-.368618l.757161-1.275218h2.500623c.019925 .209215 .159402 1.564134 .159402 1.663761c0 .298879-.518057 .328767-.71731 .328767c-.139477 0-.239103 0-.239103 .199253c0 .109589 .119552 .109589 .139477 .109589c.408468 0 .836862-.029888 1.24533-.029888c.249066 0 .876712 .029888 1.125778 .029888c.059776 0 .179328 0 .179328-.199253c0-.109589-.099626-.109589-.229141-.109589c-.617684 0-.617684-.069738-.647572-.358655l-.607721-6.22665c-.019925-.199253-.019925-.239103-.18929-.239103c-.159402 0-.199253 .069738-.259029 .169365l-3.466999 5.818182zm1.195517-1.464508l1.96264-3.287671l.318804 3.287671h-2.281445z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page28%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-65%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( A \)" style="height: 0.7680em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" />.</li>
<li>Add to <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%278.471999pt%27 height=%277.807787pt%27 viewBox=%27-.500002 -7.307786 8.471999 7.807787%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-65%27 d=%27m1.783313-1.145704c-.398506 .667497-.787049 .806974-1.225405 .836862c-.119552 .009963-.209215 .009963-.209215 .199253c0 .059776 .049813 .109589 .129514 .109589c.268991 0 .577833-.029888 .856787-.029888c.328767 0 .67746 .029888 .996264 .029888c.059776 0 .18929 0 .18929-.18929c0-.109589-.089664-.119552-.159402-.119552c-.229141-.019925-.468244-.099626-.468244-.348692c0-.119552 .059776-.229141 .139477-.368618l.757161-1.275218h2.500623c.019925 .209215 .159402 1.564134 .159402 1.663761c0 .298879-.518057 .328767-.71731 .328767c-.139477 0-.239103 0-.239103 .199253c0 .109589 .119552 .109589 .139477 .109589c.408468 0 .836862-.029888 1.24533-.029888c.249066 0 .876712 .029888 1.125778 .029888c.059776 0 .179328 0 .179328-.199253c0-.109589-.099626-.109589-.229141-.109589c-.617684 0-.617684-.069738-.647572-.358655l-.607721-6.22665c-.019925-.199253-.019925-.239103-.18929-.239103c-.159402 0-.199253 .069738-.259029 .169365l-3.466999 5.818182zm1.195517-1.464508l1.96264-3.287671l.318804 3.287671h-2.281445z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page28%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-65%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( A \)" style="height: 0.7680em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" /> a fresh element <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%275.638873pt%27 height=%275.28946pt%27 viewBox=%27-.500002 -4.789458 5.638873 5.28946%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-101%27 d=%27m1.863014-2.30137c.288917 0 1.026152-.019925 1.524284-.229141c.697385-.298879 .747198-.886675 .747198-1.026152c0-.438356-.37858-.846824-1.066002-.846824c-1.105853 0-2.610212 .966376-2.610212 2.709838c0 1.016189 .587796 1.803238 1.564134 1.803238c1.424658 0 2.261519-1.05604 2.261519-1.175592c0-.059776-.059776-.129514-.119552-.129514c-.049813 0-.069738 .019925-.129514 .099626c-.787049 .986301-1.872976 .986301-1.992528 .986301c-.777086 0-.86675-.836862-.86675-1.155666c0-.119552 .009963-.428394 .159402-1.036115h.52802zm-.468244-.219178c.388543-1.514321 1.414695-1.663761 1.673724-1.663761c.468244 0 .737235 .288917 .737235 .627646c0 1.036115-1.594022 1.036115-2.002491 1.036115h-.408468z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page24%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-101%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( e \)" style="height: 0.5203em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" /> that is different from all element we
have until now. This will be our unit element.</li>
<li>For each pair <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2736.01211pt%27 height=%279.744966pt%27 viewBox=%27-.500002 -7.307786 36.01211 9.744966%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g2-50%27 d=%27m5.459527-2.291407c.169365 0 .348692 0 .348692-.199253s-.179328-.199253-.348692-.199253h-4.224159c.119552-1.334994 1.265255-2.291407 2.669988-2.291407h1.554172c.169365 0 .348692 0 .348692-.199253s-.179328-.199253-.348692-.199253h-1.574097c-1.703611 0-3.058531 1.295143-3.058531 2.889166s1.354919 2.889166 3.058531 2.889166h1.574097c.169365 0 .348692 0 .348692-.199253s-.179328-.199253-.348692-.199253h-1.554172c-1.404732 0-2.550436-.956413-2.669988-2.291407h4.224159z%27/%3E%0A%3Cpath id=%27g4-59%27 d=%27m2.022416-.009963c0-.657534-.249066-1.046077-.637609-1.046077c-.328767 0-.52802 .249066-.52802 .52802c0 .268991 .199253 .52802 .52802 .52802c.119552 0 .249066-.039851 .348692-.129514c.029888-.019925 .039851-.029888 .049813-.029888s.019925 .009963 .019925 .14944c0 .737235-.348692 1.334994-.67746 1.663761c-.109589 .109589-.109589 .129514-.109589 .159402c0 .069738 .049813 .109589 .099626 .109589c.109589 0 .9066-.767123 .9066-1.932752z%27/%3E%0A%3Cpath id=%27g4-65%27 d=%27m1.783313-1.145704c-.398506 .667497-.787049 .806974-1.225405 .836862c-.119552 .009963-.209215 .009963-.209215 .199253c0 .059776 .049813 .109589 .129514 .109589c.268991 0 .577833-.029888 .856787-.029888c.328767 0 .67746 .029888 .996264 .029888c.059776 0 .18929 0 .18929-.18929c0-.109589-.089664-.119552-.159402-.119552c-.229141-.019925-.468244-.099626-.468244-.348692c0-.119552 .059776-.229141 .139477-.368618l.757161-1.275218h2.500623c.019925 .209215 .159402 1.564134 .159402 1.663761c0 .298879-.518057 .328767-.71731 .328767c-.139477 0-.239103 0-.239103 .199253c0 .109589 .119552 .109589 .139477 .109589c.408468 0 .836862-.029888 1.24533-.029888c.249066 0 .876712 .029888 1.125778 .029888c.059776 0 .179328 0 .179328-.199253c0-.109589-.099626-.109589-.229141-.109589c-.617684 0-.617684-.069738-.647572-.358655l-.607721-6.22665c-.019925-.199253-.019925-.239103-.18929-.239103c-.159402 0-.199253 .069738-.259029 .169365l-3.466999 5.818182zm1.195517-1.464508l1.96264-3.287671l.318804 3.287671h-2.281445z%27/%3E%0A%3Cpath id=%27g4-120%27 d=%27m3.327522-3.008717c.059776-.259029 .288917-1.175592 .986301-1.175592c.049813 0 .288917 0 .498132 .129514c-.278954 .049813-.478207 .298879-.478207 .537983c0 .159402 .109589 .348692 .37858 .348692c.219178 0 .537983-.179328 .537983-.577833c0-.518057-.587796-.657534-.926526-.657534c-.577833 0-.926526 .52802-1.046077 .757161c-.249066-.657534-.787049-.757161-1.075965-.757161c-1.036115 0-1.603985 1.285181-1.603985 1.534247c0 .099626 .099626 .099626 .119552 .099626c.079701 0 .109589-.019925 .129514-.109589c.33873-1.05604 .996264-1.305106 1.334994-1.305106c.18929 0 .537983 .089664 .537983 .667497c0 .308842-.169365 .976339-.537983 2.371108c-.159402 .617684-.508095 1.036115-.946451 1.036115c-.059776 0-.288917 0-.498132-.129514c.249066-.049813 .468244-.259029 .468244-.537983c0-.268991-.219178-.348692-.368618-.348692c-.298879 0-.547945 .259029-.547945 .577833c0 .458281 .498132 .657534 .936488 .657534c.657534 0 1.016189-.697385 1.046077-.757161c.119552 .368618 .478207 .757161 1.075965 .757161c1.026152 0 1.594022-1.285181 1.594022-1.534247c0-.099626-.089664-.099626-.119552-.099626c-.089664 0-.109589 .039851-.129514 .109589c-.328767 1.066002-1.006227 1.305106-1.325031 1.305106c-.388543 0-.547945-.318804-.547945-.657534c0-.219178 .059776-.438356 .169365-.876712l.33873-1.364882z%27/%3E%0A%3Cpath id=%27g4-121%27 d=%27m4.841843-3.795766c.039851-.139477 .039851-.159402 .039851-.229141c0-.179328-.139477-.268991-.288917-.268991c-.099626 0-.259029 .059776-.348692 .209215c-.019925 .049813-.099626 .358655-.139477 .537983c-.069738 .259029-.139477 .52802-.199253 .797011l-.448319 1.793275c-.039851 .14944-.468244 .846824-1.125778 .846824c-.508095 0-.617684-.438356-.617684-.806974c0-.458281 .169365-1.075965 .508095-1.952677c.159402-.408468 .199253-.518057 .199253-.71731c0-.448319-.318804-.816936-.816936-.816936c-.946451 0-1.315068 1.444583-1.315068 1.534247c0 .099626 .099626 .099626 .119552 .099626c.099626 0 .109589-.019925 .159402-.179328c.268991-.936488 .667497-1.235367 1.006227-1.235367c.079701 0 .249066 0 .249066 .318804c0 .249066-.099626 .508095-.169365 .697385c-.398506 1.05604-.577833 1.62391-.577833 2.092154c0 .886675 .627646 1.185554 1.215442 1.185554c.388543 0 .727273-.169365 1.006227-.448319c-.129514 .518057-.249066 1.006227-.647572 1.534247c-.259029 .33873-.637609 .627646-1.09589 .627646c-.139477 0-.587796-.029888-.757161-.418431c.159402 0 .288917 0 .428394-.119552c.099626-.089664 .199253-.219178 .199253-.408468c0-.308842-.268991-.348692-.368618-.348692c-.229141 0-.557908 .159402-.557908 .647572c0 .498132 .438356 .86675 1.05604 .86675c1.026152 0 2.052304-.9066 2.331258-2.032379l.956413-3.805729z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page18%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-120%27/%3E%0A%3Cuse x=%275.693932%27 y=%270%27 xlink:href=%27%23g4-59%27/%3E%0A%3Cuse x=%2710.12174%27 y=%270%27 xlink:href=%27%23g4-121%27/%3E%0A%3Cuse x=%2718.131016%27 y=%270%27 xlink:href=%27%23g2-50%27/%3E%0A%3Cuse x=%2727.54013%27 y=%270%27 xlink:href=%27%23g4-65%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( x, y \in A \)" style="height: 0.9586em; vertical-align: -0.2397em; display: inline-block" class="org-latex org-latex-inline" />, add a fresh element <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2710.541767pt%27 height=%277.918502pt%27 viewBox=%27-.500002 -7.4185 10.541767 7.918502%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-97%27 d=%27m3.716065-3.765878c-.179328-.368618-.468244-.637609-.916563-.637609c-1.165629 0-2.400996 1.464508-2.400996 2.919054c0 .936488 .547945 1.594022 1.325031 1.594022c.199253 0 .697385-.039851 1.295143-.747198c.079701 .418431 .428394 .747198 .9066 .747198c.348692 0 .577833-.229141 .737235-.547945c.169365-.358655 .298879-.966376 .298879-.986301c0-.099626-.089664-.099626-.119552-.099626c-.099626 0-.109589 .039851-.139477 .179328c-.169365 .647572-.348692 1.235367-.757161 1.235367c-.268991 0-.298879-.259029-.298879-.458281c0-.219178 .019925-.298879 .129514-.737235c.109589-.418431 .129514-.518057 .219178-.896638l.358655-1.39477c.069738-.278954 .069738-.298879 .069738-.33873c0-.169365-.119552-.268991-.288917-.268991c-.239103 0-.388543 .219178-.418431 .438356zm-.647572 2.580324c-.049813 .179328-.049813 .199253-.199253 .368618c-.438356 .547945-.846824 .707347-1.125778 .707347c-.498132 0-.637609-.547945-.637609-.936488c0-.498132 .318804-1.723537 .547945-2.181818c.308842-.587796 .757161-.956413 1.155666-.956413c.647572 0 .787049 .816936 .787049 .876712s-.019925 .119552-.029888 .169365l-.498132 1.952677z%27/%3E%0A%3Cpath id=%27g4-98%27 d=%27m2.381071-6.804483c0-.009963 0-.109589-.129514-.109589c-.229141 0-.956413 .079701-1.215442 .099626c-.079701 .009963-.18929 .019925-.18929 .199253c0 .119552 .089664 .119552 .239103 .119552c.478207 0 .498132 .069738 .498132 .169365c0 .069738-.089664 .408468-.139477 .617684l-.816936 3.247821c-.119552 .498132-.159402 .657534-.159402 1.006227c0 .946451 .52802 1.564134 1.265255 1.564134c1.175592 0 2.400996-1.484433 2.400996-2.919054c0-.9066-.52802-1.594022-1.325031-1.594022c-.458281 0-.86675 .288917-1.165629 .597758l.737235-2.998755zm-.936488 3.765878c.059776-.219178 .059776-.239103 .14944-.348692c.488169-.647572 .936488-.797011 1.195517-.797011c.358655 0 .627646 .298879 .627646 .936488c0 .587796-.328767 1.733499-.508095 2.11208c-.328767 .667497-.787049 1.026152-1.175592 1.026152c-.33873 0-.667497-.268991-.667497-1.006227c0-.18929 0-.37858 .159402-1.006227l.219178-.916563z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page19%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-97%27/%3E%0A%3Cuse x=%275.266154%27 y=%270%27 xlink:href=%27%23g4-98%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( ab \)" style="height: 0.7789em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" />. This new element
will let us interpret the multiplication.</li>
<li>For each element <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%276.693922pt%27 height=%275.28946pt%27 viewBox=%27-.500002 -4.789458 6.693922 5.28946%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-120%27 d=%27m3.327522-3.008717c.059776-.259029 .288917-1.175592 .986301-1.175592c.049813 0 .288917 0 .498132 .129514c-.278954 .049813-.478207 .298879-.478207 .537983c0 .159402 .109589 .348692 .37858 .348692c.219178 0 .537983-.179328 .537983-.577833c0-.518057-.587796-.657534-.926526-.657534c-.577833 0-.926526 .52802-1.046077 .757161c-.249066-.657534-.787049-.757161-1.075965-.757161c-1.036115 0-1.603985 1.285181-1.603985 1.534247c0 .099626 .099626 .099626 .119552 .099626c.079701 0 .109589-.019925 .129514-.109589c.33873-1.05604 .996264-1.305106 1.334994-1.305106c.18929 0 .537983 .089664 .537983 .667497c0 .308842-.169365 .976339-.537983 2.371108c-.159402 .617684-.508095 1.036115-.946451 1.036115c-.059776 0-.288917 0-.498132-.129514c.249066-.049813 .468244-.259029 .468244-.537983c0-.268991-.219178-.348692-.368618-.348692c-.298879 0-.547945 .259029-.547945 .577833c0 .458281 .498132 .657534 .936488 .657534c.657534 0 1.016189-.697385 1.046077-.757161c.119552 .368618 .478207 .757161 1.075965 .757161c1.026152 0 1.594022-1.285181 1.594022-1.534247c0-.099626-.089664-.099626-.119552-.099626c-.089664 0-.109589 .039851-.129514 .109589c-.328767 1.066002-1.006227 1.305106-1.325031 1.305106c-.388543 0-.547945-.318804-.547945-.657534c0-.219178 .059776-.438356 .169365-.876712l.33873-1.364882z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page45%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-120%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( x \)" style="height: 0.5203em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" />, quotient the set until <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2753.926316pt%27 height=%275.28946pt%27 viewBox=%27-.500002 -4.789458 53.926316 5.28946%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g6-61%27 d=%27m6.844334-3.257783c.14944 0 .33873 0 .33873-.199253s-.18929-.199253-.328767-.199253h-5.967621c-.139477 0-.328767 0-.328767 .199253s.18929 .199253 .33873 .199253h5.947696zm.009963 1.932752c.139477 0 .328767 0 .328767-.199253s-.18929-.199253-.33873-.199253h-5.947696c-.14944 0-.33873 0-.33873 .199253s.18929 .199253 .328767 .199253h5.967621z%27/%3E%0A%3Cpath id=%27g4-101%27 d=%27m1.863014-2.30137c.288917 0 1.026152-.019925 1.524284-.229141c.697385-.298879 .747198-.886675 .747198-1.026152c0-.438356-.37858-.846824-1.066002-.846824c-1.105853 0-2.610212 .966376-2.610212 2.709838c0 1.016189 .587796 1.803238 1.564134 1.803238c1.424658 0 2.261519-1.05604 2.261519-1.175592c0-.059776-.059776-.129514-.119552-.129514c-.049813 0-.069738 .019925-.129514 .099626c-.787049 .986301-1.872976 .986301-1.992528 .986301c-.777086 0-.86675-.836862-.86675-1.155666c0-.119552 .009963-.428394 .159402-1.036115h.52802zm-.468244-.219178c.388543-1.514321 1.414695-1.663761 1.673724-1.663761c.468244 0 .737235 .288917 .737235 .627646c0 1.036115-1.594022 1.036115-2.002491 1.036115h-.408468z%27/%3E%0A%3Cpath id=%27g4-120%27 d=%27m3.327522-3.008717c.059776-.259029 .288917-1.175592 .986301-1.175592c.049813 0 .288917 0 .498132 .129514c-.278954 .049813-.478207 .298879-.478207 .537983c0 .159402 .109589 .348692 .37858 .348692c.219178 0 .537983-.179328 .537983-.577833c0-.518057-.587796-.657534-.926526-.657534c-.577833 0-.926526 .52802-1.046077 .757161c-.249066-.657534-.787049-.757161-1.075965-.757161c-1.036115 0-1.603985 1.285181-1.603985 1.534247c0 .099626 .099626 .099626 .119552 .099626c.079701 0 .109589-.019925 .129514-.109589c.33873-1.05604 .996264-1.305106 1.334994-1.305106c.18929 0 .537983 .089664 .537983 .667497c0 .308842-.169365 .976339-.537983 2.371108c-.159402 .617684-.508095 1.036115-.946451 1.036115c-.059776 0-.288917 0-.498132-.129514c.249066-.049813 .468244-.259029 .468244-.537983c0-.268991-.219178-.348692-.368618-.348692c-.298879 0-.547945 .259029-.547945 .577833c0 .458281 .498132 .657534 .936488 .657534c.657534 0 1.016189-.697385 1.046077-.757161c.119552 .368618 .478207 .757161 1.075965 .757161c1.026152 0 1.594022-1.285181 1.594022-1.534247c0-.099626-.089664-.099626-.119552-.099626c-.089664 0-.109589 .039851-.129514 .109589c-.328767 1.066002-1.006227 1.305106-1.325031 1.305106c-.388543 0-.547945-.318804-.547945-.657534c0-.219178 .059776-.438356 .169365-.876712l.33873-1.364882z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page21%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-101%27/%3E%0A%3Cuse x=%274.638871%27 y=%270%27 xlink:href=%27%23g4-120%27/%3E%0A%3Cuse x=%2713.100136%27 y=%270%27 xlink:href=%27%23g6-61%27/%3E%0A%3Cuse x=%2723.616216%27 y=%270%27 xlink:href=%27%23g4-120%27/%3E%0A%3Cuse x=%2732.077481%27 y=%270%27 xlink:href=%27%23g6-61%27/%3E%0A%3Cuse x=%2742.593561%27 y=%270%27 xlink:href=%27%23g4-120%27/%3E%0A%3Cuse x=%2748.287493%27 y=%270%27 xlink:href=%27%23g4-101%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( ex = x = xe \)" style="height: 0.5203em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" /></li>
<li>For each elements <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2725.862762pt%27 height=%277.226639pt%27 viewBox=%27-.500002 -4.789458 25.862762 7.226639%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-59%27 d=%27m2.022416-.009963c0-.657534-.249066-1.046077-.637609-1.046077c-.328767 0-.52802 .249066-.52802 .52802c0 .268991 .199253 .52802 .52802 .52802c.119552 0 .249066-.039851 .348692-.129514c.029888-.019925 .039851-.029888 .049813-.029888s.019925 .009963 .019925 .14944c0 .737235-.348692 1.334994-.67746 1.663761c-.109589 .109589-.109589 .129514-.109589 .159402c0 .069738 .049813 .109589 .099626 .109589c.109589 0 .9066-.767123 .9066-1.932752z%27/%3E%0A%3Cpath id=%27g4-120%27 d=%27m3.327522-3.008717c.059776-.259029 .288917-1.175592 .986301-1.175592c.049813 0 .288917 0 .498132 .129514c-.278954 .049813-.478207 .298879-.478207 .537983c0 .159402 .109589 .348692 .37858 .348692c.219178 0 .537983-.179328 .537983-.577833c0-.518057-.587796-.657534-.926526-.657534c-.577833 0-.926526 .52802-1.046077 .757161c-.249066-.657534-.787049-.757161-1.075965-.757161c-1.036115 0-1.603985 1.285181-1.603985 1.534247c0 .099626 .099626 .099626 .119552 .099626c.079701 0 .109589-.019925 .129514-.109589c.33873-1.05604 .996264-1.305106 1.334994-1.305106c.18929 0 .537983 .089664 .537983 .667497c0 .308842-.169365 .976339-.537983 2.371108c-.159402 .617684-.508095 1.036115-.946451 1.036115c-.059776 0-.288917 0-.498132-.129514c.249066-.049813 .468244-.259029 .468244-.537983c0-.268991-.219178-.348692-.368618-.348692c-.298879 0-.547945 .259029-.547945 .577833c0 .458281 .498132 .657534 .936488 .657534c.657534 0 1.016189-.697385 1.046077-.757161c.119552 .368618 .478207 .757161 1.075965 .757161c1.026152 0 1.594022-1.285181 1.594022-1.534247c0-.099626-.089664-.099626-.119552-.099626c-.089664 0-.109589 .039851-.129514 .109589c-.328767 1.066002-1.006227 1.305106-1.325031 1.305106c-.388543 0-.547945-.318804-.547945-.657534c0-.219178 .059776-.438356 .169365-.876712l.33873-1.364882z%27/%3E%0A%3Cpath id=%27g4-121%27 d=%27m4.841843-3.795766c.039851-.139477 .039851-.159402 .039851-.229141c0-.179328-.139477-.268991-.288917-.268991c-.099626 0-.259029 .059776-.348692 .209215c-.019925 .049813-.099626 .358655-.139477 .537983c-.069738 .259029-.139477 .52802-.199253 .797011l-.448319 1.793275c-.039851 .14944-.468244 .846824-1.125778 .846824c-.508095 0-.617684-.438356-.617684-.806974c0-.458281 .169365-1.075965 .508095-1.952677c.159402-.408468 .199253-.518057 .199253-.71731c0-.448319-.318804-.816936-.816936-.816936c-.946451 0-1.315068 1.444583-1.315068 1.534247c0 .099626 .099626 .099626 .119552 .099626c.099626 0 .109589-.019925 .159402-.179328c.268991-.936488 .667497-1.235367 1.006227-1.235367c.079701 0 .249066 0 .249066 .318804c0 .249066-.099626 .508095-.169365 .697385c-.398506 1.05604-.577833 1.62391-.577833 2.092154c0 .886675 .627646 1.185554 1.215442 1.185554c.388543 0 .727273-.169365 1.006227-.448319c-.129514 .518057-.249066 1.006227-.647572 1.534247c-.259029 .33873-.637609 .627646-1.09589 .627646c-.139477 0-.587796-.029888-.757161-.418431c.159402 0 .288917 0 .428394-.119552c.099626-.089664 .199253-.219178 .199253-.408468c0-.308842-.268991-.348692-.368618-.348692c-.229141 0-.557908 .159402-.557908 .647572c0 .498132 .438356 .86675 1.05604 .86675c1.026152 0 2.052304-.9066 2.331258-2.032379l.956413-3.805729z%27/%3E%0A%3Cpath id=%27g4-122%27 d=%27m1.325031-.826899c.537983-.577833 .826899-.826899 1.185554-1.135741c0-.009963 .617684-.537983 .976339-.896638c.946451-.926526 1.165629-1.404732 1.165629-1.444583c0-.099626-.089664-.099626-.109589-.099626c-.069738 0-.099626 .019925-.14944 .109589c-.298879 .478207-.508095 .637609-.747198 .637609s-.358655-.14944-.508095-.318804c-.18929-.229141-.358655-.428394-.687422-.428394c-.747198 0-1.205479 .926526-1.205479 1.135741c0 .049813 .029888 .109589 .119552 .109589s.109589-.049813 .129514-.109589c.18929-.458281 .767123-.468244 .846824-.468244c.209215 0 .398506 .069738 .627646 .14944c.398506 .14944 .508095 .14944 .767123 .14944c-.358655 .428394-1.195517 1.145704-1.384807 1.305106l-.896638 .836862c-.67746 .667497-1.026152 1.235367-1.026152 1.305106c0 .099626 .099626 .099626 .119552 .099626c.079701 0 .099626-.019925 .159402-.129514c.229141-.348692 .52802-.617684 .846824-.617684c.229141 0 .328767 .089664 .577833 .37858c.169365 .209215 .348692 .368618 .637609 .368618c.986301 0 1.564134-1.265255 1.564134-1.534247c0-.049813-.039851-.099626-.119552-.099626c-.089664 0-.109589 .059776-.139477 .129514c-.229141 .647572-.86675 .836862-1.195517 .836862c-.199253 0-.37858-.059776-.587796-.129514c-.33873-.129514-.488169-.169365-.697385-.169365c-.019925 0-.179328 0-.268991 .029888z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page22%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-120%27/%3E%0A%3Cuse x=%275.693932%27 y=%270%27 xlink:href=%27%23g4-59%27/%3E%0A%3Cuse x=%2710.12174%27 y=%270%27 xlink:href=%27%23g4-121%27/%3E%0A%3Cuse x=%2715.363683%27 y=%270%27 xlink:href=%27%23g4-59%27/%3E%0A%3Cuse x=%2719.791491%27 y=%270%27 xlink:href=%27%23g4-122%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( x, y, z \)" style="height: 0.7109em; vertical-align: -0.2397em; display: inline-block" class="org-latex org-latex-inline" />, quotient the set until <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2761.795185pt%27 height=%2710.962644pt%27 viewBox=%27-.500002 -7.971982 61.795185 10.962644%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-120%27 d=%27m3.327522-3.008717c.059776-.259029 .288917-1.175592 .986301-1.175592c.049813 0 .288917 0 .498132 .129514c-.278954 .049813-.478207 .298879-.478207 .537983c0 .159402 .109589 .348692 .37858 .348692c.219178 0 .537983-.179328 .537983-.577833c0-.518057-.587796-.657534-.926526-.657534c-.577833 0-.926526 .52802-1.046077 .757161c-.249066-.657534-.787049-.757161-1.075965-.757161c-1.036115 0-1.603985 1.285181-1.603985 1.534247c0 .099626 .099626 .099626 .119552 .099626c.079701 0 .109589-.019925 .129514-.109589c.33873-1.05604 .996264-1.305106 1.334994-1.305106c.18929 0 .537983 .089664 .537983 .667497c0 .308842-.169365 .976339-.537983 2.371108c-.159402 .617684-.508095 1.036115-.946451 1.036115c-.059776 0-.288917 0-.498132-.129514c.249066-.049813 .468244-.259029 .468244-.537983c0-.268991-.219178-.348692-.368618-.348692c-.298879 0-.547945 .259029-.547945 .577833c0 .458281 .498132 .657534 .936488 .657534c.657534 0 1.016189-.697385 1.046077-.757161c.119552 .368618 .478207 .757161 1.075965 .757161c1.026152 0 1.594022-1.285181 1.594022-1.534247c0-.099626-.089664-.099626-.119552-.099626c-.089664 0-.109589 .039851-.129514 .109589c-.328767 1.066002-1.006227 1.305106-1.325031 1.305106c-.388543 0-.547945-.318804-.547945-.657534c0-.219178 .059776-.438356 .169365-.876712l.33873-1.364882z%27/%3E%0A%3Cpath id=%27g4-121%27 d=%27m4.841843-3.795766c.039851-.139477 .039851-.159402 .039851-.229141c0-.179328-.139477-.268991-.288917-.268991c-.099626 0-.259029 .059776-.348692 .209215c-.019925 .049813-.099626 .358655-.139477 .537983c-.069738 .259029-.139477 .52802-.199253 .797011l-.448319 1.793275c-.039851 .14944-.468244 .846824-1.125778 .846824c-.508095 0-.617684-.438356-.617684-.806974c0-.458281 .169365-1.075965 .508095-1.952677c.159402-.408468 .199253-.518057 .199253-.71731c0-.448319-.318804-.816936-.816936-.816936c-.946451 0-1.315068 1.444583-1.315068 1.534247c0 .099626 .099626 .099626 .119552 .099626c.099626 0 .109589-.019925 .159402-.179328c.268991-.936488 .667497-1.235367 1.006227-1.235367c.079701 0 .249066 0 .249066 .318804c0 .249066-.099626 .508095-.169365 .697385c-.398506 1.05604-.577833 1.62391-.577833 2.092154c0 .886675 .627646 1.185554 1.215442 1.185554c.388543 0 .727273-.169365 1.006227-.448319c-.129514 .518057-.249066 1.006227-.647572 1.534247c-.259029 .33873-.637609 .627646-1.09589 .627646c-.139477 0-.587796-.029888-.757161-.418431c.159402 0 .288917 0 .428394-.119552c.099626-.089664 .199253-.219178 .199253-.408468c0-.308842-.268991-.348692-.368618-.348692c-.229141 0-.557908 .159402-.557908 .647572c0 .498132 .438356 .86675 1.05604 .86675c1.026152 0 2.052304-.9066 2.331258-2.032379l.956413-3.805729z%27/%3E%0A%3Cpath id=%27g4-122%27 d=%27m1.325031-.826899c.537983-.577833 .826899-.826899 1.185554-1.135741c0-.009963 .617684-.537983 .976339-.896638c.946451-.926526 1.165629-1.404732 1.165629-1.444583c0-.099626-.089664-.099626-.109589-.099626c-.069738 0-.099626 .019925-.14944 .109589c-.298879 .478207-.508095 .637609-.747198 .637609s-.358655-.14944-.508095-.318804c-.18929-.229141-.358655-.428394-.687422-.428394c-.747198 0-1.205479 .926526-1.205479 1.135741c0 .049813 .029888 .109589 .119552 .109589s.109589-.049813 .129514-.109589c.18929-.458281 .767123-.468244 .846824-.468244c.209215 0 .398506 .069738 .627646 .14944c.398506 .14944 .508095 .14944 .767123 .14944c-.358655 .428394-1.195517 1.145704-1.384807 1.305106l-.896638 .836862c-.67746 .667497-1.026152 1.235367-1.026152 1.305106c0 .099626 .099626 .099626 .119552 .099626c.079701 0 .099626-.019925 .159402-.129514c.229141-.348692 .52802-.617684 .846824-.617684c.229141 0 .328767 .089664 .577833 .37858c.169365 .209215 .348692 .368618 .637609 .368618c.986301 0 1.564134-1.265255 1.564134-1.534247c0-.049813-.039851-.099626-.119552-.099626c-.089664 0-.109589 .059776-.139477 .129514c-.229141 .647572-.86675 .836862-1.195517 .836862c-.199253 0-.37858-.059776-.587796-.129514c-.33873-.129514-.488169-.169365-.697385-.169365c-.019925 0-.179328 0-.268991 .029888z%27/%3E%0A%3Cpath id=%27g6-40%27 d=%27m3.297634 2.391034c0-.029888 0-.049813-.169365-.219178c-1.24533-1.255293-1.564134-3.138232-1.564134-4.662516c0-1.733499 .37858-3.466999 1.603985-4.712329c.129514-.119552 .129514-.139477 .129514-.169365c0-.069738-.039851-.099626-.099626-.099626c-.099626 0-.996264 .67746-1.58406 1.942715c-.508095 1.09589-.627646 2.201743-.627646 3.038605c0 .777086 .109589 1.982565 .657534 3.108344c.597758 1.225405 1.454545 1.872976 1.554172 1.872976c.059776 0 .099626-.029888 .099626-.099626z%27/%3E%0A%3Cpath id=%27g6-41%27 d=%27m2.879203-2.49066c0-.777086-.109589-1.982565-.657534-3.108344c-.597758-1.225405-1.454545-1.872976-1.554172-1.872976c-.059776 0-.099626 .039851-.099626 .099626c0 .029888 0 .049813 .18929 .229141c.976339 .986301 1.544209 2.570361 1.544209 4.652553c0 1.703611-.368618 3.457036-1.603985 4.712329c-.129514 .119552-.129514 .139477-.129514 .169365c0 .059776 .039851 .099626 .099626 .099626c.099626 0 .996264-.67746 1.58406-1.942715c.508095-1.09589 .627646-2.201743 .627646-3.038605z%27/%3E%0A%3Cpath id=%27g6-61%27 d=%27m6.844334-3.257783c.14944 0 .33873 0 .33873-.199253s-.18929-.199253-.328767-.199253h-5.967621c-.139477 0-.328767 0-.328767 .199253s.18929 .199253 .33873 .199253h5.947696zm.009963 1.932752c.139477 0 .328767 0 .328767-.199253s-.18929-.199253-.33873-.199253h-5.947696c-.14944 0-.33873 0-.33873 .199253s.18929 .199253 .328767 .199253h5.967621z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page23%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%273.874374%27 y=%270%27 xlink:href=%27%23g4-120%27/%3E%0A%3Cuse x=%279.568306%27 y=%270%27 xlink:href=%27%23g4-121%27/%3E%0A%3Cuse x=%2714.810249%27 y=%270%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%2718.684623%27 y=%270%27 xlink:href=%27%23g4-122%27/%3E%0A%3Cuse x=%2726.523239%27 y=%270%27 xlink:href=%27%23g6-61%27/%3E%0A%3Cuse x=%2737.039319%27 y=%270%27 xlink:href=%27%23g4-120%27/%3E%0A%3Cuse x=%2742.733252%27 y=%270%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%2746.607625%27 y=%270%27 xlink:href=%27%23g4-121%27/%3E%0A%3Cuse x=%2751.849569%27 y=%270%27 xlink:href=%27%23g4-122%27/%3E%0A%3Cuse x=%2756.920853%27 y=%270%27 xlink:href=%27%23g6-41%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( (xy)z = x(yz) \)" style="height: 1.0784em; vertical-align: -0.2942em; display: inline-block" class="org-latex org-latex-inline" />.</li>
</ol>

<p>
It turns out that what we end up with is precisely the list of elements of our
original alphabet set. The unit <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%275.638873pt%27 height=%275.28946pt%27 viewBox=%27-.500002 -4.789458 5.638873 5.28946%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-101%27 d=%27m1.863014-2.30137c.288917 0 1.026152-.019925 1.524284-.229141c.697385-.298879 .747198-.886675 .747198-1.026152c0-.438356-.37858-.846824-1.066002-.846824c-1.105853 0-2.610212 .966376-2.610212 2.709838c0 1.016189 .587796 1.803238 1.564134 1.803238c1.424658 0 2.261519-1.05604 2.261519-1.175592c0-.059776-.059776-.129514-.119552-.129514c-.049813 0-.069738 .019925-.129514 .099626c-.787049 .986301-1.872976 .986301-1.992528 .986301c-.777086 0-.86675-.836862-.86675-1.155666c0-.119552 .009963-.428394 .159402-1.036115h.52802zm-.468244-.219178c.388543-1.514321 1.414695-1.663761 1.673724-1.663761c.468244 0 .737235 .288917 .737235 .627646c0 1.036115-1.594022 1.036115-2.002491 1.036115h-.408468z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page24%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-101%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( e \)" style="height: 0.5203em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" /> is the empty list and multiplication is
concatenation of lists. In other words, the elements of the free monoid with
alphabet <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%278.471999pt%27 height=%277.807787pt%27 viewBox=%27-.500002 -7.307786 8.471999 7.807787%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-65%27 d=%27m1.783313-1.145704c-.398506 .667497-.787049 .806974-1.225405 .836862c-.119552 .009963-.209215 .009963-.209215 .199253c0 .059776 .049813 .109589 .129514 .109589c.268991 0 .577833-.029888 .856787-.029888c.328767 0 .67746 .029888 .996264 .029888c.059776 0 .18929 0 .18929-.18929c0-.109589-.089664-.119552-.159402-.119552c-.229141-.019925-.468244-.099626-.468244-.348692c0-.119552 .059776-.229141 .139477-.368618l.757161-1.275218h2.500623c.019925 .209215 .159402 1.564134 .159402 1.663761c0 .298879-.518057 .328767-.71731 .328767c-.139477 0-.239103 0-.239103 .199253c0 .109589 .119552 .109589 .139477 .109589c.408468 0 .836862-.029888 1.24533-.029888c.249066 0 .876712 .029888 1.125778 .029888c.059776 0 .179328 0 .179328-.199253c0-.109589-.099626-.109589-.229141-.109589c-.617684 0-.617684-.069738-.647572-.358655l-.607721-6.22665c-.019925-.199253-.019925-.239103-.18929-.239103c-.159402 0-.199253 .069738-.259029 .169365l-3.466999 5.818182zm1.195517-1.464508l1.96264-3.287671l.318804 3.287671h-2.281445z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page28%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-65%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( A \)" style="height: 0.7680em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" /> are:
</p>

<p>
<img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%27344.711087pt%27 height=%2714.89235pt%27 viewBox=%27-.500002 -14.392348 344.711087 14.89235%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g5-110%27 d=%27m.850809-.439352c-.027895 .09066-.069738 .265006-.069738 .285928c0 .153425 .125529 .223163 .237111 .223163c.125529 0 .237111-.09066 .27198-.153425s.09066-.285928 .125529-.432379c.034869-.132503 .111582-.4533 .153425-.627646c.041843-.153425 .083686-.306849 .118555-.467248c.076712-.285928 .09066-.341719 .292902-.627646c.195268-.278954 .523039-.641594 1.046077-.641594c.404483 0 .411457 .355666 .411457 .488169c0 .418431-.299875 1.192528-.411457 1.48543c-.076712 .195268-.104608 .258032-.104608 .376588c0 .369614 .306849 .599751 .662516 .599751c.697385 0 1.004234-.962391 1.004234-1.066999c0-.09066-.09066-.09066-.111582-.09066c-.097634 0-.104608 .041843-.132503 .118555c-.160399 .557908-.460274 .843836-.739228 .843836c-.146451 0-.174346-.097634-.174346-.244085c0-.160399 .034869-.251059 .160399-.564882c.083686-.216189 .369614-.955417 .369614-1.345953c0-.676463-.536986-.795019-.9066-.795019c-.578829 0-.969365 .355666-1.17858 .63462c-.048817-.481196-.460274-.63462-.746202-.63462c-.299875 0-.460274 .216189-.550934 .376588c-.153425 .258032-.251059 .655542-.251059 .690411c0 .09066 .097634 .09066 .118555 .09066c.097634 0 .104608-.020922 .153425-.209215c.104608-.411457 .237111-.753176 .509091-.753176c.18132 0 .230137 .153425 .230137 .341719c0 .132503-.062765 .390535-.111582 .578829s-.118555 .474222-.153425 .627646l-.223163 .892653z%27/%3E%0A%3Cpath id=%27g0-78%27 d=%27m1.115816-5.927771v4.861768c0 .52802-.079701 .707347-.587796 .71731c-.109589 0-.278954 .009963-.278954 .169365c0 .179328 .159402 .179328 .33873 .179328h1.544209c.179328 0 .328767 0 .328767-.179328c0-.159402-.159402-.169365-.298879-.169365c-.547945-.009963-.627646-.219178-.627646-.737235v-4.562889l4.303861 5.688667c.089664 .119552 .139477 .14944 .209215 .14944c.169365 0 .169365-.159402 .169365-.328767v-5.628892c0-.557908 .089664-.697385 .547945-.707347c.059776 0 .229141-.009963 .229141-.169365c0-.179328-.14944-.179328-.328767-.179328h-1.454545c-.179328 0-.33873 0-.33873 .179328c0 .169365 .179328 .169365 .288917 .169365c.557908 .009963 .637609 .209215 .637609 .737235v3.118306l-3.008717-4.064757c-.099626-.139477-.129514-.139477-.358655-.139477h-1.733499c-.179328 0-.328767 0-.328767 .179328c0 .14944 .14944 .169365 .209215 .169365c.268991 .029888 .458281 .18929 .557908 .308842c-.019925 .079701-.019925 .099626-.019925 .239103zm4.752179 5.419676l-4.333748-5.728518c-.099626-.119552-.099626-.139477-.209215-.239103h1.185554l3.35741 4.533001v1.43462z%27/%3E%0A%3Cpath id=%27g4-59%27 d=%27m2.022416-.009963c0-.657534-.249066-1.046077-.637609-1.046077c-.328767 0-.52802 .249066-.52802 .52802c0 .268991 .199253 .52802 .52802 .52802c.119552 0 .249066-.039851 .348692-.129514c.029888-.019925 .039851-.029888 .049813-.029888s.019925 .009963 .019925 .14944c0 .737235-.348692 1.334994-.67746 1.663761c-.109589 .109589-.109589 .129514-.109589 .159402c0 .069738 .049813 .109589 .099626 .109589c.109589 0 .9066-.767123 .9066-1.932752z%27/%3E%0A%3Cpath id=%27g4-65%27 d=%27m1.783313-1.145704c-.398506 .667497-.787049 .806974-1.225405 .836862c-.119552 .009963-.209215 .009963-.209215 .199253c0 .059776 .049813 .109589 .129514 .109589c.268991 0 .577833-.029888 .856787-.029888c.328767 0 .67746 .029888 .996264 .029888c.059776 0 .18929 0 .18929-.18929c0-.109589-.089664-.119552-.159402-.119552c-.229141-.019925-.468244-.099626-.468244-.348692c0-.119552 .059776-.229141 .139477-.368618l.757161-1.275218h2.500623c.019925 .209215 .159402 1.564134 .159402 1.663761c0 .298879-.518057 .328767-.71731 .328767c-.139477 0-.239103 0-.239103 .199253c0 .109589 .119552 .109589 .139477 .109589c.408468 0 .836862-.029888 1.24533-.029888c.249066 0 .876712 .029888 1.125778 .029888c.059776 0 .179328 0 .179328-.199253c0-.109589-.099626-.109589-.229141-.109589c-.617684 0-.617684-.069738-.647572-.358655l-.607721-6.22665c-.019925-.199253-.019925-.239103-.18929-.239103c-.159402 0-.199253 .069738-.259029 .169365l-3.466999 5.818182zm1.195517-1.464508l1.96264-3.287671l.318804 3.287671h-2.281445z%27/%3E%0A%3Cpath id=%27g4-110%27 d=%27m.876712-.587796c-.029888 .14944-.089664 .37858-.089664 .428394c0 .179328 .139477 .268991 .288917 .268991c.119552 0 .298879-.079701 .368618-.278954c.009963-.019925 .129514-.488169 .18929-.737235l.219178-.896638c.059776-.219178 .119552-.438356 .169365-.667497c.039851-.169365 .119552-.458281 .129514-.498132c.14944-.308842 .67746-1.215442 1.62391-1.215442c.448319 0 .537983 .368618 .537983 .697385c0 .617684-.488169 1.892902-.647572 2.321295c-.089664 .229141-.099626 .348692-.099626 .458281c0 .468244 .348692 .816936 .816936 .816936c.936488 0 1.305106-1.454545 1.305106-1.534247c0-.099626-.089664-.099626-.119552-.099626c-.099626 0-.099626 .029888-.14944 .179328c-.199253 .67746-.52802 1.235367-1.016189 1.235367c-.169365 0-.239103-.099626-.239103-.328767c0-.249066 .089664-.488169 .179328-.707347c.18929-.52802 .607721-1.62391 .607721-2.191781c0-.667497-.428394-1.066002-1.145704-1.066002c-.896638 0-1.384807 .637609-1.554172 .86675c-.049813-.557908-.458281-.86675-.916563-.86675s-.647572 .388543-.747198 .56787c-.159402 .33873-.298879 .926526-.298879 .966376c0 .099626 .099626 .099626 .119552 .099626c.099626 0 .109589-.009963 .169365-.229141c.169365-.707347 .368618-1.185554 .727273-1.185554c.199253 0 .308842 .129514 .308842 .458281c0 .209215-.029888 .318804-.159402 .836862l-.577833 2.30137z%27/%3E%0A%3Cpath id=%27g2-50%27 d=%27m5.459527-2.291407c.169365 0 .348692 0 .348692-.199253s-.179328-.199253-.348692-.199253h-4.224159c.119552-1.334994 1.265255-2.291407 2.669988-2.291407h1.554172c.169365 0 .348692 0 .348692-.199253s-.179328-.199253-.348692-.199253h-1.574097c-1.703611 0-3.058531 1.295143-3.058531 2.889166s1.354919 2.889166 3.058531 2.889166h1.574097c.169365 0 .348692 0 .348692-.199253s-.179328-.199253-.348692-.199253h-1.554172c-1.404732 0-2.550436-.956413-2.669988-2.291407h4.224159z%27/%3E%0A%3Cpath id=%27g1-101%27 d=%27m1.115816-2.311333h2.86924c.109589 0 .159402-.069738 .159402-.179328c0-1.05604-.647572-1.972603-1.763387-1.972603c-1.225405 0-2.102117 1.085928-2.102117 2.271482c0 .916563 .508095 1.733499 1.384807 2.132005c.229141 .099626 .498132 .159402 .747198 .159402h.029888c.767123 0 1.404732-.428394 1.673724-1.195517c.009963-.029888 .009963-.069738 .009963-.099626c0-.069738-.039851-.119552-.109589-.119552c-.14944 0-.209215 .328767-.268991 .438356c-.249066 .438356-.727273 .727273-1.24533 .727273c-.368618 0-.687422-.209215-.956413-.478207c-.398506-.458281-.428394-1.105853-.428394-1.683686zm.009963-.209215c0-.767123 .408468-1.723537 1.225405-1.723537h.049813c.976339 .089664 .966376 1.125778 1.066002 1.723537h-2.34122z%27/%3E%0A%3Cpath id=%27g1-102%27 d=%27m1.105853-4.293898h-.777086v.308842h.777086v3.297634c0 .33873-.288917 .368618-.587796 .368618h-.179328v.308842h2.400996v-.308842h-.318804c-.219178 0-.448319-.009963-.56787-.119552c-.079701-.089664-.079701-.219178-.079701-.33873v-3.20797h1.135741v-.308842h-1.165629v-1.305106c0-.547945 .37858-1.215442 .916563-1.215442c.099626 0 .239103 .019925 .318804 .079701c-.18929 .049813-.298879 .229141-.298879 .418431c0 .259029 .199253 .428394 .438356 .428394c.259029 0 .448319-.199253 .448319-.418431c0-.478207-.498132-.727273-.9066-.727273c-.9066 0-1.554172 .707347-1.554172 1.673724v1.066002z%27/%3E%0A%3Cpath id=%27g1-109%27 d=%27m.318804-4.293898v.308842h.14944c.328767 0 .627646 .029888 .627646 .498132v2.749689c0 .408468-.278954 .418431-.71731 .418431h-.059776v.308842h2.251557v-.308842h-.259029c-.278954 0-.518057-.039851-.518057-.408468v-1.823163c0-.727273 .398506-1.633873 1.354919-1.633873c.637609 0 .707347 .657534 .707347 1.115816v2.371108c0 .358655-.298879 .37858-.627646 .37858h-.14944v.308842h2.251557v-.308842h-.259029c-.278954 0-.518057-.039851-.518057-.408468v-1.823163c0-.727273 .398506-1.633873 1.354919-1.633873c.637609 0 .707347 .657534 .707347 1.115816v2.371108c0 .358655-.298879 .37858-.627646 .37858h-.14944v.308842h2.251557v-.308842h-.209215c-.298879 0-.56787-.029888-.56787-.37858v-2.251557c0-.368618-.019925-.697385-.259029-1.036115c-.259029-.328767-.687422-.418431-1.085928-.418431c-.647572 0-1.175592 .37858-1.444583 .956413c-.18929-.707347-.637609-.956413-1.325031-.956413c-.637609 0-1.24533 .398506-1.454545 1.016189l-.009963-1.016189l-1.414695 .109589z%27/%3E%0A%3Cpath id=%27g1-111%27 d=%27m2.34122-4.463263c-1.255293 .129514-2.062267 1.185554-2.062267 2.34122c0 1.125778 .886675 2.221669 2.211706 2.221669c1.195517 0 2.201743-.976339 2.201743-2.231631c0-1.185554-.896638-2.34122-2.221669-2.34122c-.039851 0-.089664 .009963-.129514 .009963zm-1.225405 2.570361v-.438356c0-.757161 .239103-1.912827 1.364882-1.912827c.806974 0 1.265255 .67746 1.354919 1.43462c.019925 .219178 .019925 .428394 .019925 .647572c0 .647572-.069738 1.454545-.707347 1.823163c-.199253 .129514-.418431 .18929-.647572 .18929c-.727273 0-1.235367-.56787-1.344956-1.344956c-.019925-.129514-.019925-.268991-.039851-.398506z%27/%3E%0A%3Cpath id=%27g1-114%27 d=%27m.268991-4.293898v.308842h.14944c.328767 0 .627646 .029888 .627646 .498132v2.749689c0 .408468-.278954 .418431-.71731 .418431h-.059776v.308842h2.410959v-.308842c-.119552 0-.259029 .009963-.37858 .009963c-.318804 0-.587796-.049813-.587796-.418431v-1.325031c0-.846824 .199253-2.132005 1.175592-2.132005c.039851 0 .069738 0 .109589 .009963v.009963c-.14944 .059776-.229141 .219178-.229141 .37858c0 .229141 .14944 .388543 .37858 .428394c.288917 0 .478207-.179328 .478207-.428394c0-.398506-.37858-.617684-.737235-.617684c-.587796 0-1.115816 .52802-1.215442 1.066002l-.009963-1.066002l-1.39477 .109589z%27/%3E%0A%3Cpath id=%27g1-115%27 d=%27m1.753425-4.463263c-.368618 .039851-.757161 .109589-1.046077 .358655c-.239103 .209215-.37858 .547945-.37858 .86675c0 1.703611 2.769614 .737235 2.769614 2.231631c0 .607721-.547945 .886675-1.09589 .886675c-.757161 0-1.265255-.537983-1.404732-1.39477c-.019925-.089664-.029888-.179328-.14944-.179328c-.079701 0-.119552 .059776-.119552 .129514v1.574097c.009963 .049813 .039851 .079701 .089664 .089664h.019925c.159402 0 .318804-.368618 .438356-.398506h.009963c.079701 0 .348692 .249066 .557908 .318804c.169365 .059776 .348692 .079701 .52802 .079701c.826899 0 1.613948-.438356 1.613948-1.354919c0-.657534-.478207-1.195517-1.135741-1.364882c-.617684-.169365-1.633873-.169365-1.633873-.896638c0-.607721 .667497-.757161 1.105853-.757161c.488169 0 1.165629 .268991 1.165629 1.125778c0 .089664 .009963 .169365 .119552 .169365c.099626 0 .139477-.079701 .139477-.179328c0-.049813-.009963-.099626-.009963-.139477v-1.026152c0-.059776-.029888-.139477-.109589-.139477c-.159402 0-.259029 .249066-.368618 .249066h-.009963c-.079701 0-.239103-.129514-.358655-.169365c-.179328-.059776-.37858-.089664-.56787-.089664c-.059776 0-.109589 .009963-.169365 .009963z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page26%27%3E%0A%3Cuse x=%27130.418082%27 y=%27-1.937178%27 xlink:href=%27%23g1-102%27/%3E%0A%3Cuse x=%27133.461479%27 y=%27-1.937178%27 xlink:href=%27%23g1-111%27/%3E%0A%3Cuse x=%27138.441583%27 y=%27-1.937178%27 xlink:href=%27%23g1-114%27/%3E%0A%3Cuse x=%27145.662734%27 y=%27-1.937178%27 xlink:href=%27%23g1-115%27/%3E%0A%3Cuse x=%27149.591483%27 y=%27-1.937178%27 xlink:href=%27%23g1-111%27/%3E%0A%3Cuse x=%27154.571586%27 y=%27-1.937178%27 xlink:href=%27%23g1-109%27/%3E%0A%3Cuse x=%27162.87176%27 y=%27-1.937178%27 xlink:href=%27%23g1-101%27/%3E%0A%3Cuse x=%27170.618588%27 y=%27-1.937178%27 xlink:href=%27%23g4-110%27/%3E%0A%3Cuse x=%27179.365845%27 y=%27-1.937178%27 xlink:href=%27%23g2-50%27/%3E%0A%3Cuse x=%27188.77496%27 y=%27-1.937178%27 xlink:href=%27%23g0-78%27/%3E%0A%3Cuse x=%27195.970205%27 y=%27-1.937178%27 xlink:href=%27%23g4-59%27/%3E%0A%3Cuse x=%27200.398013%27 y=%27-1.937178%27 xlink:href=%27%23g4-65%27/%3E%0A%3Cuse x=%27207.870012%27 y=%27-6.050674%27 xlink:href=%27%23g5-110%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\[ \text{for some $n \in \mathbb{N}$}, A^n\]" style="height: 1.4649em; display: block" class="org-latex org-latex-block" />
</p>

<p>
where <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2713.894992pt%27 height=%277.807787pt%27 viewBox=%27-.500002 -7.307786 13.894992 7.807787%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g5-110%27 d=%27m.850809-.439352c-.027895 .09066-.069738 .265006-.069738 .285928c0 .153425 .125529 .223163 .237111 .223163c.125529 0 .237111-.09066 .27198-.153425s.09066-.285928 .125529-.432379c.034869-.132503 .111582-.4533 .153425-.627646c.041843-.153425 .083686-.306849 .118555-.467248c.076712-.285928 .09066-.341719 .292902-.627646c.195268-.278954 .523039-.641594 1.046077-.641594c.404483 0 .411457 .355666 .411457 .488169c0 .418431-.299875 1.192528-.411457 1.48543c-.076712 .195268-.104608 .258032-.104608 .376588c0 .369614 .306849 .599751 .662516 .599751c.697385 0 1.004234-.962391 1.004234-1.066999c0-.09066-.09066-.09066-.111582-.09066c-.097634 0-.104608 .041843-.132503 .118555c-.160399 .557908-.460274 .843836-.739228 .843836c-.146451 0-.174346-.097634-.174346-.244085c0-.160399 .034869-.251059 .160399-.564882c.083686-.216189 .369614-.955417 .369614-1.345953c0-.676463-.536986-.795019-.9066-.795019c-.578829 0-.969365 .355666-1.17858 .63462c-.048817-.481196-.460274-.63462-.746202-.63462c-.299875 0-.460274 .216189-.550934 .376588c-.153425 .258032-.251059 .655542-.251059 .690411c0 .09066 .097634 .09066 .118555 .09066c.097634 0 .104608-.020922 .153425-.209215c.104608-.411457 .237111-.753176 .509091-.753176c.18132 0 .230137 .153425 .230137 .341719c0 .132503-.062765 .390535-.111582 .578829s-.118555 .474222-.153425 .627646l-.223163 .892653z%27/%3E%0A%3Cpath id=%27g4-65%27 d=%27m1.783313-1.145704c-.398506 .667497-.787049 .806974-1.225405 .836862c-.119552 .009963-.209215 .009963-.209215 .199253c0 .059776 .049813 .109589 .129514 .109589c.268991 0 .577833-.029888 .856787-.029888c.328767 0 .67746 .029888 .996264 .029888c.059776 0 .18929 0 .18929-.18929c0-.109589-.089664-.119552-.159402-.119552c-.229141-.019925-.468244-.099626-.468244-.348692c0-.119552 .059776-.229141 .139477-.368618l.757161-1.275218h2.500623c.019925 .209215 .159402 1.564134 .159402 1.663761c0 .298879-.518057 .328767-.71731 .328767c-.139477 0-.239103 0-.239103 .199253c0 .109589 .119552 .109589 .139477 .109589c.408468 0 .836862-.029888 1.24533-.029888c.249066 0 .876712 .029888 1.125778 .029888c.059776 0 .179328 0 .179328-.199253c0-.109589-.099626-.109589-.229141-.109589c-.617684 0-.617684-.069738-.647572-.358655l-.607721-6.22665c-.019925-.199253-.019925-.239103-.18929-.239103c-.159402 0-.199253 .069738-.259029 .169365l-3.466999 5.818182zm1.195517-1.464508l1.96264-3.287671l.318804 3.287671h-2.281445z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page27%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-65%27/%3E%0A%3Cuse x=%277.471999%27 y=%27-3.615364%27 xlink:href=%27%23g5-110%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( A^n \)" style="height: 0.7680em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" /> is the n'th power (using the cartesian product) of <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%278.471999pt%27 height=%277.807787pt%27 viewBox=%27-.500002 -7.307786 8.471999 7.807787%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-65%27 d=%27m1.783313-1.145704c-.398506 .667497-.787049 .806974-1.225405 .836862c-.119552 .009963-.209215 .009963-.209215 .199253c0 .059776 .049813 .109589 .129514 .109589c.268991 0 .577833-.029888 .856787-.029888c.328767 0 .67746 .029888 .996264 .029888c.059776 0 .18929 0 .18929-.18929c0-.109589-.089664-.119552-.159402-.119552c-.229141-.019925-.468244-.099626-.468244-.348692c0-.119552 .059776-.229141 .139477-.368618l.757161-1.275218h2.500623c.019925 .209215 .159402 1.564134 .159402 1.663761c0 .298879-.518057 .328767-.71731 .328767c-.139477 0-.239103 0-.239103 .199253c0 .109589 .119552 .109589 .139477 .109589c.408468 0 .836862-.029888 1.24533-.029888c.249066 0 .876712 .029888 1.125778 .029888c.059776 0 .179328 0 .179328-.199253c0-.109589-.099626-.109589-.229141-.109589c-.617684 0-.617684-.069738-.647572-.358655l-.607721-6.22665c-.019925-.199253-.019925-.239103-.18929-.239103c-.159402 0-.199253 .069738-.259029 .169365l-3.466999 5.818182zm1.195517-1.464508l1.96264-3.287671l.318804 3.287671h-2.281445z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page28%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-65%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( A \)" style="height: 0.7680em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" />.
</p>

<p>
Now let's repeat the same trick for monads. If the elements of the free monoid
are powers of the alphabet set, then the free monad are the powers of the
alphabet functor!
</p>

<p>
<img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%27344.711087pt%27 height=%2715.445832pt%27 viewBox=%27-.500002 -14.94583 344.711087 15.445832%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g5-110%27 d=%27m.850809-.439352c-.027895 .09066-.069738 .265006-.069738 .285928c0 .153425 .125529 .223163 .237111 .223163c.125529 0 .237111-.09066 .27198-.153425s.09066-.285928 .125529-.432379c.034869-.132503 .111582-.4533 .153425-.627646c.041843-.153425 .083686-.306849 .118555-.467248c.076712-.285928 .09066-.341719 .292902-.627646c.195268-.278954 .523039-.641594 1.046077-.641594c.404483 0 .411457 .355666 .411457 .488169c0 .418431-.299875 1.192528-.411457 1.48543c-.076712 .195268-.104608 .258032-.104608 .376588c0 .369614 .306849 .599751 .662516 .599751c.697385 0 1.004234-.962391 1.004234-1.066999c0-.09066-.09066-.09066-.111582-.09066c-.097634 0-.104608 .041843-.132503 .118555c-.160399 .557908-.460274 .843836-.739228 .843836c-.146451 0-.174346-.097634-.174346-.244085c0-.160399 .034869-.251059 .160399-.564882c.083686-.216189 .369614-.955417 .369614-1.345953c0-.676463-.536986-.795019-.9066-.795019c-.578829 0-.969365 .355666-1.17858 .63462c-.048817-.481196-.460274-.63462-.746202-.63462c-.299875 0-.460274 .216189-.550934 .376588c-.153425 .258032-.251059 .655542-.251059 .690411c0 .09066 .097634 .09066 .118555 .09066c.097634 0 .104608-.020922 .153425-.209215c.104608-.411457 .237111-.753176 .509091-.753176c.18132 0 .230137 .153425 .230137 .341719c0 .132503-.062765 .390535-.111582 .578829s-.118555 .474222-.153425 .627646l-.223163 .892653z%27/%3E%0A%3Cpath id=%27g0-78%27 d=%27m1.115816-5.927771v4.861768c0 .52802-.079701 .707347-.587796 .71731c-.109589 0-.278954 .009963-.278954 .169365c0 .179328 .159402 .179328 .33873 .179328h1.544209c.179328 0 .328767 0 .328767-.179328c0-.159402-.159402-.169365-.298879-.169365c-.547945-.009963-.627646-.219178-.627646-.737235v-4.562889l4.303861 5.688667c.089664 .119552 .139477 .14944 .209215 .14944c.169365 0 .169365-.159402 .169365-.328767v-5.628892c0-.557908 .089664-.697385 .547945-.707347c.059776 0 .229141-.009963 .229141-.169365c0-.179328-.14944-.179328-.328767-.179328h-1.454545c-.179328 0-.33873 0-.33873 .179328c0 .169365 .179328 .169365 .288917 .169365c.557908 .009963 .637609 .209215 .637609 .737235v3.118306l-3.008717-4.064757c-.099626-.139477-.129514-.139477-.358655-.139477h-1.733499c-.179328 0-.328767 0-.328767 .179328c0 .14944 .14944 .169365 .209215 .169365c.268991 .029888 .458281 .18929 .557908 .308842c-.019925 .079701-.019925 .099626-.019925 .239103zm4.752179 5.419676l-4.333748-5.728518c-.099626-.119552-.099626-.139477-.209215-.239103h1.185554l3.35741 4.533001v1.43462z%27/%3E%0A%3Cpath id=%27g4-59%27 d=%27m2.022416-.009963c0-.657534-.249066-1.046077-.637609-1.046077c-.328767 0-.52802 .249066-.52802 .52802c0 .268991 .199253 .52802 .52802 .52802c.119552 0 .249066-.039851 .348692-.129514c.029888-.019925 .039851-.029888 .049813-.029888s.019925 .009963 .019925 .14944c0 .737235-.348692 1.334994-.67746 1.663761c-.109589 .109589-.109589 .129514-.109589 .159402c0 .069738 .049813 .109589 .099626 .109589c.109589 0 .9066-.767123 .9066-1.932752z%27/%3E%0A%3Cpath id=%27g4-84%27 d=%27m4.254047-6.047323c.069738-.278954 .109589-.33873 .229141-.368618c.089664-.019925 .418431-.019925 .627646-.019925c1.006227 0 1.454545 .039851 1.454545 .816936c0 .14944-.039851 .537983-.079701 .797011c-.009963 .039851-.029888 .159402-.029888 .18929c0 .059776 .029888 .129514 .119552 .129514c.109589 0 .129514-.079701 .14944-.229141l.268991-1.733499c.009963-.039851 .019925-.139477 .019925-.169365c0-.109589-.099626-.109589-.268991-.109589h-5.529265c-.239103 0-.249066 .009963-.318804 .199253l-.597758 1.753425c-.009963 .019925-.059776 .159402-.059776 .179328c0 .059776 .049813 .109589 .119552 .109589c.099626 0 .109589-.049813 .169365-.209215c.537983-1.544209 .797011-1.723537 2.271482-1.723537h.388543c.278954 0 .278954 .039851 .278954 .119552c0 .059776-.029888 .179328-.039851 .209215l-1.334994 5.32005c-.089664 .368618-.119552 .478207-1.185554 .478207c-.358655 0-.418431 0-.418431 .18929c0 .119552 .109589 .119552 .169365 .119552c.268991 0 .547945-.019925 .816936-.019925c.278954 0 .56787-.009963 .846824-.009963s.557908 .009963 .826899 .009963c.288917 0 .587796 .019925 .86675 .019925c.099626 0 .219178 0 .219178-.199253c0-.109589-.079701-.109589-.33873-.109589c-.249066 0-.37858 0-.637609-.019925c-.288917-.029888-.368618-.059776-.368618-.219178c0-.009963 0-.059776 .039851-.209215l1.325031-5.290162z%27/%3E%0A%3Cpath id=%27g4-110%27 d=%27m.876712-.587796c-.029888 .14944-.089664 .37858-.089664 .428394c0 .179328 .139477 .268991 .288917 .268991c.119552 0 .298879-.079701 .368618-.278954c.009963-.019925 .129514-.488169 .18929-.737235l.219178-.896638c.059776-.219178 .119552-.438356 .169365-.667497c.039851-.169365 .119552-.458281 .129514-.498132c.14944-.308842 .67746-1.215442 1.62391-1.215442c.448319 0 .537983 .368618 .537983 .697385c0 .617684-.488169 1.892902-.647572 2.321295c-.089664 .229141-.099626 .348692-.099626 .458281c0 .468244 .348692 .816936 .816936 .816936c.936488 0 1.305106-1.454545 1.305106-1.534247c0-.099626-.089664-.099626-.119552-.099626c-.099626 0-.099626 .029888-.14944 .179328c-.199253 .67746-.52802 1.235367-1.016189 1.235367c-.169365 0-.239103-.099626-.239103-.328767c0-.249066 .089664-.488169 .179328-.707347c.18929-.52802 .607721-1.62391 .607721-2.191781c0-.667497-.428394-1.066002-1.145704-1.066002c-.896638 0-1.384807 .637609-1.554172 .86675c-.049813-.557908-.458281-.86675-.916563-.86675s-.647572 .388543-.747198 .56787c-.159402 .33873-.298879 .926526-.298879 .966376c0 .099626 .099626 .099626 .119552 .099626c.099626 0 .109589-.009963 .169365-.229141c.169365-.707347 .368618-1.185554 .727273-1.185554c.199253 0 .308842 .129514 .308842 .458281c0 .209215-.029888 .318804-.159402 .836862l-.577833 2.30137z%27/%3E%0A%3Cpath id=%27g6-40%27 d=%27m3.297634 2.391034c0-.029888 0-.049813-.169365-.219178c-1.24533-1.255293-1.564134-3.138232-1.564134-4.662516c0-1.733499 .37858-3.466999 1.603985-4.712329c.129514-.119552 .129514-.139477 .129514-.169365c0-.069738-.039851-.099626-.099626-.099626c-.099626 0-.996264 .67746-1.58406 1.942715c-.508095 1.09589-.627646 2.201743-.627646 3.038605c0 .777086 .109589 1.982565 .657534 3.108344c.597758 1.225405 1.454545 1.872976 1.554172 1.872976c.059776 0 .099626-.029888 .099626-.099626z%27/%3E%0A%3Cpath id=%27g6-41%27 d=%27m2.879203-2.49066c0-.777086-.109589-1.982565-.657534-3.108344c-.597758-1.225405-1.454545-1.872976-1.554172-1.872976c-.059776 0-.099626 .039851-.099626 .099626c0 .029888 0 .049813 .18929 .229141c.976339 .986301 1.544209 2.570361 1.544209 4.652553c0 1.703611-.368618 3.457036-1.603985 4.712329c-.129514 .119552-.129514 .139477-.129514 .169365c0 .059776 .039851 .099626 .099626 .099626c.099626 0 .996264-.67746 1.58406-1.942715c.508095-1.09589 .627646-2.201743 .627646-3.038605z%27/%3E%0A%3Cpath id=%27g6-61%27 d=%27m6.844334-3.257783c.14944 0 .33873 0 .33873-.199253s-.18929-.199253-.328767-.199253h-5.967621c-.139477 0-.328767 0-.328767 .199253s.18929 .199253 .33873 .199253h5.947696zm.009963 1.932752c.139477 0 .328767 0 .328767-.199253s-.18929-.199253-.33873-.199253h-5.947696c-.14944 0-.33873 0-.33873 .199253s.18929 .199253 .328767 .199253h5.967621z%27/%3E%0A%3Cpath id=%27g2-1%27 d=%27m1.912827-2.49066c0-.288917-.239103-.52802-.52802-.52802s-.52802 .239103-.52802 .52802s.239103 .52802 .52802 .52802s.52802-.239103 .52802-.52802z%27/%3E%0A%3Cpath id=%27g2-14%27 d=%27m4.423412-2.49066c0-1.066002-.886675-1.932752-1.932752-1.932752c-1.075965 0-1.942715 .886675-1.942715 1.932752c0 1.05604 .86675 1.932752 1.942715 1.932752c1.046077 0 1.932752-.86675 1.932752-1.932752zm-1.932752 1.534247c-.86675 0-1.544209-.697385-1.544209-1.534247s.687422-1.534247 1.544209-1.534247c.826899 0 1.534247 .67746 1.534247 1.534247s-.707347 1.534247-1.534247 1.534247z%27/%3E%0A%3Cpath id=%27g2-50%27 d=%27m5.459527-2.291407c.169365 0 .348692 0 .348692-.199253s-.179328-.199253-.348692-.199253h-4.224159c.119552-1.334994 1.265255-2.291407 2.669988-2.291407h1.554172c.169365 0 .348692 0 .348692-.199253s-.179328-.199253-.348692-.199253h-1.574097c-1.703611 0-3.058531 1.295143-3.058531 2.889166s1.354919 2.889166 3.058531 2.889166h1.574097c.169365 0 .348692 0 .348692-.199253s-.179328-.199253-.348692-.199253h-1.554172c-1.404732 0-2.550436-.956413-2.669988-2.291407h4.224159z%27/%3E%0A%3Cpath id=%27g1-70%27 d=%27m.328767-6.784558v.308842c.129514 0 .259029-.009963 .37858-.009963c.358655 0 .647572 .049813 .647572 .448319v5.290162c0 .37858-.328767 .438356-.667497 .438356c-.129514 0-.249066-.009963-.358655-.009963v.308842h3.188045v-.308842c-.139477 0-.308842 .009963-.478207 .009963c-.498132 0-.797011-.039851-.797011-.498132v-2.440847h.836862c.33873 0 .747198 .019925 .936488 .308842c.139477 .219178 .14944 .498132 .14944 .757161v.099626h.249066v-2.6401h-.249066v.099626c0 .518057-.099626 .966376-.707347 1.046077c-.179328 .019925-.368618 .019925-.547945 .019925h-.667497v-2.560399c0-.33873 .199253-.358655 .408468-.358655h1.165629c.518057 0 1.145704 .019925 1.524284 .408468c.37858 .398506 .418431 1.006227 .488169 1.524284h.249066l-.278954-2.241594h-5.469489z%27/%3E%0A%3Cpath id=%27g1-101%27 d=%27m1.115816-2.311333h2.86924c.109589 0 .159402-.069738 .159402-.179328c0-1.05604-.647572-1.972603-1.763387-1.972603c-1.225405 0-2.102117 1.085928-2.102117 2.271482c0 .916563 .508095 1.733499 1.384807 2.132005c.229141 .099626 .498132 .159402 .747198 .159402h.029888c.767123 0 1.404732-.428394 1.673724-1.195517c.009963-.029888 .009963-.069738 .009963-.099626c0-.069738-.039851-.119552-.109589-.119552c-.14944 0-.209215 .328767-.268991 .438356c-.249066 .438356-.727273 .727273-1.24533 .727273c-.368618 0-.687422-.209215-.956413-.478207c-.398506-.458281-.428394-1.105853-.428394-1.683686zm.009963-.209215c0-.767123 .408468-1.723537 1.225405-1.723537h.049813c.976339 .089664 .966376 1.125778 1.066002 1.723537h-2.34122z%27/%3E%0A%3Cpath id=%27g1-102%27 d=%27m1.105853-4.293898h-.777086v.308842h.777086v3.297634c0 .33873-.288917 .368618-.587796 .368618h-.179328v.308842h2.400996v-.308842h-.318804c-.219178 0-.448319-.009963-.56787-.119552c-.079701-.089664-.079701-.219178-.079701-.33873v-3.20797h1.135741v-.308842h-1.165629v-1.305106c0-.547945 .37858-1.215442 .916563-1.215442c.099626 0 .239103 .019925 .318804 .079701c-.18929 .049813-.298879 .229141-.298879 .418431c0 .259029 .199253 .428394 .438356 .428394c.259029 0 .448319-.199253 .448319-.418431c0-.478207-.498132-.727273-.9066-.727273c-.9066 0-1.554172 .707347-1.554172 1.673724v1.066002z%27/%3E%0A%3Cpath id=%27g1-109%27 d=%27m.318804-4.293898v.308842h.14944c.328767 0 .627646 .029888 .627646 .498132v2.749689c0 .408468-.278954 .418431-.71731 .418431h-.059776v.308842h2.251557v-.308842h-.259029c-.278954 0-.518057-.039851-.518057-.408468v-1.823163c0-.727273 .398506-1.633873 1.354919-1.633873c.637609 0 .707347 .657534 .707347 1.115816v2.371108c0 .358655-.298879 .37858-.627646 .37858h-.14944v.308842h2.251557v-.308842h-.259029c-.278954 0-.518057-.039851-.518057-.408468v-1.823163c0-.727273 .398506-1.633873 1.354919-1.633873c.637609 0 .707347 .657534 .707347 1.115816v2.371108c0 .358655-.298879 .37858-.627646 .37858h-.14944v.308842h2.251557v-.308842h-.209215c-.298879 0-.56787-.029888-.56787-.37858v-2.251557c0-.368618-.019925-.697385-.259029-1.036115c-.259029-.328767-.687422-.418431-1.085928-.418431c-.647572 0-1.175592 .37858-1.444583 .956413c-.18929-.707347-.637609-.956413-1.325031-.956413c-.637609 0-1.24533 .398506-1.454545 1.016189l-.009963-1.016189l-1.414695 .109589z%27/%3E%0A%3Cpath id=%27g1-111%27 d=%27m2.34122-4.463263c-1.255293 .129514-2.062267 1.185554-2.062267 2.34122c0 1.125778 .886675 2.221669 2.211706 2.221669c1.195517 0 2.201743-.976339 2.201743-2.231631c0-1.185554-.896638-2.34122-2.221669-2.34122c-.039851 0-.089664 .009963-.129514 .009963zm-1.225405 2.570361v-.438356c0-.757161 .239103-1.912827 1.364882-1.912827c.806974 0 1.265255 .67746 1.354919 1.43462c.019925 .219178 .019925 .428394 .019925 .647572c0 .647572-.069738 1.454545-.707347 1.823163c-.199253 .129514-.418431 .18929-.647572 .18929c-.727273 0-1.235367-.56787-1.344956-1.344956c-.019925-.129514-.019925-.268991-.039851-.398506z%27/%3E%0A%3Cpath id=%27g1-114%27 d=%27m.268991-4.293898v.308842h.14944c.328767 0 .627646 .029888 .627646 .498132v2.749689c0 .408468-.278954 .418431-.71731 .418431h-.059776v.308842h2.410959v-.308842c-.119552 0-.259029 .009963-.37858 .009963c-.318804 0-.587796-.049813-.587796-.418431v-1.325031c0-.846824 .199253-2.132005 1.175592-2.132005c.039851 0 .069738 0 .109589 .009963v.009963c-.14944 .059776-.229141 .219178-.229141 .37858c0 .229141 .14944 .388543 .37858 .428394c.288917 0 .478207-.179328 .478207-.428394c0-.398506-.37858-.617684-.737235-.617684c-.587796 0-1.115816 .52802-1.215442 1.066002l-.009963-1.066002l-1.39477 .109589z%27/%3E%0A%3Cpath id=%27g1-115%27 d=%27m1.753425-4.463263c-.368618 .039851-.757161 .109589-1.046077 .358655c-.239103 .209215-.37858 .547945-.37858 .86675c0 1.703611 2.769614 .737235 2.769614 2.231631c0 .607721-.547945 .886675-1.09589 .886675c-.757161 0-1.265255-.537983-1.404732-1.39477c-.019925-.089664-.029888-.179328-.14944-.179328c-.079701 0-.119552 .059776-.119552 .129514v1.574097c.009963 .049813 .039851 .079701 .089664 .089664h.019925c.159402 0 .318804-.368618 .438356-.398506h.009963c.079701 0 .348692 .249066 .557908 .318804c.169365 .059776 .348692 .079701 .52802 .079701c.826899 0 1.613948-.438356 1.613948-1.354919c0-.657534-.478207-1.195517-1.135741-1.364882c-.617684-.169365-1.633873-.169365-1.633873-.896638c0-.607721 .667497-.757161 1.105853-.757161c.488169 0 1.165629 .268991 1.165629 1.125778c0 .089664 .009963 .169365 .119552 .169365c.099626 0 .139477-.079701 .139477-.179328c0-.049813-.009963-.099626-.009963-.139477v-1.026152c0-.059776-.029888-.139477-.109589-.139477c-.159402 0-.259029 .249066-.368618 .249066h-.009963c-.079701 0-.239103-.129514-.358655-.169365c-.179328-.059776-.37858-.089664-.56787-.089664c-.059776 0-.109589 .009963-.169365 .009963z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page29%27%3E%0A%3Cuse x=%2778.151269%27 y=%27-2.49066%27 xlink:href=%27%23g1-70%27/%3E%0A%3Cuse x=%2783.823054%27 y=%27-2.49066%27 xlink:href=%27%23g1-114%27/%3E%0A%3Cuse x=%2787.724135%27 y=%27-2.49066%27 xlink:href=%27%23g1-101%27/%3E%0A%3Cuse x=%2792.150894%27 y=%27-2.49066%27 xlink:href=%27%23g1-101%27/%3E%0A%3Cuse x=%2796.577653%27 y=%27-2.49066%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%27100.452027%27 y=%27-2.49066%27 xlink:href=%27%23g4-84%27/%3E%0A%3Cuse x=%27107.65767%27 y=%27-2.49066%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%27114.299376%27 y=%27-2.49066%27 xlink:href=%27%23g6-61%27/%3E%0A%3Cuse x=%27124.815456%27 y=%27-2.49066%27 xlink:href=%27%23g1-102%27/%3E%0A%3Cuse x=%27127.858853%27 y=%27-2.49066%27 xlink:href=%27%23g1-111%27/%3E%0A%3Cuse x=%27132.838957%27 y=%27-2.49066%27 xlink:href=%27%23g1-114%27/%3E%0A%3Cuse x=%27140.060107%27 y=%27-2.49066%27 xlink:href=%27%23g1-115%27/%3E%0A%3Cuse x=%27143.988856%27 y=%27-2.49066%27 xlink:href=%27%23g1-111%27/%3E%0A%3Cuse x=%27148.96896%27 y=%27-2.49066%27 xlink:href=%27%23g1-109%27/%3E%0A%3Cuse x=%27157.269133%27 y=%27-2.49066%27 xlink:href=%27%23g1-101%27/%3E%0A%3Cuse x=%27165.015961%27 y=%27-2.49066%27 xlink:href=%27%23g4-110%27/%3E%0A%3Cuse x=%27173.763219%27 y=%27-2.49066%27 xlink:href=%27%23g2-50%27/%3E%0A%3Cuse x=%27183.172334%27 y=%27-2.49066%27 xlink:href=%27%23g0-78%27/%3E%0A%3Cuse x=%27190.367579%27 y=%27-2.49066%27 xlink:href=%27%23g4-59%27/%3E%0A%3Cuse x=%27194.795387%27 y=%27-2.49066%27 xlink:href=%27%23g4-84%27/%3E%0A%3Cuse x=%27202.00103%27 y=%27-6.604156%27 xlink:href=%27%23g5-110%27/%3E%0A%3Cuse x=%27210.191355%27 y=%27-2.49066%27 xlink:href=%27%23g6-61%27/%3E%0A%3Cuse x=%27220.707435%27 y=%27-2.49066%27 xlink:href=%27%23g4-84%27/%3E%0A%3Cuse x=%27230.126944%27 y=%27-2.49066%27 xlink:href=%27%23g2-14%27/%3E%0A%3Cuse x=%27237.322149%27 y=%27-2.49066%27 xlink:href=%27%23g2-1%27/%3E%0A%3Cuse x=%27241.749957%27 y=%27-2.49066%27 xlink:href=%27%23g2-1%27/%3E%0A%3Cuse x=%27246.177765%27 y=%27-2.49066%27 xlink:href=%27%23g2-1%27/%3E%0A%3Cuse x=%27251.159039%27 y=%27-2.49066%27 xlink:href=%27%23g2-14%27/%3E%0A%3Cuse x=%27258.354244%27 y=%27-2.49066%27 xlink:href=%27%23g4-84%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\[ \text{Free}(T) = \text{for some $n \in \mathbb{N}$}, T^n = T \circ \dots \circ T \]" style="height: 1.5194em; display: block" class="org-latex org-latex-block" />
</p>


<ol class="org-ol">
<li>A natural transformation <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2742.470405pt%27 height=%279.744966pt%27 viewBox=%27-.500002 -7.307786 42.470405 9.744966%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g2-33%27 d=%27m8.308842-2.291407c-.547945 .418431-.816936 .826899-.896638 .956413c-.448319 .687422-.52802 1.315068-.52802 1.325031c0 .119552 .119552 .119552 .199253 .119552c.169365 0 .179328-.019925 .219178-.199253c.229141-.976339 .816936-1.8132 1.942715-2.271482c.119552-.039851 .14944-.059776 .14944-.129514s-.059776-.099626-.079701-.109589c-.438356-.169365-1.643836-.667497-2.022416-2.34122c-.029888-.119552-.039851-.14944-.209215-.14944c-.079701 0-.199253 0-.199253 .119552c0 .019925 .089664 .647572 .508095 1.315068c.199253 .298879 .488169 .647572 .916563 .966376h-7.402242c-.179328 0-.358655 0-.358655 .199253s.179328 .199253 .358655 .199253h7.402242z%27/%3E%0A%3Cpath id=%27g6-58%27 d=%27m1.912827-3.765878c0-.288917-.239103-.52802-.52802-.52802s-.52802 .239103-.52802 .52802s.239103 .52802 .52802 .52802s.52802-.239103 .52802-.52802zm0 3.237858c0-.288917-.239103-.52802-.52802-.52802s-.52802 .239103-.52802 .52802s.239103 .52802 .52802 .52802s.52802-.239103 .52802-.52802z%27/%3E%0A%3Cpath id=%27g4-17%27 d=%27m4.861768-2.759651c.049813-.179328 .079701-.308842 .079701-.577833c0-.647572-.398506-1.066002-1.145704-1.066002c-.787049 0-1.305106 .518057-1.544209 .86675c-.049813-.56787-.468244-.86675-.916563-.86675c-.458281 0-.647572 .388543-.737235 .56787c-.179328 .33873-.308842 .936488-.308842 .966376c0 .099626 .099626 .099626 .119552 .099626c.099626 0 .109589-.009963 .169365-.229141c.169365-.707347 .368618-1.185554 .727273-1.185554c.169365 0 .308842 .079701 .308842 .458281c0 .209215-.029888 .318804-.159402 .836862l-.577833 2.30137c-.029888 .14944-.089664 .37858-.089664 .428394c0 .179328 .139477 .268991 .288917 .268991c.119552 0 .298879-.079701 .368618-.278954c.009963-.019925 .129514-.488169 .18929-.737235l.219178-.896638c.059776-.219178 .119552-.438356 .169365-.667497c.019925-.059776 .099626-.388543 .109589-.448319c.029888-.089664 .33873-.647572 .67746-.916563c.219178-.159402 .52802-.348692 .956413-.348692s.537983 .33873 .537983 .697385c0 .049813 0 .229141-.099626 .627646l-1.135741 4.582814c-.029888 .119552-.029888 .139477-.029888 .159402c0 .14944 .109589 .268991 .278954 .268991c.308842 0 .37858-.288917 .408468-.398506l1.135741-4.513076z%27/%3E%0A%3Cpath id=%27g4-73%27 d=%27m3.726027-6.03736c.089664-.358655 .119552-.458281 .9066-.458281c.239103 0 .318804 0 .318804-.18929c0-.119552-.109589-.119552-.14944-.119552c-.288917 0-1.026152 .029888-1.315068 .029888c-.298879 0-1.026152-.029888-1.325031-.029888c-.069738 0-.199253 0-.199253 .199253c0 .109589 .089664 .109589 .278954 .109589c.418431 0 .687422 0 .687422 .18929c0 .049813 0 .069738-.019925 .159402l-1.344956 5.369863c-.089664 .368618-.119552 .468244-.9066 .468244c-.229141 0-.318804 0-.318804 .199253c0 .109589 .119552 .109589 .14944 .109589c.288917 0 1.016189-.029888 1.305106-.029888c.298879 0 1.036115 .029888 1.334994 .029888c.079701 0 .199253 0 .199253-.18929c0-.119552-.079701-.119552-.298879-.119552c-.179328 0-.229141 0-.428394-.019925c-.209215-.019925-.249066-.059776-.249066-.169365c0-.079701 .019925-.159402 .039851-.229141l1.334994-5.310087z%27/%3E%0A%3Cpath id=%27g4-84%27 d=%27m4.254047-6.047323c.069738-.278954 .109589-.33873 .229141-.368618c.089664-.019925 .418431-.019925 .627646-.019925c1.006227 0 1.454545 .039851 1.454545 .816936c0 .14944-.039851 .537983-.079701 .797011c-.009963 .039851-.029888 .159402-.029888 .18929c0 .059776 .029888 .129514 .119552 .129514c.109589 0 .129514-.079701 .14944-.229141l.268991-1.733499c.009963-.039851 .019925-.139477 .019925-.169365c0-.109589-.099626-.109589-.268991-.109589h-5.529265c-.239103 0-.249066 .009963-.318804 .199253l-.597758 1.753425c-.009963 .019925-.059776 .159402-.059776 .179328c0 .059776 .049813 .109589 .119552 .109589c.099626 0 .109589-.049813 .169365-.209215c.537983-1.544209 .797011-1.723537 2.271482-1.723537h.388543c.278954 0 .278954 .039851 .278954 .119552c0 .059776-.029888 .179328-.039851 .209215l-1.334994 5.32005c-.089664 .368618-.119552 .478207-1.185554 .478207c-.358655 0-.418431 0-.418431 .18929c0 .119552 .109589 .119552 .169365 .119552c.268991 0 .547945-.019925 .816936-.019925c.278954 0 .56787-.009963 .846824-.009963s.557908 .009963 .826899 .009963c.288917 0 .587796 .019925 .86675 .019925c.099626 0 .219178 0 .219178-.199253c0-.109589-.079701-.109589-.33873-.109589c-.249066 0-.37858 0-.637609-.019925c-.288917-.029888-.368618-.059776-.368618-.219178c0-.009963 0-.059776 .039851-.209215l1.325031-5.290162z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page30%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-17%27/%3E%0A%3Cuse x=%278.071536%27 y=%270%27 xlink:href=%27%23g6-58%27/%3E%0A%3Cuse x=%2713.606277%27 y=%270%27 xlink:href=%27%23g4-73%27/%3E%0A%3Cuse x=%2721.534801%27 y=%270%27 xlink:href=%27%23g2-33%27/%3E%0A%3Cuse x=%2734.264802%27 y=%270%27 xlink:href=%27%23g4-84%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( \eta : I \to T \)" style="height: 0.9586em; vertical-align: -0.2397em; display: inline-block" class="org-latex org-latex-inline" /></li>
<li>A natural transfor</li>
</ol>

<p>
The free monad <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Free</span> f</code> makes <code class="src src-haskell">f</code> into a monad, because a
term of type <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Free</span> f x</code> is inhabited by terms of shape <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2725.815606pt%27 height=%2710.962644pt%27 viewBox=%27-.500002 -7.971982 25.815606 10.962644%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g5-110%27 d=%27m.850809-.439352c-.027895 .09066-.069738 .265006-.069738 .285928c0 .153425 .125529 .223163 .237111 .223163c.125529 0 .237111-.09066 .27198-.153425s.09066-.285928 .125529-.432379c.034869-.132503 .111582-.4533 .153425-.627646c.041843-.153425 .083686-.306849 .118555-.467248c.076712-.285928 .09066-.341719 .292902-.627646c.195268-.278954 .523039-.641594 1.046077-.641594c.404483 0 .411457 .355666 .411457 .488169c0 .418431-.299875 1.192528-.411457 1.48543c-.076712 .195268-.104608 .258032-.104608 .376588c0 .369614 .306849 .599751 .662516 .599751c.697385 0 1.004234-.962391 1.004234-1.066999c0-.09066-.09066-.09066-.111582-.09066c-.097634 0-.104608 .041843-.132503 .118555c-.160399 .557908-.460274 .843836-.739228 .843836c-.146451 0-.174346-.097634-.174346-.244085c0-.160399 .034869-.251059 .160399-.564882c.083686-.216189 .369614-.955417 .369614-1.345953c0-.676463-.536986-.795019-.9066-.795019c-.578829 0-.969365 .355666-1.17858 .63462c-.048817-.481196-.460274-.63462-.746202-.63462c-.299875 0-.460274 .216189-.550934 .376588c-.153425 .258032-.251059 .655542-.251059 .690411c0 .09066 .097634 .09066 .118555 .09066c.097634 0 .104608-.020922 .153425-.209215c.104608-.411457 .237111-.753176 .509091-.753176c.18132 0 .230137 .153425 .230137 .341719c0 .132503-.062765 .390535-.111582 .578829s-.118555 .474222-.153425 .627646l-.223163 .892653z%27/%3E%0A%3Cpath id=%27g6-40%27 d=%27m3.297634 2.391034c0-.029888 0-.049813-.169365-.219178c-1.24533-1.255293-1.564134-3.138232-1.564134-4.662516c0-1.733499 .37858-3.466999 1.603985-4.712329c.129514-.119552 .129514-.139477 .129514-.169365c0-.069738-.039851-.099626-.099626-.099626c-.099626 0-.996264 .67746-1.58406 1.942715c-.508095 1.09589-.627646 2.201743-.627646 3.038605c0 .777086 .109589 1.982565 .657534 3.108344c.597758 1.225405 1.454545 1.872976 1.554172 1.872976c.059776 0 .099626-.029888 .099626-.099626z%27/%3E%0A%3Cpath id=%27g6-41%27 d=%27m2.879203-2.49066c0-.777086-.109589-1.982565-.657534-3.108344c-.597758-1.225405-1.454545-1.872976-1.554172-1.872976c-.059776 0-.099626 .039851-.099626 .099626c0 .029888 0 .049813 .18929 .229141c.976339 .986301 1.544209 2.570361 1.544209 4.652553c0 1.703611-.368618 3.457036-1.603985 4.712329c-.129514 .119552-.129514 .139477-.129514 .169365c0 .059776 .039851 .099626 .099626 .099626c.099626 0 .996264-.67746 1.58406-1.942715c.508095-1.09589 .627646-2.201743 .627646-3.038605z%27/%3E%0A%3Cpath id=%27g4-102%27 d=%27m3.656289-3.985056h.856787c.199253 0 .298879 0 .298879-.199253c0-.109589-.099626-.109589-.268991-.109589h-.826899l.209215-1.135741c.039851-.209215 .179328-.916563 .239103-1.036115c.089664-.18929 .259029-.33873 .468244-.33873c.039851 0 .298879 0 .488169 .179328c-.438356 .039851-.537983 .388543-.537983 .537983c0 .229141 .179328 .348692 .368618 .348692c.259029 0 .547945-.219178 .547945-.597758c0-.458281-.458281-.687422-.86675-.687422c-.33873 0-.966376 .179328-1.265255 1.165629c-.059776 .209215-.089664 .308842-.328767 1.564134h-.687422c-.18929 0-.298879 0-.298879 .18929c0 .119552 .089664 .119552 .278954 .119552h.657534l-.747198 3.935243c-.179328 .966376-.348692 1.872976-.86675 1.872976c-.039851 0-.288917 0-.478207-.179328c.458281-.029888 .547945-.388543 .547945-.537983c0-.229141-.179328-.348692-.368618-.348692c-.259029 0-.547945 .219178-.547945 .597758c0 .448319 .438356 .687422 .846824 .687422c.547945 0 .946451-.587796 1.125778-.966376c.318804-.627646 .547945-1.833126 .557908-1.902864l.597758-3.158157z%27/%3E%0A%3Cpath id=%27g4-120%27 d=%27m3.327522-3.008717c.059776-.259029 .288917-1.175592 .986301-1.175592c.049813 0 .288917 0 .498132 .129514c-.278954 .049813-.478207 .298879-.478207 .537983c0 .159402 .109589 .348692 .37858 .348692c.219178 0 .537983-.179328 .537983-.577833c0-.518057-.587796-.657534-.926526-.657534c-.577833 0-.926526 .52802-1.046077 .757161c-.249066-.657534-.787049-.757161-1.075965-.757161c-1.036115 0-1.603985 1.285181-1.603985 1.534247c0 .099626 .099626 .099626 .119552 .099626c.079701 0 .109589-.019925 .129514-.109589c.33873-1.05604 .996264-1.305106 1.334994-1.305106c.18929 0 .537983 .089664 .537983 .667497c0 .308842-.169365 .976339-.537983 2.371108c-.159402 .617684-.508095 1.036115-.946451 1.036115c-.059776 0-.288917 0-.498132-.129514c.249066-.049813 .468244-.259029 .468244-.537983c0-.268991-.219178-.348692-.368618-.348692c-.298879 0-.547945 .259029-.547945 .577833c0 .458281 .498132 .657534 .936488 .657534c.657534 0 1.016189-.697385 1.046077-.757161c.119552 .368618 .478207 .757161 1.075965 .757161c1.026152 0 1.594022-1.285181 1.594022-1.534247c0-.099626-.089664-.099626-.119552-.099626c-.089664 0-.109589 .039851-.129514 .109589c-.328767 1.066002-1.006227 1.305106-1.325031 1.305106c-.388543 0-.547945-.318804-.547945-.657534c0-.219178 .059776-.438356 .169365-.876712l.33873-1.364882z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page31%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-102%27/%3E%0A%3Cuse x=%275.949947%27 y=%27-3.615364%27 xlink:href=%27%23g5-110%27/%3E%0A%3Cuse x=%2711.37294%27 y=%270%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%2715.247314%27 y=%270%27 xlink:href=%27%23g4-120%27/%3E%0A%3Cuse x=%2720.941246%27 y=%270%27 xlink:href=%27%23g6-41%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( f^n(x) \)" style="height: 1.0784em; vertical-align: -0.2942em; display: inline-block" class="org-latex org-latex-inline" />
for some <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2726.351621pt%27 height=%278.252668pt%27 viewBox=%27-.500002 -7.363151 26.351621 8.252668%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g0-78%27 d=%27m1.115816-5.927771v4.861768c0 .52802-.079701 .707347-.587796 .71731c-.109589 0-.278954 .009963-.278954 .169365c0 .179328 .159402 .179328 .33873 .179328h1.544209c.179328 0 .328767 0 .328767-.179328c0-.159402-.159402-.169365-.298879-.169365c-.547945-.009963-.627646-.219178-.627646-.737235v-4.562889l4.303861 5.688667c.089664 .119552 .139477 .14944 .209215 .14944c.169365 0 .169365-.159402 .169365-.328767v-5.628892c0-.557908 .089664-.697385 .547945-.707347c.059776 0 .229141-.009963 .229141-.169365c0-.179328-.14944-.179328-.328767-.179328h-1.454545c-.179328 0-.33873 0-.33873 .179328c0 .169365 .179328 .169365 .288917 .169365c.557908 .009963 .637609 .209215 .637609 .737235v3.118306l-3.008717-4.064757c-.099626-.139477-.129514-.139477-.358655-.139477h-1.733499c-.179328 0-.328767 0-.328767 .179328c0 .14944 .14944 .169365 .209215 .169365c.268991 .029888 .458281 .18929 .557908 .308842c-.019925 .079701-.019925 .099626-.019925 .239103zm4.752179 5.419676l-4.333748-5.728518c-.099626-.119552-.099626-.139477-.209215-.239103h1.185554l3.35741 4.533001v1.43462z%27/%3E%0A%3Cpath id=%27g2-50%27 d=%27m5.459527-2.291407c.169365 0 .348692 0 .348692-.199253s-.179328-.199253-.348692-.199253h-4.224159c.119552-1.334994 1.265255-2.291407 2.669988-2.291407h1.554172c.169365 0 .348692 0 .348692-.199253s-.179328-.199253-.348692-.199253h-1.574097c-1.703611 0-3.058531 1.295143-3.058531 2.889166s1.354919 2.889166 3.058531 2.889166h1.574097c.169365 0 .348692 0 .348692-.199253s-.179328-.199253-.348692-.199253h-1.554172c-1.404732 0-2.550436-.956413-2.669988-2.291407h4.224159z%27/%3E%0A%3Cpath id=%27g4-110%27 d=%27m.876712-.587796c-.029888 .14944-.089664 .37858-.089664 .428394c0 .179328 .139477 .268991 .288917 .268991c.119552 0 .298879-.079701 .368618-.278954c.009963-.019925 .129514-.488169 .18929-.737235l.219178-.896638c.059776-.219178 .119552-.438356 .169365-.667497c.039851-.169365 .119552-.458281 .129514-.498132c.14944-.308842 .67746-1.215442 1.62391-1.215442c.448319 0 .537983 .368618 .537983 .697385c0 .617684-.488169 1.892902-.647572 2.321295c-.089664 .229141-.099626 .348692-.099626 .458281c0 .468244 .348692 .816936 .816936 .816936c.936488 0 1.305106-1.454545 1.305106-1.534247c0-.099626-.089664-.099626-.119552-.099626c-.099626 0-.099626 .029888-.14944 .179328c-.199253 .67746-.52802 1.235367-1.016189 1.235367c-.169365 0-.239103-.099626-.239103-.328767c0-.249066 .089664-.488169 .179328-.707347c.18929-.52802 .607721-1.62391 .607721-2.191781c0-.667497-.428394-1.066002-1.145704-1.066002c-.896638 0-1.384807 .637609-1.554172 .86675c-.049813-.557908-.458281-.86675-.916563-.86675s-.647572 .388543-.747198 .56787c-.159402 .33873-.298879 .926526-.298879 .966376c0 .099626 .099626 .099626 .119552 .099626c.099626 0 .109589-.009963 .169365-.229141c.169365-.707347 .368618-1.185554 .727273-1.185554c.199253 0 .308842 .129514 .308842 .458281c0 .209215-.029888 .318804-.159402 .836862l-.577833 2.30137z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page32%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-110%27/%3E%0A%3Cuse x=%278.747258%27 y=%270%27 xlink:href=%27%23g2-50%27/%3E%0A%3Cuse x=%2718.156372%27 y=%270%27 xlink:href=%27%23g0-78%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( n \in \mathbb{N} \)" style="height: 0.8118em; vertical-align: -0.0875em; display: inline-block" class="org-latex org-latex-inline" />. <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2743.83931pt%27 height=%2711.600283pt%27 viewBox=%27-.500002 -8.609621 43.83931 11.600283%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g7-48%27 d=%27m3.598506-2.224658c0-.767123-.09066-1.318057-.411457-1.806227c-.216189-.320797-.648568-.599751-1.206476-.599751c-1.617933 0-1.617933 1.903861-1.617933 2.405978s0 2.364134 1.617933 2.364134s1.617933-1.862017 1.617933-2.364134zm-1.617933 2.168867c-.320797 0-.746202-.188294-.885679-.760149c-.097634-.411457-.097634-.983313-.097634-1.499377c0-.509091 0-1.039103 .104608-1.422665c.146451-.550934 .592777-.697385 .878705-.697385c.376588 0 .739228 .230137 .864757 .63462c.111582 .376588 .118555 .878705 .118555 1.48543c0 .516065 0 1.03213-.09066 1.471482c-.139477 .63462-.613699 .788045-.892653 .788045z%27/%3E%0A%3Cpath id=%27g6-40%27 d=%27m3.297634 2.391034c0-.029888 0-.049813-.169365-.219178c-1.24533-1.255293-1.564134-3.138232-1.564134-4.662516c0-1.733499 .37858-3.466999 1.603985-4.712329c.129514-.119552 .129514-.139477 .129514-.169365c0-.069738-.039851-.099626-.099626-.099626c-.099626 0-.996264 .67746-1.58406 1.942715c-.508095 1.09589-.627646 2.201743-.627646 3.038605c0 .777086 .109589 1.982565 .657534 3.108344c.597758 1.225405 1.454545 1.872976 1.554172 1.872976c.059776 0 .099626-.029888 .099626-.099626z%27/%3E%0A%3Cpath id=%27g6-41%27 d=%27m2.879203-2.49066c0-.777086-.109589-1.982565-.657534-3.108344c-.597758-1.225405-1.454545-1.872976-1.554172-1.872976c-.059776 0-.099626 .039851-.099626 .099626c0 .029888 0 .049813 .18929 .229141c.976339 .986301 1.544209 2.570361 1.544209 4.652553c0 1.703611-.368618 3.457036-1.603985 4.712329c-.129514 .119552-.129514 .139477-.129514 .169365c0 .059776 .039851 .099626 .099626 .099626c.099626 0 .996264-.67746 1.58406-1.942715c.508095-1.09589 .627646-2.201743 .627646-3.038605z%27/%3E%0A%3Cpath id=%27g6-61%27 d=%27m6.844334-3.257783c.14944 0 .33873 0 .33873-.199253s-.18929-.199253-.328767-.199253h-5.967621c-.139477 0-.328767 0-.328767 .199253s.18929 .199253 .33873 .199253h5.947696zm.009963 1.932752c.139477 0 .328767 0 .328767-.199253s-.18929-.199253-.33873-.199253h-5.947696c-.14944 0-.33873 0-.33873 .199253s.18929 .199253 .328767 .199253h5.967621z%27/%3E%0A%3Cpath id=%27g4-102%27 d=%27m3.656289-3.985056h.856787c.199253 0 .298879 0 .298879-.199253c0-.109589-.099626-.109589-.268991-.109589h-.826899l.209215-1.135741c.039851-.209215 .179328-.916563 .239103-1.036115c.089664-.18929 .259029-.33873 .468244-.33873c.039851 0 .298879 0 .488169 .179328c-.438356 .039851-.537983 .388543-.537983 .537983c0 .229141 .179328 .348692 .368618 .348692c.259029 0 .547945-.219178 .547945-.597758c0-.458281-.458281-.687422-.86675-.687422c-.33873 0-.966376 .179328-1.265255 1.165629c-.059776 .209215-.089664 .308842-.328767 1.564134h-.687422c-.18929 0-.298879 0-.298879 .18929c0 .119552 .089664 .119552 .278954 .119552h.657534l-.747198 3.935243c-.179328 .966376-.348692 1.872976-.86675 1.872976c-.039851 0-.288917 0-.478207-.179328c.458281-.029888 .547945-.388543 .547945-.537983c0-.229141-.179328-.348692-.368618-.348692c-.259029 0-.547945 .219178-.547945 .597758c0 .448319 .438356 .687422 .846824 .687422c.547945 0 .946451-.587796 1.125778-.966376c.318804-.627646 .547945-1.833126 .557908-1.902864l.597758-3.158157z%27/%3E%0A%3Cpath id=%27g4-120%27 d=%27m3.327522-3.008717c.059776-.259029 .288917-1.175592 .986301-1.175592c.049813 0 .288917 0 .498132 .129514c-.278954 .049813-.478207 .298879-.478207 .537983c0 .159402 .109589 .348692 .37858 .348692c.219178 0 .537983-.179328 .537983-.577833c0-.518057-.587796-.657534-.926526-.657534c-.577833 0-.926526 .52802-1.046077 .757161c-.249066-.657534-.787049-.757161-1.075965-.757161c-1.036115 0-1.603985 1.285181-1.603985 1.534247c0 .099626 .099626 .099626 .119552 .099626c.079701 0 .109589-.019925 .129514-.109589c.33873-1.05604 .996264-1.305106 1.334994-1.305106c.18929 0 .537983 .089664 .537983 .667497c0 .308842-.169365 .976339-.537983 2.371108c-.159402 .617684-.508095 1.036115-.946451 1.036115c-.059776 0-.288917 0-.498132-.129514c.249066-.049813 .468244-.259029 .468244-.537983c0-.268991-.219178-.348692-.368618-.348692c-.298879 0-.547945 .259029-.547945 .577833c0 .458281 .498132 .657534 .936488 .657534c.657534 0 1.016189-.697385 1.046077-.757161c.119552 .368618 .478207 .757161 1.075965 .757161c1.026152 0 1.594022-1.285181 1.594022-1.534247c0-.099626-.089664-.099626-.119552-.099626c-.089664 0-.109589 .039851-.129514 .109589c-.328767 1.066002-1.006227 1.305106-1.325031 1.305106c-.388543 0-.547945-.318804-.547945-.657534c0-.219178 .059776-.438356 .169365-.876712l.33873-1.364882z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page33%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-102%27/%3E%0A%3Cuse x=%275.949947%27 y=%27-3.615364%27 xlink:href=%27%23g7-48%27/%3E%0A%3Cuse x=%2710.419317%27 y=%270%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%2714.293691%27 y=%270%27 xlink:href=%27%23g4-120%27/%3E%0A%3Cuse x=%2719.987623%27 y=%270%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%2726.629329%27 y=%270%27 xlink:href=%27%23g6-61%27/%3E%0A%3Cuse x=%2737.145409%27 y=%270%27 xlink:href=%27%23g4-120%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( f^0(x) = x \)" style="height: 1.1411em; vertical-align: -0.2942em; display: inline-block" class="org-latex org-latex-inline" /> is <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Return</span></code> and the
<code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Join</span></code> operation works becaus <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2798.366629pt%27 height=%2711.423182pt%27 viewBox=%27-.500002 -8.43252 98.366629 11.423182%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g7-43%27 d=%27m3.228892-1.57609h2.133998c.09066 0 .258032 0 .258032-.167372c0-.174346-.160399-.174346-.258032-.174346h-2.133998v-2.140971c0-.09066 0-.258032-.167372-.258032c-.174346 0-.174346 .160399-.174346 .258032v2.140971h-2.140971c-.09066 0-.258032 0-.258032 .167372c0 .174346 .160399 .174346 .258032 .174346h2.140971v2.140971c0 .09066 0 .258032 .167372 .258032c.174346 0 .174346-.160399 .174346-.258032v-2.140971z%27/%3E%0A%3Cpath id=%27g5-109%27 d=%27m3.02665-.564882c-.034869 .139477-.097634 .376588-.097634 .411457c0 .153425 .125529 .223163 .237111 .223163c.125529 0 .237111-.09066 .27198-.153425s.09066-.285928 .125529-.432379c.034869-.132503 .111582-.4533 .153425-.627646c.041843-.153425 .083686-.306849 .118555-.467248c.076712-.299875 .076712-.313823 .216189-.530012c.223163-.341719 .571856-.739228 1.115816-.739228c.390535 0 .411457 .320797 .411457 .488169c0 .418431-.299875 1.192528-.411457 1.48543c-.076712 .195268-.104608 .258032-.104608 .376588c0 .369614 .306849 .599751 .662516 .599751c.697385 0 1.004234-.962391 1.004234-1.066999c0-.09066-.09066-.09066-.111582-.09066c-.097634 0-.104608 .041843-.132503 .118555c-.160399 .557908-.460274 .843836-.739228 .843836c-.146451 0-.174346-.097634-.174346-.244085c0-.160399 .034869-.251059 .160399-.564882c.083686-.216189 .369614-.955417 .369614-1.345953c0-.111582 0-.404483-.258032-.606725c-.118555-.09066-.320797-.188294-.648568-.188294c-.627646 0-1.011208 .411457-1.234371 .704359c-.055791-.592777-.550934-.704359-.9066-.704359c-.578829 0-.969365 .355666-1.17858 .63462c-.048817-.481196-.460274-.63462-.746202-.63462c-.299875 0-.460274 .216189-.550934 .376588c-.153425 .258032-.251059 .655542-.251059 .690411c0 .09066 .097634 .09066 .118555 .09066c.097634 0 .104608-.020922 .153425-.209215c.104608-.411457 .237111-.753176 .509091-.753176c.18132 0 .230137 .153425 .230137 .341719c0 .132503-.062765 .390535-.111582 .578829s-.118555 .474222-.153425 .627646l-.223163 .892653c-.027895 .09066-.069738 .265006-.069738 .285928c0 .153425 .125529 .223163 .237111 .223163c.125529 0 .237111-.09066 .27198-.153425s.09066-.285928 .125529-.432379c.034869-.132503 .111582-.4533 .153425-.627646c.041843-.153425 .083686-.306849 .118555-.467248c.076712-.285928 .09066-.341719 .292902-.627646c.195268-.278954 .523039-.641594 1.046077-.641594c.404483 0 .411457 .355666 .411457 .488169c0 .174346-.020922 .265006-.118555 .655542l-.292902 1.171606z%27/%3E%0A%3Cpath id=%27g5-110%27 d=%27m.850809-.439352c-.027895 .09066-.069738 .265006-.069738 .285928c0 .153425 .125529 .223163 .237111 .223163c.125529 0 .237111-.09066 .27198-.153425s.09066-.285928 .125529-.432379c.034869-.132503 .111582-.4533 .153425-.627646c.041843-.153425 .083686-.306849 .118555-.467248c.076712-.285928 .09066-.341719 .292902-.627646c.195268-.278954 .523039-.641594 1.046077-.641594c.404483 0 .411457 .355666 .411457 .488169c0 .418431-.299875 1.192528-.411457 1.48543c-.076712 .195268-.104608 .258032-.104608 .376588c0 .369614 .306849 .599751 .662516 .599751c.697385 0 1.004234-.962391 1.004234-1.066999c0-.09066-.09066-.09066-.111582-.09066c-.097634 0-.104608 .041843-.132503 .118555c-.160399 .557908-.460274 .843836-.739228 .843836c-.146451 0-.174346-.097634-.174346-.244085c0-.160399 .034869-.251059 .160399-.564882c.083686-.216189 .369614-.955417 .369614-1.345953c0-.676463-.536986-.795019-.9066-.795019c-.578829 0-.969365 .355666-1.17858 .63462c-.048817-.481196-.460274-.63462-.746202-.63462c-.299875 0-.460274 .216189-.550934 .376588c-.153425 .258032-.251059 .655542-.251059 .690411c0 .09066 .097634 .09066 .118555 .09066c.097634 0 .104608-.020922 .153425-.209215c.104608-.411457 .237111-.753176 .509091-.753176c.18132 0 .230137 .153425 .230137 .341719c0 .132503-.062765 .390535-.111582 .578829s-.118555 .474222-.153425 .627646l-.223163 .892653z%27/%3E%0A%3Cpath id=%27g6-40%27 d=%27m3.297634 2.391034c0-.029888 0-.049813-.169365-.219178c-1.24533-1.255293-1.564134-3.138232-1.564134-4.662516c0-1.733499 .37858-3.466999 1.603985-4.712329c.129514-.119552 .129514-.139477 .129514-.169365c0-.069738-.039851-.099626-.099626-.099626c-.099626 0-.996264 .67746-1.58406 1.942715c-.508095 1.09589-.627646 2.201743-.627646 3.038605c0 .777086 .109589 1.982565 .657534 3.108344c.597758 1.225405 1.454545 1.872976 1.554172 1.872976c.059776 0 .099626-.029888 .099626-.099626z%27/%3E%0A%3Cpath id=%27g6-41%27 d=%27m2.879203-2.49066c0-.777086-.109589-1.982565-.657534-3.108344c-.597758-1.225405-1.454545-1.872976-1.554172-1.872976c-.059776 0-.099626 .039851-.099626 .099626c0 .029888 0 .049813 .18929 .229141c.976339 .986301 1.544209 2.570361 1.544209 4.652553c0 1.703611-.368618 3.457036-1.603985 4.712329c-.129514 .119552-.129514 .139477-.129514 .169365c0 .059776 .039851 .099626 .099626 .099626c.099626 0 .996264-.67746 1.58406-1.942715c.508095-1.09589 .627646-2.201743 .627646-3.038605z%27/%3E%0A%3Cpath id=%27g6-61%27 d=%27m6.844334-3.257783c.14944 0 .33873 0 .33873-.199253s-.18929-.199253-.328767-.199253h-5.967621c-.139477 0-.328767 0-.328767 .199253s.18929 .199253 .33873 .199253h5.947696zm.009963 1.932752c.139477 0 .328767 0 .328767-.199253s-.18929-.199253-.33873-.199253h-5.947696c-.14944 0-.33873 0-.33873 .199253s.18929 .199253 .328767 .199253h5.967621z%27/%3E%0A%3Cpath id=%27g4-102%27 d=%27m3.656289-3.985056h.856787c.199253 0 .298879 0 .298879-.199253c0-.109589-.099626-.109589-.268991-.109589h-.826899l.209215-1.135741c.039851-.209215 .179328-.916563 .239103-1.036115c.089664-.18929 .259029-.33873 .468244-.33873c.039851 0 .298879 0 .488169 .179328c-.438356 .039851-.537983 .388543-.537983 .537983c0 .229141 .179328 .348692 .368618 .348692c.259029 0 .547945-.219178 .547945-.597758c0-.458281-.458281-.687422-.86675-.687422c-.33873 0-.966376 .179328-1.265255 1.165629c-.059776 .209215-.089664 .308842-.328767 1.564134h-.687422c-.18929 0-.298879 0-.298879 .18929c0 .119552 .089664 .119552 .278954 .119552h.657534l-.747198 3.935243c-.179328 .966376-.348692 1.872976-.86675 1.872976c-.039851 0-.288917 0-.478207-.179328c.458281-.029888 .547945-.388543 .547945-.537983c0-.229141-.179328-.348692-.368618-.348692c-.259029 0-.547945 .219178-.547945 .597758c0 .448319 .438356 .687422 .846824 .687422c.547945 0 .946451-.587796 1.125778-.966376c.318804-.627646 .547945-1.833126 .557908-1.902864l.597758-3.158157z%27/%3E%0A%3Cpath id=%27g4-120%27 d=%27m3.327522-3.008717c.059776-.259029 .288917-1.175592 .986301-1.175592c.049813 0 .288917 0 .498132 .129514c-.278954 .049813-.478207 .298879-.478207 .537983c0 .159402 .109589 .348692 .37858 .348692c.219178 0 .537983-.179328 .537983-.577833c0-.518057-.587796-.657534-.926526-.657534c-.577833 0-.926526 .52802-1.046077 .757161c-.249066-.657534-.787049-.757161-1.075965-.757161c-1.036115 0-1.603985 1.285181-1.603985 1.534247c0 .099626 .099626 .099626 .119552 .099626c.079701 0 .109589-.019925 .129514-.109589c.33873-1.05604 .996264-1.305106 1.334994-1.305106c.18929 0 .537983 .089664 .537983 .667497c0 .308842-.169365 .976339-.537983 2.371108c-.159402 .617684-.508095 1.036115-.946451 1.036115c-.059776 0-.288917 0-.498132-.129514c.249066-.049813 .468244-.259029 .468244-.537983c0-.268991-.219178-.348692-.368618-.348692c-.298879 0-.547945 .259029-.547945 .577833c0 .458281 .498132 .657534 .936488 .657534c.657534 0 1.016189-.697385 1.046077-.757161c.119552 .368618 .478207 .757161 1.075965 .757161c1.026152 0 1.594022-1.285181 1.594022-1.534247c0-.099626-.089664-.099626-.119552-.099626c-.089664 0-.109589 .039851-.129514 .109589c-.328767 1.066002-1.006227 1.305106-1.325031 1.305106c-.388543 0-.547945-.318804-.547945-.657534c0-.219178 .059776-.438356 .169365-.876712l.33873-1.364882z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page34%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-102%27/%3E%0A%3Cuse x=%275.949947%27 y=%27-3.615364%27 xlink:href=%27%23g5-110%27/%3E%0A%3Cuse x=%2711.37294%27 y=%270%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%2715.247314%27 y=%270%27 xlink:href=%27%23g4-102%27/%3E%0A%3Cuse x=%2721.197261%27 y=%27-3.615364%27 xlink:href=%27%23g5-109%27/%3E%0A%3Cuse x=%2728.764997%27 y=%270%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%2732.639371%27 y=%270%27 xlink:href=%27%23g4-120%27/%3E%0A%3Cuse x=%2738.333303%27 y=%270%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%2742.207677%27 y=%270%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%2748.849383%27 y=%270%27 xlink:href=%27%23g6-61%27/%3E%0A%3Cuse x=%2759.365463%27 y=%270%27 xlink:href=%27%23g4-102%27/%3E%0A%3Cuse x=%2765.31541%27 y=%27-3.615364%27 xlink:href=%27%23g5-110%27/%3E%0A%3Cuse x=%2770.240273%27 y=%27-3.615364%27 xlink:href=%27%23g7-43%27/%3E%0A%3Cuse x=%2776.356256%27 y=%27-3.615364%27 xlink:href=%27%23g5-109%27/%3E%0A%3Cuse x=%2783.923988%27 y=%270%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%2787.798362%27 y=%270%27 xlink:href=%27%23g4-120%27/%3E%0A%3Cuse x=%2793.492294%27 y=%270%27 xlink:href=%27%23g6-41%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( f^n(f^m(x)) = f^{n+m}(x) \)" style="height: 1.1237em; vertical-align: -0.2942em; display: inline-block" class="org-latex org-latex-inline" />.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">data</span> <span style="color: #531ab6; font-weight: bold;">Free</span> f x <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">Return</span> x <span style="color: #3548cf;">|</span> <span style="color: #531ab6; font-weight: bold;">Join</span> (f (<span style="color: #531ab6; font-weight: bold;">Free</span> f x))
  <span style="color: #005e8b; font-weight: bold;">deriving</span> <span style="color: #531ab6; font-weight: bold;">Functor</span>
</code></pre>
</div>
</div>
</div>
<div id="outline-container-org5e6421c" class="outline-2">
<h2 id="org5e6421c"><span class="section-number-2">7.</span> Type class prolog</h2>
<div class="outline-text-2" id="text-7">
<p>
Before we go and play fancy typeclass prolog, let's think a bit about what these
words even mean.
</p>

<p>
<b>Prolog</b> is a programming language where we program by stating derivation
rules<span class="sidenote-ref"
    onclick="this.nextElementSibling.classList.toggle('active')">6</span><span
    class="sidenote"><sup>6</sup>
Derivation rules as in the type of stuff you see in my post on <a href="blog.Sequent.html#ID-a8bc74ff-eca5-4848-8ce9-f1c56170d4d4">formal
logic and type systems</a>.
</span>. We give these derivation rules to a proof search engine and trick
it into computing by giving it a goal. For example, let's look at the
<code class="src src-haskell">append</code> function.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #8f0075;">append</span> <span style="color: #3548cf;">::</span> [x] <span style="color: #3548cf;">-&gt;</span> [x] <span style="color: #3548cf;">-&gt;</span> [x]
<span style="color: #8f0075;">append</span> <span style="color: #531ab6; font-weight: bold;">[]</span> ys <span style="color: #3548cf;">=</span> ys
<span style="color: #8f0075;">append</span> (x<span style="color: #531ab6; font-weight: bold;">:</span>xs) ys <span style="color: #3548cf;">=</span> x<span style="color: #531ab6; font-weight: bold;">:</span>(append xs ys)
</code></pre>
</div>

<p>
In haskell, we would define the function by pattern matching and
recursion.<span class="sidenote-ref"
    onclick="this.nextElementSibling.classList.toggle('active')">7</span><span
    class="sidenote"><sup>7</sup>
This doesn't say much, because we always do that.
</span> In prolog, we would say "appending the empty list to <code>L</code> equals <code>L</code>
and appending a non empty list to <code>L</code> equals the head element followed by the result of
the sub-append when appending the tail to L equals the sub-append.
</p>

<div class="org-src-container">
<pre class="src src-prolog" id="org3e1ca59"><code><span style="color: #8f0075;">append</span>(<span style="color: #005e8b; font-weight: bold;">[]</span>, <span style="color: #3548cf;">L</span>, <span style="color: #3548cf;">L</span>).
<span style="color: #8f0075;">append</span>(<span style="color: #005e8b; font-weight: bold;">[</span><span style="color: #3548cf;">H</span><span style="color: #005e8b; font-weight: bold;">|</span><span style="color: #3548cf;">T</span><span style="color: #005e8b; font-weight: bold;">]</span>, <span style="color: #3548cf;">L</span>, <span style="color: #005e8b; font-weight: bold;">[</span><span style="color: #3548cf;">H</span><span style="color: #005e8b; font-weight: bold;">|</span><span style="color: #3548cf;">S</span><span style="color: #005e8b; font-weight: bold;">]</span>) :- append(<span style="color: #3548cf;">T</span>, <span style="color: #3548cf;">L</span>, <span style="color: #3548cf;">S</span>).
</code></pre>
</div>

<p>
The first line is simply the fact that appending the empty list does nothing and
the second is the recursive case. Note that the condition after the <code>:-</code> is the
conditions that must be valid for the whole judgment to resolve to true. When
the proof search engine of prolog tries to solve "does appending <code>A</code> to <code>B</code> give me
the list <code>C</code>?", it starts by looking at which clauses are consistent with what it
currently knows about the arguments, then it tries to solve the conditions.
</p>

<p>
<b>Typeclasses</b> are Haskell's mechanism for having arguments that are autofilled by
the compiler<span class="sidenote-ref"
    onclick="this.nextElementSibling.classList.toggle('active')">8</span><span
    class="sidenote"><sup>8</sup>
This is more often described as a "mechanism for ad-hoc polymorphism", but
ad-hoc polymorphism really is just "fill this argument with a value that is
consistent with the type".
</span>. Out of the box, typeclasses don't let us do crazy stuff
(typeclass resolution guarantees termination) but once we weaken their
guarantees (and strengthen ourselves) with a bunch of extensions , we end up
with a general purpose logic programming language that is executed at Haskell's
compile time.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #595959; font-style: italic;">-- </span><span style="color: #595959; font-style: italic;">Here
</span><span style="color: #005e8b; font-weight: bold;">class</span> <span style="color: #531ab6; font-weight: bold;">Append</span> (a <span style="color: #3548cf;">::</span> [k]) (b <span style="color: #3548cf;">::</span> [k]) (c <span style="color: #3548cf;">::</span> [k]) <span style="color: #3548cf;">|</span> a b <span style="color: #3548cf;">-&gt;</span> c <span style="color: #005e8b; font-weight: bold;">where</span>
  appendProxy <span style="color: #3548cf;">::</span> <span style="color: #531ab6; font-weight: bold;">Proxy</span> a <span style="color: #3548cf;">-&gt;</span> <span style="color: #531ab6; font-weight: bold;">Proxy</span> b <span style="color: #3548cf;">-&gt;</span> <span style="color: #531ab6; font-weight: bold;">Proxy</span> c
  appendProxy <span style="color: #005e8b; font-weight: bold;">_</span> <span style="color: #005e8b; font-weight: bold;">_</span> <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">Proxy</span>

<span style="color: #005e8b; font-weight: bold;">instance</span> <span style="color: #531ab6; font-weight: bold;">Append</span> '<span style="color: #531ab6; font-weight: bold;">[]</span> a a
<span style="color: #005e8b; font-weight: bold;">instance</span> <span style="color: #531ab6; font-weight: bold;">Append</span> t m r <span style="color: #3548cf;">=&gt;</span> <span style="color: #531ab6; font-weight: bold;">Append</span> (h'<span style="color: #531ab6; font-weight: bold;">:</span>t) m (h'<span style="color: #531ab6; font-weight: bold;">:</span>r)
</code></pre>
</div>

<p>
Now, you can execute the following in a REPL to see what Haskell' constraint
solver found for the value.
</p>

<div class="org-src-container">
<pre class="src src-text"><code>:set -XDataKinds
:t appendProxy (Proxy :: Proxy '[1, 2]) (Proxy :: Proxy '[1, 2])
</code></pre>
</div>

<p>
In the following section, we are going to use type classes to have the Haskell
compiler generate code for us.
</p>
</div>
</div>
<div id="outline-container-org217c622" class="outline-2">
<h2 id="org217c622"><span class="section-number-2">8.</span> Inclusion of functors</h2>
<div class="outline-text-2" id="text-8">
<p>
The first 
</p>

<p>
For type inference to work well for us, we want our "effect sets" relations to
be computed by Haskell's instance resolution system. We will define a typeclass
for every relation we wish to have on effect sets. We will then define instances
(derivation rules) through with the Haskell compiler will generate code for us.
</p>


<p>
We first need an "is-element" relation(it is very similar to the <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%278.748747pt%27 height=%276.760354pt%27 viewBox=%27-.500002 -5.870837 8.748747 6.760354%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g2-30%27 d=%27m3.706102-2.480697c1.653798-.308842 2.500623-.926526 2.938979-1.733499c.199253-.37858 .268991-.846824 .268991-.936488c0-.14944-.109589-.219178-.199253-.219178c-.169365 0-.199253 .159402-.219178 .288917c-.288917 1.793275-2.30137 2.381071-5.379826 2.400996c-.099626 0-.288917 0-.288917 .199253s.129514 .199253 .498132 .199253c1.036115 .009963 2.072229 .079701 3.068493 .368618c1.882939 .557908 2.042341 1.633873 2.11208 2.092154c.009963 .059776 .039851 .219178 .209215 .219178c.089664 0 .199253-.059776 .199253-.219178c0-.059776-.059776-1.05604-.966376-1.763387c-.627646-.488169-1.364882-.727273-2.241594-.896638z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page37%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g2-30%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( \prec \)" style="height: 0.6650em; vertical-align: -0.0875em; display: inline-block" class="org-latex org-latex-inline" />
typeclass they use in <a href="#citeproc_bib_item_1">[1]</a>) which will be witnessed by a way to
turn an <code class="src src-haskell"><span style="color: #8f0075;">f</span> x</code> into a <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Sum</span> fs x</code> whenever <code class="src src-haskell">f <span style="color: #8f0075;">:&#8712;:</span> fs</code>.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">class</span> (e <span style="color: #3548cf;">::</span> <span style="color: #3548cf;">*</span> <span style="color: #3548cf;">-&gt;</span> <span style="color: #3548cf;">*</span>) <span style="color: #531ab6; font-weight: bold;">:&#8712;:</span> (es <span style="color: #3548cf;">::</span> [<span style="color: #3548cf;">*</span> <span style="color: #3548cf;">-&gt;</span> <span style="color: #3548cf;">*</span>]) <span style="color: #005e8b; font-weight: bold;">where</span>
  inject <span style="color: #3548cf;">::</span> e x <span style="color: #3548cf;">-&gt;</span> <span style="color: #531ab6; font-weight: bold;">Sum</span> es x
</code></pre>
</div>

<p>
To make the compiler automatically verify this relation, we will give it
derivation rules:
</p>

<p>
An effect is an element of an effect set if it is the first element of the set.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">instance</span> <span style="color: #005f5f;">{-# OVERLAPPING #-}</span> f <span style="color: #531ab6; font-weight: bold;">:&#8712;:</span> (f '<span style="color: #531ab6; font-weight: bold;">:</span> fs) <span style="color: #005e8b; font-weight: bold;">where</span>
  inject <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">Head</span>
</code></pre>
</div>

<p>
An effect is also an element of an effect set if it is an element of the tail of
the set.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">instance</span> f <span style="color: #531ab6; font-weight: bold;">:&#8712;:</span> fs <span style="color: #3548cf;">=&gt;</span> f <span style="color: #531ab6; font-weight: bold;">:&#8712;:</span> (g'<span style="color: #531ab6; font-weight: bold;">:</span>fs) <span style="color: #005e8b; font-weight: bold;">where</span>
  inject <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">Tail</span> <span style="color: #3548cf;">.</span> inject
</code></pre>
</div>

<p>
Here is an example of this typeclass in action. We use it to automatically
"cast" a term to a "bigger" type.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">data</span> <span style="color: #531ab6; font-weight: bold;">A</span> s <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">A</span> s
<span style="color: #005e8b; font-weight: bold;">data</span> <span style="color: #531ab6; font-weight: bold;">B</span> s <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">B</span> s

<span style="color: #8f0075;">test1</span> <span style="color: #3548cf;">::</span> <span style="color: #531ab6; font-weight: bold;">Sum</span> '[<span style="color: #531ab6; font-weight: bold;">A</span>, <span style="color: #531ab6; font-weight: bold;">B</span>] <span style="color: #531ab6; font-weight: bold;">Int</span>
<span style="color: #8f0075;">test1</span> <span style="color: #3548cf;">=</span> inject <span style="color: #3548cf;">$</span> <span style="color: #531ab6; font-weight: bold;">B</span> 12
</code></pre>
</div>
</div>
</div>
<div id="outline-container-orgb7971c0" class="outline-2">
<h2 id="orgb7971c0"><span class="section-number-2">9.</span> asdfasdf</h2>
<div class="outline-text-2" id="text-9">
<p>
One of the ideas explained in the paper <a href="#citeproc_bib_item_1">[1]</a> is that we can
create an extensible syntax tree by representing each constructor with a
functor, by combining constructors with sums of functors and by making this type
recusive through the fixpoint operator for functors.
</p>

<p>
The fixpoint operator and an example of a constructor we might want to add to a
syntax tree:
</p>


<p>
We will reuse the idea of sums of functors to represent different effects (each
functor is responsible for an effect), but instead of making the tree recursive
through the fixpoint operator, we will take the free monad from the sum of
functors.
</p>
</div>
</div>
<div id="outline-container-orgcd0dd9a" class="outline-2">
<h2 id="orgcd0dd9a"><span class="section-number-2">10.</span> Subset relation</h2>
<div class="outline-text-2" id="text-10">
<p>
With the help of our membership relation, we can define a new relation which
will let us express the fact an effect <b>set</b> is smaller than an other effect set.
This relation will be witnessed by a function very similar to
<code class="src src-haskell">inject</code>, apart for the fact it converts from a <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Sum</span></code>.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">class</span> (l <span style="color: #3548cf;">::</span> [<span style="color: #3548cf;">*</span> <span style="color: #3548cf;">-&gt;</span> <span style="color: #3548cf;">*</span>]) <span style="color: #531ab6; font-weight: bold;">:&#8838;:</span> (r <span style="color: #3548cf;">::</span> [<span style="color: #3548cf;">*</span> <span style="color: #3548cf;">-&gt;</span> <span style="color: #3548cf;">*</span>]) <span style="color: #005e8b; font-weight: bold;">where</span>
  permute <span style="color: #3548cf;">::</span> <span style="color: #531ab6; font-weight: bold;">Sum</span> l x <span style="color: #3548cf;">-&gt;</span> <span style="color: #531ab6; font-weight: bold;">Sum</span> r x
</code></pre>
</div>

<p>
The empty set is a subset of everything (this is the base case of our typeclass
recursion).
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">instance</span> '<span style="color: #531ab6; font-weight: bold;">[]</span> <span style="color: #531ab6; font-weight: bold;">:&#8838;:</span> fs <span style="color: #005e8b; font-weight: bold;">where</span>
  <span style="color: #595959; font-style: italic;">-- </span><span style="color: #595959; font-style: italic;">no constructors for Sum '[] x
</span>  permute <span style="color: #005e8b; font-weight: bold;">_</span> <span style="color: #3548cf;">=</span> error <span style="color: #a0132f;">"impossible"</span>
</code></pre>
</div>

<p>
If the first element of the LHS set is a member of the RHS set and the last
elements of the LHS set are a subset of the RHS, then the LHS is a subset of the
RHS. (this is the induction case of our typeclass recursion)
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">instance</span> (f <span style="color: #531ab6; font-weight: bold;">:&#8712;:</span> gs, fs <span style="color: #531ab6; font-weight: bold;">:&#8838;:</span> gs) <span style="color: #3548cf;">=&gt;</span> (f '<span style="color: #531ab6; font-weight: bold;">:</span> fs) <span style="color: #531ab6; font-weight: bold;">:&#8838;:</span> gs <span style="color: #005e8b; font-weight: bold;">where</span>
  permute (<span style="color: #531ab6; font-weight: bold;">Head</span> h) <span style="color: #3548cf;">=</span> inject h
  permute (<span style="color: #531ab6; font-weight: bold;">Tail</span> t) <span style="color: #3548cf;">=</span> permute t
</code></pre>
</div>

<p>
Here is an example of ho we might use this relation:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">data</span> <span style="color: #531ab6; font-weight: bold;">C</span> s <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">C</span> s

<span style="color: #8f0075;">test2</span> <span style="color: #3548cf;">::</span> <span style="color: #531ab6; font-weight: bold;">Sum</span> '[<span style="color: #531ab6; font-weight: bold;">B</span>, <span style="color: #531ab6; font-weight: bold;">C</span>, <span style="color: #531ab6; font-weight: bold;">A</span>] <span style="color: #531ab6; font-weight: bold;">Int</span>
<span style="color: #8f0075;">test2</span> <span style="color: #3548cf;">=</span> permute test1
</code></pre>
</div>

<p>
Because of the way we set up our derivation rules, whenever all the functors in
a set are known, the instance search algorithm will automatically generate the
necessary code to rearange the order of a functor sum.
</p>
</div>
</div>
<div id="outline-container-org4bd38e1" class="outline-2">
<h2 id="org4bd38e1"><span class="section-number-2">11.</span> Effect type constructor</h2>
<div class="outline-text-2" id="text-11">
<p>
Now we ave a way to represent effects (as sum of functors), let's tie them in a
circle using the free monad. The following construction is equivalent to the
free monad on the sum of the effects.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">data</span> <span style="color: #531ab6; font-weight: bold;">Eff</span> (fs <span style="color: #3548cf;">::</span> [<span style="color: #3548cf;">*</span> <span style="color: #3548cf;">-&gt;</span> <span style="color: #3548cf;">*</span>]) (x <span style="color: #3548cf;">::</span> <span style="color: #3548cf;">*</span>) <span style="color: #005e8b; font-weight: bold;">where</span>
  <span style="color: #531ab6; font-weight: bold;">Pure</span> <span style="color: #3548cf;">::</span> x <span style="color: #3548cf;">-&gt;</span> <span style="color: #531ab6; font-weight: bold;">Eff</span> fs x
  <span style="color: #531ab6; font-weight: bold;">Impure</span> <span style="color: #3548cf;">::</span> <span style="color: #531ab6; font-weight: bold;">Sum</span> fs (<span style="color: #531ab6; font-weight: bold;">Eff</span> fs x) <span style="color: #3548cf;">-&gt;</span> <span style="color: #531ab6; font-weight: bold;">Eff</span> fs x

<span style="color: #595959; font-style: italic;">-- </span><span style="color: #595959; font-style: italic;">To unwrapp empty effects into pure values
</span><span style="color: #8f0075;">unwrapEff</span> <span style="color: #3548cf;">::</span> <span style="color: #531ab6; font-weight: bold;">Eff</span> '<span style="color: #531ab6; font-weight: bold;">[]</span> x <span style="color: #3548cf;">-&gt;</span> x
<span style="color: #8f0075;">unwrapEff</span> (<span style="color: #531ab6; font-weight: bold;">Impure</span> <span style="color: #005e8b; font-weight: bold;">_</span>) <span style="color: #3548cf;">=</span> error <span style="color: #a0132f;">"impossible"</span>
<span style="color: #8f0075;">unwrapEff</span> (<span style="color: #531ab6; font-weight: bold;">Pure</span> x) <span style="color: #3548cf;">=</span> x
</code></pre>
</div>

<p>
This construction will let us sequence many effects together. Another thing to
notice is that
</p>
</div>
</div>
<div id="outline-container-orgf2a7c7d" class="outline-2">
<h2 id="orgf2a7c7d"><span class="section-number-2">12.</span> Free monoids, free monads, <code class="src src-haskell">[x]</code> and <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Eff</span> fs</code></h2>
<div class="outline-text-2" id="text-12">
<p>
We all know the meme phrase "a monad is just a monoid in the category of
endofunctors", but what does it tell us about the free monad? It is just the
free monoid in the category of endofunctors. 
</p>
</div>
<div id="outline-container-org91e7ccd" class="outline-3">
<h3 id="org91e7ccd"><span class="section-number-3">12.1.</span> What even is a free monoid?</h3>
<div class="outline-text-3" id="text-12-1">
<p>
A monoid is an object with an associative operation <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%275.981339pt%27 height=%275.635407pt%27 viewBox=%27-.500002 -5.135405 5.981339 5.635407%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g2-3%27 d=%27m2.739726-4.254047c.009963-.139477 .009963-.37858-.249066-.37858c-.159402 0-.288917 .129514-.259029 .259029v.129514l.139477 1.544209l-1.275218-.926526c-.089664-.049813-.109589-.069738-.179328-.069738c-.139477 0-.268991 .139477-.268991 .278954c0 .159402 .099626 .199253 .199253 .249066l1.414695 .67746l-1.374844 .667497c-.159402 .079701-.239103 .119552-.239103 .268991s.129514 .278954 .268991 .278954c.069738 0 .089664 0 .33873-.18929l1.115816-.806974l-.14944 1.673724c0 .209215 .179328 .259029 .259029 .259029c.119552 0 .268991-.069738 .268991-.259029l-.14944-1.673724l1.275218 .926526c.089664 .049813 .109589 .069738 .179328 .069738c.139477 0 .268991-.139477 .268991-.278954c0-.14944-.089664-.199253-.209215-.259029c-.597758-.298879-.617684-.298879-1.404732-.667497l1.374844-.667497c.159402-.079701 .239103-.119552 .239103-.268991s-.129514-.278954-.268991-.278954c-.069738 0-.089664 0-.33873 .18929l-1.115816 .806974l.139477-1.554172z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page44%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g2-3%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( * \)" style="height: 0.5543em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" /> and a neutral
element <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%275.981339pt%27 height=%277.42037pt%27 viewBox=%27-.500002 -6.920368 5.981339 7.42037%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g6-49%27 d=%27m2.929016-6.37609c0-.239103 0-.259029-.229141-.259029c-.617684 .637609-1.494396 .637609-1.8132 .637609v.308842c.199253 0 .787049 0 1.305106-.259029v5.160648c0 .358655-.029888 .478207-.926526 .478207h-.318804v.308842c.348692-.029888 1.215442-.029888 1.613948-.029888s1.265255 0 1.613948 .029888v-.308842h-.318804c-.896638 0-.926526-.109589-.926526-.478207v-5.589041z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page59%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g6-49%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( 1 \)" style="height: 0.7299em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" />. This means that for every <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2723.708776pt%27 height=%279.85568pt%27 viewBox=%27-.500002 -7.4185 23.708776 9.85568%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-59%27 d=%27m2.022416-.009963c0-.657534-.249066-1.046077-.637609-1.046077c-.328767 0-.52802 .249066-.52802 .52802c0 .268991 .199253 .52802 .52802 .52802c.119552 0 .249066-.039851 .348692-.129514c.029888-.019925 .039851-.029888 .049813-.029888s.019925 .009963 .019925 .14944c0 .737235-.348692 1.334994-.67746 1.663761c-.109589 .109589-.109589 .129514-.109589 .159402c0 .069738 .049813 .109589 .099626 .109589c.109589 0 .9066-.767123 .9066-1.932752z%27/%3E%0A%3Cpath id=%27g4-97%27 d=%27m3.716065-3.765878c-.179328-.368618-.468244-.637609-.916563-.637609c-1.165629 0-2.400996 1.464508-2.400996 2.919054c0 .936488 .547945 1.594022 1.325031 1.594022c.199253 0 .697385-.039851 1.295143-.747198c.079701 .418431 .428394 .747198 .9066 .747198c.348692 0 .577833-.229141 .737235-.547945c.169365-.358655 .298879-.966376 .298879-.986301c0-.099626-.089664-.099626-.119552-.099626c-.099626 0-.109589 .039851-.139477 .179328c-.169365 .647572-.348692 1.235367-.757161 1.235367c-.268991 0-.298879-.259029-.298879-.458281c0-.219178 .019925-.298879 .129514-.737235c.109589-.418431 .129514-.518057 .219178-.896638l.358655-1.39477c.069738-.278954 .069738-.298879 .069738-.33873c0-.169365-.119552-.268991-.288917-.268991c-.239103 0-.388543 .219178-.418431 .438356zm-.647572 2.580324c-.049813 .179328-.049813 .199253-.199253 .368618c-.438356 .547945-.846824 .707347-1.125778 .707347c-.498132 0-.637609-.547945-.637609-.936488c0-.498132 .318804-1.723537 .547945-2.181818c.308842-.587796 .757161-.956413 1.155666-.956413c.647572 0 .787049 .816936 .787049 .876712s-.019925 .119552-.029888 .169365l-.498132 1.952677z%27/%3E%0A%3Cpath id=%27g4-98%27 d=%27m2.381071-6.804483c0-.009963 0-.109589-.129514-.109589c-.229141 0-.956413 .079701-1.215442 .099626c-.079701 .009963-.18929 .019925-.18929 .199253c0 .119552 .089664 .119552 .239103 .119552c.478207 0 .498132 .069738 .498132 .169365c0 .069738-.089664 .408468-.139477 .617684l-.816936 3.247821c-.119552 .498132-.159402 .657534-.159402 1.006227c0 .946451 .52802 1.564134 1.265255 1.564134c1.175592 0 2.400996-1.484433 2.400996-2.919054c0-.9066-.52802-1.594022-1.325031-1.594022c-.458281 0-.86675 .288917-1.165629 .597758l.737235-2.998755zm-.936488 3.765878c.059776-.219178 .059776-.239103 .14944-.348692c.488169-.647572 .936488-.797011 1.195517-.797011c.358655 0 .627646 .298879 .627646 .936488c0 .587796-.328767 1.733499-.508095 2.11208c-.328767 .667497-.787049 1.026152-1.175592 1.026152c-.33873 0-.667497-.268991-.667497-1.006227c0-.18929 0-.37858 .159402-1.006227l.219178-.916563z%27/%3E%0A%3Cpath id=%27g4-99%27 d=%27m3.945205-3.785803c-.159402 0-.298879 0-.438356 .139477c-.159402 .14944-.179328 .318804-.179328 .388543c0 .239103 .179328 .348692 .368618 .348692c.288917 0 .557908-.239103 .557908-.637609c0-.488169-.468244-.856787-1.175592-.856787c-1.344956 0-2.669988 1.424658-2.669988 2.82939c0 .896638 .577833 1.683686 1.613948 1.683686c1.424658 0 2.261519-1.05604 2.261519-1.175592c0-.059776-.059776-.129514-.119552-.129514c-.049813 0-.069738 .019925-.129514 .099626c-.787049 .986301-1.872976 .986301-1.992528 .986301c-.627646 0-.896638-.488169-.896638-1.085928c0-.408468 .199253-1.374844 .537983-1.992528c.308842-.56787 .856787-.996264 1.404732-.996264c.33873 0 .71731 .129514 .856787 .398506z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page40%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-97%27/%3E%0A%3Cuse x=%275.266154%27 y=%270%27 xlink:href=%27%23g4-59%27/%3E%0A%3Cuse x=%279.693962%27 y=%270%27 xlink:href=%27%23g4-98%27/%3E%0A%3Cuse x=%2713.969596%27 y=%270%27 xlink:href=%27%23g4-59%27/%3E%0A%3Cuse x=%2718.397404%27 y=%270%27 xlink:href=%27%23g4-99%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( a, b, c \)" style="height: 0.9695em; vertical-align: -0.2397em; display: inline-block" class="org-latex org-latex-inline" />:
</p>

<p>
<img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%27344.711087pt%27 height=%2715.445832pt%27 viewBox=%27-.500002 -14.94583 344.711087 15.445832%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g2-3%27 d=%27m2.739726-4.254047c.009963-.139477 .009963-.37858-.249066-.37858c-.159402 0-.288917 .129514-.259029 .259029v.129514l.139477 1.544209l-1.275218-.926526c-.089664-.049813-.109589-.069738-.179328-.069738c-.139477 0-.268991 .139477-.268991 .278954c0 .159402 .099626 .199253 .199253 .249066l1.414695 .67746l-1.374844 .667497c-.159402 .079701-.239103 .119552-.239103 .268991s.129514 .278954 .268991 .278954c.069738 0 .089664 0 .33873-.18929l1.115816-.806974l-.14944 1.673724c0 .209215 .179328 .259029 .259029 .259029c.119552 0 .268991-.069738 .268991-.259029l-.14944-1.673724l1.275218 .926526c.089664 .049813 .109589 .069738 .179328 .069738c.139477 0 .268991-.139477 .268991-.278954c0-.14944-.089664-.199253-.209215-.259029c-.597758-.298879-.617684-.298879-1.404732-.667497l1.374844-.667497c.159402-.079701 .239103-.119552 .239103-.268991s-.129514-.278954-.268991-.278954c-.069738 0-.089664 0-.33873 .18929l-1.115816 .806974l.139477-1.554172z%27/%3E%0A%3Cpath id=%27g6-40%27 d=%27m3.297634 2.391034c0-.029888 0-.049813-.169365-.219178c-1.24533-1.255293-1.564134-3.138232-1.564134-4.662516c0-1.733499 .37858-3.466999 1.603985-4.712329c.129514-.119552 .129514-.139477 .129514-.169365c0-.069738-.039851-.099626-.099626-.099626c-.099626 0-.996264 .67746-1.58406 1.942715c-.508095 1.09589-.627646 2.201743-.627646 3.038605c0 .777086 .109589 1.982565 .657534 3.108344c.597758 1.225405 1.454545 1.872976 1.554172 1.872976c.059776 0 .099626-.029888 .099626-.099626z%27/%3E%0A%3Cpath id=%27g6-41%27 d=%27m2.879203-2.49066c0-.777086-.109589-1.982565-.657534-3.108344c-.597758-1.225405-1.454545-1.872976-1.554172-1.872976c-.059776 0-.099626 .039851-.099626 .099626c0 .029888 0 .049813 .18929 .229141c.976339 .986301 1.544209 2.570361 1.544209 4.652553c0 1.703611-.368618 3.457036-1.603985 4.712329c-.129514 .119552-.129514 .139477-.129514 .169365c0 .059776 .039851 .099626 .099626 .099626c.099626 0 .996264-.67746 1.58406-1.942715c.508095-1.09589 .627646-2.201743 .627646-3.038605z%27/%3E%0A%3Cpath id=%27g6-61%27 d=%27m6.844334-3.257783c.14944 0 .33873 0 .33873-.199253s-.18929-.199253-.328767-.199253h-5.967621c-.139477 0-.328767 0-.328767 .199253s.18929 .199253 .33873 .199253h5.947696zm.009963 1.932752c.139477 0 .328767 0 .328767-.199253s-.18929-.199253-.33873-.199253h-5.947696c-.14944 0-.33873 0-.33873 .199253s.18929 .199253 .328767 .199253h5.967621z%27/%3E%0A%3Cpath id=%27g4-97%27 d=%27m3.716065-3.765878c-.179328-.368618-.468244-.637609-.916563-.637609c-1.165629 0-2.400996 1.464508-2.400996 2.919054c0 .936488 .547945 1.594022 1.325031 1.594022c.199253 0 .697385-.039851 1.295143-.747198c.079701 .418431 .428394 .747198 .9066 .747198c.348692 0 .577833-.229141 .737235-.547945c.169365-.358655 .298879-.966376 .298879-.986301c0-.099626-.089664-.099626-.119552-.099626c-.099626 0-.109589 .039851-.139477 .179328c-.169365 .647572-.348692 1.235367-.757161 1.235367c-.268991 0-.298879-.259029-.298879-.458281c0-.219178 .019925-.298879 .129514-.737235c.109589-.418431 .129514-.518057 .219178-.896638l.358655-1.39477c.069738-.278954 .069738-.298879 .069738-.33873c0-.169365-.119552-.268991-.288917-.268991c-.239103 0-.388543 .219178-.418431 .438356zm-.647572 2.580324c-.049813 .179328-.049813 .199253-.199253 .368618c-.438356 .547945-.846824 .707347-1.125778 .707347c-.498132 0-.637609-.547945-.637609-.936488c0-.498132 .318804-1.723537 .547945-2.181818c.308842-.587796 .757161-.956413 1.155666-.956413c.647572 0 .787049 .816936 .787049 .876712s-.019925 .119552-.029888 .169365l-.498132 1.952677z%27/%3E%0A%3Cpath id=%27g4-98%27 d=%27m2.381071-6.804483c0-.009963 0-.109589-.129514-.109589c-.229141 0-.956413 .079701-1.215442 .099626c-.079701 .009963-.18929 .019925-.18929 .199253c0 .119552 .089664 .119552 .239103 .119552c.478207 0 .498132 .069738 .498132 .169365c0 .069738-.089664 .408468-.139477 .617684l-.816936 3.247821c-.119552 .498132-.159402 .657534-.159402 1.006227c0 .946451 .52802 1.564134 1.265255 1.564134c1.175592 0 2.400996-1.484433 2.400996-2.919054c0-.9066-.52802-1.594022-1.325031-1.594022c-.458281 0-.86675 .288917-1.165629 .597758l.737235-2.998755zm-.936488 3.765878c.059776-.219178 .059776-.239103 .14944-.348692c.488169-.647572 .936488-.797011 1.195517-.797011c.358655 0 .627646 .298879 .627646 .936488c0 .587796-.328767 1.733499-.508095 2.11208c-.328767 .667497-.787049 1.026152-1.175592 1.026152c-.33873 0-.667497-.268991-.667497-1.006227c0-.18929 0-.37858 .159402-1.006227l.219178-.916563z%27/%3E%0A%3Cpath id=%27g4-99%27 d=%27m3.945205-3.785803c-.159402 0-.298879 0-.438356 .139477c-.159402 .14944-.179328 .318804-.179328 .388543c0 .239103 .179328 .348692 .368618 .348692c.288917 0 .557908-.239103 .557908-.637609c0-.488169-.468244-.856787-1.175592-.856787c-1.344956 0-2.669988 1.424658-2.669988 2.82939c0 .896638 .577833 1.683686 1.613948 1.683686c1.424658 0 2.261519-1.05604 2.261519-1.175592c0-.059776-.059776-.129514-.119552-.129514c-.049813 0-.069738 .019925-.129514 .099626c-.787049 .986301-1.872976 .986301-1.992528 .986301c-.627646 0-.896638-.488169-.896638-1.085928c0-.408468 .199253-1.374844 .537983-1.992528c.308842-.56787 .856787-.996264 1.404732-.996264c.33873 0 .71731 .129514 .856787 .398506z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page41%27%3E%0A%3Cuse x=%27124.793803%27 y=%27-2.49066%27 xlink:href=%27%23g4-97%27/%3E%0A%3Cuse x=%27132.273823%27 y=%27-2.49066%27 xlink:href=%27%23g2-3%27/%3E%0A%3Cuse x=%27139.469028%27 y=%27-2.49066%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%27143.343402%27 y=%27-2.49066%27 xlink:href=%27%23g4-98%27/%3E%0A%3Cuse x=%27149.832902%27 y=%27-2.49066%27 xlink:href=%27%23g2-3%27/%3E%0A%3Cuse x=%27157.028107%27 y=%27-2.49066%27 xlink:href=%27%23g4-99%27/%3E%0A%3Cuse x=%27161.339504%27 y=%27-2.49066%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%27167.98121%27 y=%27-2.49066%27 xlink:href=%27%23g6-61%27/%3E%0A%3Cuse x=%27178.49729%27 y=%27-2.49066%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%27182.371664%27 y=%27-2.49066%27 xlink:href=%27%23g4-97%27/%3E%0A%3Cuse x=%27189.851683%27 y=%27-2.49066%27 xlink:href=%27%23g2-3%27/%3E%0A%3Cuse x=%27197.046888%27 y=%27-2.49066%27 xlink:href=%27%23g4-98%27/%3E%0A%3Cuse x=%27201.322523%27 y=%27-2.49066%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%27207.410762%27 y=%27-2.49066%27 xlink:href=%27%23g2-3%27/%3E%0A%3Cuse x=%27214.605968%27 y=%27-2.49066%27 xlink:href=%27%23g4-99%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\[ a * (b * c) = (a * b) * c \]" style="height: 1.5194em; display: block" class="org-latex org-latex-block" />
</p>

<p>
<img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%27344.711087pt%27 height=%2712.955172pt%27 viewBox=%27-.500002 -12.45517 344.711087 12.955172%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g2-3%27 d=%27m2.739726-4.254047c.009963-.139477 .009963-.37858-.249066-.37858c-.159402 0-.288917 .129514-.259029 .259029v.129514l.139477 1.544209l-1.275218-.926526c-.089664-.049813-.109589-.069738-.179328-.069738c-.139477 0-.268991 .139477-.268991 .278954c0 .159402 .099626 .199253 .199253 .249066l1.414695 .67746l-1.374844 .667497c-.159402 .079701-.239103 .119552-.239103 .268991s.129514 .278954 .268991 .278954c.069738 0 .089664 0 .33873-.18929l1.115816-.806974l-.14944 1.673724c0 .209215 .179328 .259029 .259029 .259029c.119552 0 .268991-.069738 .268991-.259029l-.14944-1.673724l1.275218 .926526c.089664 .049813 .109589 .069738 .179328 .069738c.139477 0 .268991-.139477 .268991-.278954c0-.14944-.089664-.199253-.209215-.259029c-.597758-.298879-.617684-.298879-1.404732-.667497l1.374844-.667497c.159402-.079701 .239103-.119552 .239103-.268991s-.129514-.278954-.268991-.278954c-.069738 0-.089664 0-.33873 .18929l-1.115816 .806974l.139477-1.554172z%27/%3E%0A%3Cpath id=%27g4-97%27 d=%27m3.716065-3.765878c-.179328-.368618-.468244-.637609-.916563-.637609c-1.165629 0-2.400996 1.464508-2.400996 2.919054c0 .936488 .547945 1.594022 1.325031 1.594022c.199253 0 .697385-.039851 1.295143-.747198c.079701 .418431 .428394 .747198 .9066 .747198c.348692 0 .577833-.229141 .737235-.547945c.169365-.358655 .298879-.966376 .298879-.986301c0-.099626-.089664-.099626-.119552-.099626c-.099626 0-.109589 .039851-.139477 .179328c-.169365 .647572-.348692 1.235367-.757161 1.235367c-.268991 0-.298879-.259029-.298879-.458281c0-.219178 .019925-.298879 .129514-.737235c.109589-.418431 .129514-.518057 .219178-.896638l.358655-1.39477c.069738-.278954 .069738-.298879 .069738-.33873c0-.169365-.119552-.268991-.288917-.268991c-.239103 0-.388543 .219178-.418431 .438356zm-.647572 2.580324c-.049813 .179328-.049813 .199253-.199253 .368618c-.438356 .547945-.846824 .707347-1.125778 .707347c-.498132 0-.637609-.547945-.637609-.936488c0-.498132 .318804-1.723537 .547945-2.181818c.308842-.587796 .757161-.956413 1.155666-.956413c.647572 0 .787049 .816936 .787049 .876712s-.019925 .119552-.029888 .169365l-.498132 1.952677z%27/%3E%0A%3Cpath id=%27g6-49%27 d=%27m2.929016-6.37609c0-.239103 0-.259029-.229141-.259029c-.617684 .637609-1.494396 .637609-1.8132 .637609v.308842c.199253 0 .787049 0 1.305106-.259029v5.160648c0 .358655-.029888 .478207-.926526 .478207h-.318804v.308842c.348692-.029888 1.215442-.029888 1.613948-.029888s1.265255 0 1.613948 .029888v-.308842h-.318804c-.896638 0-.926526-.109589-.926526-.478207v-5.589041z%27/%3E%0A%3Cpath id=%27g6-61%27 d=%27m6.844334-3.257783c.14944 0 .33873 0 .33873-.199253s-.18929-.199253-.328767-.199253h-5.967621c-.139477 0-.328767 0-.328767 .199253s.18929 .199253 .33873 .199253h5.947696zm.009963 1.932752c.139477 0 .328767 0 .328767-.199253s-.18929-.199253-.33873-.199253h-5.947696c-.14944 0-.33873 0-.33873 .199253s.18929 .199253 .328767 .199253h5.967621z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page42%27%3E%0A%3Cuse x=%27136.28252%27 y=%270%27 xlink:href=%27%23g6-49%27/%3E%0A%3Cuse x=%27143.477725%27 y=%270%27 xlink:href=%27%23g2-3%27/%3E%0A%3Cuse x=%27150.67293%27 y=%270%27 xlink:href=%27%23g4-97%27/%3E%0A%3Cuse x=%27158.706416%27 y=%270%27 xlink:href=%27%23g6-61%27/%3E%0A%3Cuse x=%27169.222496%27 y=%270%27 xlink:href=%27%23g4-97%27/%3E%0A%3Cuse x=%27177.255983%27 y=%270%27 xlink:href=%27%23g6-61%27/%3E%0A%3Cuse x=%27187.772062%27 y=%270%27 xlink:href=%27%23g4-97%27/%3E%0A%3Cuse x=%27195.252082%27 y=%270%27 xlink:href=%27%23g2-3%27/%3E%0A%3Cuse x=%27202.447287%27 y=%270%27 xlink:href=%27%23g6-49%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\[ 1 * a = a = a * 1 \]" style="height: 1.2744em; display: block" class="org-latex org-latex-block" />
</p>

<p>
The free monoid on an alphabet is the smallest monoid made from this alphabet.
It is the smalles in the sense that it has no more equalities than absolutely
necessary to make it a monoid.
</p>

<p>
The free monoid on an alphabet set is the list containing elements of this set.
The neutral element <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%275.981339pt%27 height=%277.42037pt%27 viewBox=%27-.500002 -6.920368 5.981339 7.42037%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g6-49%27 d=%27m2.929016-6.37609c0-.239103 0-.259029-.229141-.259029c-.617684 .637609-1.494396 .637609-1.8132 .637609v.308842c.199253 0 .787049 0 1.305106-.259029v5.160648c0 .358655-.029888 .478207-.926526 .478207h-.318804v.308842c.348692-.029888 1.215442-.029888 1.613948-.029888s1.265255 0 1.613948 .029888v-.308842h-.318804c-.896638 0-.926526-.109589-.926526-.478207v-5.589041z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page59%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g6-49%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( 1 \)" style="height: 0.7299em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" /> is the empty list and <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%275.981339pt%27 height=%275.635407pt%27 viewBox=%27-.500002 -5.135405 5.981339 5.635407%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g2-3%27 d=%27m2.739726-4.254047c.009963-.139477 .009963-.37858-.249066-.37858c-.159402 0-.288917 .129514-.259029 .259029v.129514l.139477 1.544209l-1.275218-.926526c-.089664-.049813-.109589-.069738-.179328-.069738c-.139477 0-.268991 .139477-.268991 .278954c0 .159402 .099626 .199253 .199253 .249066l1.414695 .67746l-1.374844 .667497c-.159402 .079701-.239103 .119552-.239103 .268991s.129514 .278954 .268991 .278954c.069738 0 .089664 0 .33873-.18929l1.115816-.806974l-.14944 1.673724c0 .209215 .179328 .259029 .259029 .259029c.119552 0 .268991-.069738 .268991-.259029l-.14944-1.673724l1.275218 .926526c.089664 .049813 .109589 .069738 .179328 .069738c.139477 0 .268991-.139477 .268991-.278954c0-.14944-.089664-.199253-.209215-.259029c-.597758-.298879-.617684-.298879-1.404732-.667497l1.374844-.667497c.159402-.079701 .239103-.119552 .239103-.268991s-.129514-.278954-.268991-.278954c-.069738 0-.089664 0-.33873 .18929l-1.115816 .806974l.139477-1.554172z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page44%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g2-3%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( * \)" style="height: 0.5543em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" /> is <code>append</code>.
</p>

<p>
As it turns out, we can concisely express the type of lists of <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%276.693922pt%27 height=%275.28946pt%27 viewBox=%27-.500002 -4.789458 6.693922 5.28946%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-120%27 d=%27m3.327522-3.008717c.059776-.259029 .288917-1.175592 .986301-1.175592c.049813 0 .288917 0 .498132 .129514c-.278954 .049813-.478207 .298879-.478207 .537983c0 .159402 .109589 .348692 .37858 .348692c.219178 0 .537983-.179328 .537983-.577833c0-.518057-.587796-.657534-.926526-.657534c-.577833 0-.926526 .52802-1.046077 .757161c-.249066-.657534-.787049-.757161-1.075965-.757161c-1.036115 0-1.603985 1.285181-1.603985 1.534247c0 .099626 .099626 .099626 .119552 .099626c.079701 0 .109589-.019925 .129514-.109589c.33873-1.05604 .996264-1.305106 1.334994-1.305106c.18929 0 .537983 .089664 .537983 .667497c0 .308842-.169365 .976339-.537983 2.371108c-.159402 .617684-.508095 1.036115-.946451 1.036115c-.059776 0-.288917 0-.498132-.129514c.249066-.049813 .468244-.259029 .468244-.537983c0-.268991-.219178-.348692-.368618-.348692c-.298879 0-.547945 .259029-.547945 .577833c0 .458281 .498132 .657534 .936488 .657534c.657534 0 1.016189-.697385 1.046077-.757161c.119552 .368618 .478207 .757161 1.075965 .757161c1.026152 0 1.594022-1.285181 1.594022-1.534247c0-.099626-.089664-.099626-.119552-.099626c-.089664 0-.109589 .039851-.129514 .109589c-.328767 1.066002-1.006227 1.305106-1.325031 1.305106c-.388543 0-.547945-.318804-.547945-.657534c0-.219178 .059776-.438356 .169365-.876712l.33873-1.364882z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page45%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-120%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( x \)" style="height: 0.5203em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" /> with this
equation:
</p>

<p>
<img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%27344.711087pt%27 height=%2715.445832pt%27 viewBox=%27-.500002 -14.94583 344.711087 15.445832%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g2-2%27 d=%27m3.875467-2.769614l-1.992528-1.982565c-.119552-.119552-.139477-.139477-.219178-.139477c-.099626 0-.199253 .089664-.199253 .199253c0 .069738 .019925 .089664 .129514 .199253l1.992528 2.002491l-1.992528 2.002491c-.109589 .109589-.129514 .129514-.129514 .199253c0 .109589 .099626 .199253 .199253 .199253c.079701 0 .099626-.019925 .219178-.139477l1.982565-1.982565l2.062267 2.062267c.019925 .009963 .089664 .059776 .14944 .059776c.119552 0 .199253-.089664 .199253-.199253c0-.019925 0-.059776-.029888-.109589c-.009963-.019925-1.594022-1.58406-2.092154-2.092154l1.823163-1.823163c.049813-.059776 .199253-.18929 .249066-.249066c.009963-.019925 .049813-.059776 .049813-.129514c0-.109589-.079701-.199253-.199253-.199253c-.079701 0-.119552 .039851-.229141 .14944l-1.972603 1.972603z%27/%3E%0A%3Cpath id=%27g6-40%27 d=%27m3.297634 2.391034c0-.029888 0-.049813-.169365-.219178c-1.24533-1.255293-1.564134-3.138232-1.564134-4.662516c0-1.733499 .37858-3.466999 1.603985-4.712329c.129514-.119552 .129514-.139477 .129514-.169365c0-.069738-.039851-.099626-.099626-.099626c-.099626 0-.996264 .67746-1.58406 1.942715c-.508095 1.09589-.627646 2.201743-.627646 3.038605c0 .777086 .109589 1.982565 .657534 3.108344c.597758 1.225405 1.454545 1.872976 1.554172 1.872976c.059776 0 .099626-.029888 .099626-.099626z%27/%3E%0A%3Cpath id=%27g6-41%27 d=%27m2.879203-2.49066c0-.777086-.109589-1.982565-.657534-3.108344c-.597758-1.225405-1.454545-1.872976-1.554172-1.872976c-.059776 0-.099626 .039851-.099626 .099626c0 .029888 0 .049813 .18929 .229141c.976339 .986301 1.544209 2.570361 1.544209 4.652553c0 1.703611-.368618 3.457036-1.603985 4.712329c-.129514 .119552-.129514 .139477-.129514 .169365c0 .059776 .039851 .099626 .099626 .099626c.099626 0 .996264-.67746 1.58406-1.942715c.508095-1.09589 .627646-2.201743 .627646-3.038605z%27/%3E%0A%3Cpath id=%27g6-43%27 d=%27m4.07472-2.291407h2.779577c.139477 0 .328767 0 .328767-.199253s-.18929-.199253-.328767-.199253h-2.779577v-2.789539c0-.139477 0-.328767-.199253-.328767s-.199253 .18929-.199253 .328767v2.789539h-2.789539c-.139477 0-.328767 0-.328767 .199253s.18929 .199253 .328767 .199253h2.789539v2.789539c0 .139477 0 .328767 .199253 .328767s.199253-.18929 .199253-.328767v-2.789539z%27/%3E%0A%3Cpath id=%27g6-49%27 d=%27m2.929016-6.37609c0-.239103 0-.259029-.229141-.259029c-.617684 .637609-1.494396 .637609-1.8132 .637609v.308842c.199253 0 .787049 0 1.305106-.259029v5.160648c0 .358655-.029888 .478207-.926526 .478207h-.318804v.308842c.348692-.029888 1.215442-.029888 1.613948-.029888s1.265255 0 1.613948 .029888v-.308842h-.318804c-.896638 0-.926526-.109589-.926526-.478207v-5.589041z%27/%3E%0A%3Cpath id=%27g6-61%27 d=%27m6.844334-3.257783c.14944 0 .33873 0 .33873-.199253s-.18929-.199253-.328767-.199253h-5.967621c-.139477 0-.328767 0-.328767 .199253s.18929 .199253 .33873 .199253h5.947696zm.009963 1.932752c.139477 0 .328767 0 .328767-.199253s-.18929-.199253-.33873-.199253h-5.947696c-.14944 0-.33873 0-.33873 .199253s.18929 .199253 .328767 .199253h5.967621z%27/%3E%0A%3Cpath id=%27g4-76%27 d=%27m3.726027-6.027397c.089664-.358655 .119552-.468244 1.05604-.468244c.298879 0 .37858 0 .37858-.18929c0-.119552-.109589-.119552-.159402-.119552c-.328767 0-1.145704 .029888-1.474471 .029888c-.298879 0-1.026152-.029888-1.325031-.029888c-.069738 0-.18929 0-.18929 .199253c0 .109589 .089664 .109589 .278954 .109589c.019925 0 .209215 0 .37858 .019925c.179328 .019925 .268991 .029888 .268991 .159402c0 .039851-.009963 .069738-.039851 .18929l-1.334994 5.349938c-.099626 .388543-.119552 .468244-.9066 .468244c-.169365 0-.268991 0-.268991 .199253c0 .109589 .089664 .109589 .268991 .109589h4.612702c.239103 0 .249066 0 .308842-.169365l.787049-2.15193c.039851-.109589 .039851-.129514 .039851-.139477c0-.039851-.029888-.109589-.119552-.109589s-.099626 .049813-.169365 .209215c-.33873 .916563-.777086 2.052304-2.500623 2.052304h-.936488c-.139477 0-.159402 0-.219178-.009963c-.099626-.009963-.129514-.019925-.129514-.099626c0-.029888 0-.049813 .049813-.229141l1.344956-5.379826z%27/%3E%0A%3Cpath id=%27g4-120%27 d=%27m3.327522-3.008717c.059776-.259029 .288917-1.175592 .986301-1.175592c.049813 0 .288917 0 .498132 .129514c-.278954 .049813-.478207 .298879-.478207 .537983c0 .159402 .109589 .348692 .37858 .348692c.219178 0 .537983-.179328 .537983-.577833c0-.518057-.587796-.657534-.926526-.657534c-.577833 0-.926526 .52802-1.046077 .757161c-.249066-.657534-.787049-.757161-1.075965-.757161c-1.036115 0-1.603985 1.285181-1.603985 1.534247c0 .099626 .099626 .099626 .119552 .099626c.079701 0 .109589-.019925 .129514-.109589c.33873-1.05604 .996264-1.305106 1.334994-1.305106c.18929 0 .537983 .089664 .537983 .667497c0 .308842-.169365 .976339-.537983 2.371108c-.159402 .617684-.508095 1.036115-.946451 1.036115c-.059776 0-.288917 0-.498132-.129514c.249066-.049813 .468244-.259029 .468244-.537983c0-.268991-.219178-.348692-.368618-.348692c-.298879 0-.547945 .259029-.547945 .577833c0 .458281 .498132 .657534 .936488 .657534c.657534 0 1.016189-.697385 1.046077-.757161c.119552 .368618 .478207 .757161 1.075965 .757161c1.026152 0 1.594022-1.285181 1.594022-1.534247c0-.099626-.089664-.099626-.119552-.099626c-.089664 0-.109589 .039851-.129514 .109589c-.328767 1.066002-1.006227 1.305106-1.325031 1.305106c-.388543 0-.547945-.318804-.547945-.657534c0-.219178 .059776-.438356 .169365-.876712l.33873-1.364882z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page46%27%3E%0A%3Cuse x=%27127.476933%27 y=%27-2.49066%27 xlink:href=%27%23g4-76%27/%3E%0A%3Cuse x=%27134.25708%27 y=%27-2.49066%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%27138.131454%27 y=%27-2.49066%27 xlink:href=%27%23g4-120%27/%3E%0A%3Cuse x=%27143.825386%27 y=%27-2.49066%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%27150.467092%27 y=%27-2.49066%27 xlink:href=%27%23g6-61%27/%3E%0A%3Cuse x=%27160.983172%27 y=%27-2.49066%27 xlink:href=%27%23g6-49%27/%3E%0A%3Cuse x=%27168.178377%27 y=%27-2.49066%27 xlink:href=%27%23g6-43%27/%3E%0A%3Cuse x=%27178.14099%27 y=%27-2.49066%27 xlink:href=%27%23g4-120%27/%3E%0A%3Cuse x=%27186.048788%27 y=%27-2.49066%27 xlink:href=%27%23g2-2%27/%3E%0A%3Cuse x=%27196.011402%27 y=%27-2.49066%27 xlink:href=%27%23g4-76%27/%3E%0A%3Cuse x=%27202.791549%27 y=%27-2.49066%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%27206.665923%27 y=%27-2.49066%27 xlink:href=%27%23g4-120%27/%3E%0A%3Cuse x=%27212.359855%27 y=%27-2.49066%27 xlink:href=%27%23g6-41%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\[ L(x) = 1 + x \times L(x) \]" style="height: 1.5194em; display: block" class="org-latex org-latex-block" />
</p>

<p>
Here, <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%275.981339pt%27 height=%277.42037pt%27 viewBox=%27-.500002 -6.920368 5.981339 7.42037%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g6-49%27 d=%27m2.929016-6.37609c0-.239103 0-.259029-.229141-.259029c-.617684 .637609-1.494396 .637609-1.8132 .637609v.308842c.199253 0 .787049 0 1.305106-.259029v5.160648c0 .358655-.029888 .478207-.926526 .478207h-.318804v.308842c.348692-.029888 1.215442-.029888 1.613948-.029888s1.265255 0 1.613948 .029888v-.308842h-.318804c-.896638 0-.926526-.109589-.926526-.478207v-5.589041z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page59%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g6-49%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( 1 \)" style="height: 0.7299em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" /> is the singleton set (a set with one element) which acts as the
neutral element for the cartesian product <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%278.748747pt%27 height=%277.641754pt%27 viewBox=%27-.500002 -6.311537 8.748747 7.641754%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g2-2%27 d=%27m3.875467-2.769614l-1.992528-1.982565c-.119552-.119552-.139477-.139477-.219178-.139477c-.099626 0-.199253 .089664-.199253 .199253c0 .069738 .019925 .089664 .129514 .199253l1.992528 2.002491l-1.992528 2.002491c-.109589 .109589-.129514 .129514-.129514 .199253c0 .109589 .099626 .199253 .199253 .199253c.079701 0 .099626-.019925 .219178-.139477l1.982565-1.982565l2.062267 2.062267c.019925 .009963 .089664 .059776 .14944 .059776c.119552 0 .199253-.089664 .199253-.199253c0-.019925 0-.059776-.029888-.109589c-.009963-.019925-1.594022-1.58406-2.092154-2.092154l1.823163-1.823163c.049813-.059776 .199253-.18929 .249066-.249066c.009963-.019925 .049813-.059776 .049813-.129514c0-.109589-.079701-.199253-.199253-.199253c-.079701 0-.119552 .039851-.229141 .14944l-1.972603 1.972603z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page60%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g2-2%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( \times \)" style="height: 0.7517em; vertical-align: -0.1309em; display: inline-block" class="org-latex org-latex-inline" /> on sets and <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%278.748747pt%27 height=%277.641754pt%27 viewBox=%27-.500002 -6.311537 8.748747 7.641754%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g6-43%27 d=%27m4.07472-2.291407h2.779577c.139477 0 .328767 0 .328767-.199253s-.18929-.199253-.328767-.199253h-2.779577v-2.789539c0-.139477 0-.328767-.199253-.328767s-.199253 .18929-.199253 .328767v2.789539h-2.789539c-.139477 0-.328767 0-.328767 .199253s.18929 .199253 .328767 .199253h2.789539v2.789539c0 .139477 0 .328767 .199253 .328767s.199253-.18929 .199253-.328767v-2.789539z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page55%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g6-43%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( + \)" style="height: 0.7517em; vertical-align: -0.1309em; display: inline-block" class="org-latex org-latex-inline" /> is the
disjoint union of sets. If we expand this recursive definition, we will see
that:
</p>

<p>
<img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%27344.711087pt%27 height=%2731.078965pt%27 viewBox=%27-.500002 -30.578963 344.711087 31.078965%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g5-110%27 d=%27m.850809-.439352c-.027895 .09066-.069738 .265006-.069738 .285928c0 .153425 .125529 .223163 .237111 .223163c.125529 0 .237111-.09066 .27198-.153425s.09066-.285928 .125529-.432379c.034869-.132503 .111582-.4533 .153425-.627646c.041843-.153425 .083686-.306849 .118555-.467248c.076712-.285928 .09066-.341719 .292902-.627646c.195268-.278954 .523039-.641594 1.046077-.641594c.404483 0 .411457 .355666 .411457 .488169c0 .418431-.299875 1.192528-.411457 1.48543c-.076712 .195268-.104608 .258032-.104608 .376588c0 .369614 .306849 .599751 .662516 .599751c.697385 0 1.004234-.962391 1.004234-1.066999c0-.09066-.09066-.09066-.111582-.09066c-.097634 0-.104608 .041843-.132503 .118555c-.160399 .557908-.460274 .843836-.739228 .843836c-.146451 0-.174346-.097634-.174346-.244085c0-.160399 .034869-.251059 .160399-.564882c.083686-.216189 .369614-.955417 .369614-1.345953c0-.676463-.536986-.795019-.9066-.795019c-.578829 0-.969365 .355666-1.17858 .63462c-.048817-.481196-.460274-.63462-.746202-.63462c-.299875 0-.460274 .216189-.550934 .376588c-.153425 .258032-.251059 .655542-.251059 .690411c0 .09066 .097634 .09066 .118555 .09066c.097634 0 .104608-.020922 .153425-.209215c.104608-.411457 .237111-.753176 .509091-.753176c.18132 0 .230137 .153425 .230137 .341719c0 .132503-.062765 .390535-.111582 .578829s-.118555 .474222-.153425 .627646l-.223163 .892653z%27/%3E%0A%3Cpath id=%27g8-88%27 d=%27m12.612702 13.947696l1.205479-3.188045h-.249066c-.388543 1.036115-1.444583 1.713574-2.590286 2.012453c-.209215 .049813-1.185554 .308842-3.098381 .308842h-6.007472l5.070984-5.947696c.069738-.079701 .089664-.109589 .089664-.159402c0-.019925 0-.049813-.069738-.14944l-4.64259-6.346202h5.459527c1.334994 0 2.241594 .139477 2.331258 .159402c.537983 .079701 1.404732 .249066 2.191781 .747198c.249066 .159402 .926526 .607721 1.265255 1.414695h.249066l-1.205479-2.799502h-11.775841c-.229141 0-.239103 .009963-.268991 .069738c-.009963 .029888-.009963 .219178-.009963 .328767l5.270237 7.212951l-5.160648 6.047323c-.099626 .119552-.099626 .169365-.099626 .179328c0 .109589 .089664 .109589 .268991 .109589h11.775841z%27/%3E%0A%3Cpath id=%27g7-48%27 d=%27m3.598506-2.224658c0-.767123-.09066-1.318057-.411457-1.806227c-.216189-.320797-.648568-.599751-1.206476-.599751c-1.617933 0-1.617933 1.903861-1.617933 2.405978s0 2.364134 1.617933 2.364134s1.617933-1.862017 1.617933-2.364134zm-1.617933 2.168867c-.320797 0-.746202-.188294-.885679-.760149c-.097634-.411457-.097634-.983313-.097634-1.499377c0-.509091 0-1.039103 .104608-1.422665c.146451-.550934 .592777-.697385 .878705-.697385c.376588 0 .739228 .230137 .864757 .63462c.111582 .376588 .118555 .878705 .118555 1.48543c0 .516065 0 1.03213-.09066 1.471482c-.139477 .63462-.613699 .788045-.892653 .788045z%27/%3E%0A%3Cpath id=%27g7-61%27 d=%27m5.355915-2.343213c.104608 0 .265006 0 .265006-.174346c0-.167372-.167372-.167372-.258032-.167372h-4.616687c-.09066 0-.258032 0-.258032 .167372c0 .174346 .160399 .174346 .265006 .174346h4.60274zm.006974 1.534247c.09066 0 .258032 0 .258032-.167372c0-.174346-.160399-.174346-.265006-.174346h-4.60274c-.104608 0-.265006 0-.265006 .174346c0 .167372 .167372 .167372 .258032 .167372h4.616687z%27/%3E%0A%3Cpath id=%27g3-49%27 d=%27m4.030884-1.910834c-.369614-.432379-.481196-.550934-.746202-.739228c-.425405-.306849-.871731-.425405-1.255293-.425405c-.864757 0-1.492403 .739228-1.492403 1.57609c0 .81594 .599751 1.569116 1.471482 1.569116c.969365 0 1.645828-.795019 1.896887-1.164633c.369614 .432379 .481196 .550934 .746202 .739228c.425405 .306849 .871731 .425405 1.255293 .425405c.864757 0 1.492403-.739228 1.492403-1.57609c0-.81594-.599751-1.569116-1.471482-1.569116c-.969365 0-1.645828 .795019-1.896887 1.164633zm.223163 .258032c.278954-.4533 .885679-1.157659 1.736488-1.157659c.718306 0 1.21345 .63462 1.21345 1.30411s-.54396 1.192528-1.185554 1.192528c-.648568 0-1.094894-.530012-1.764384-1.338979zm-.571856 .299875c-.278954 .4533-.885679 1.157659-1.736488 1.157659c-.718306 0-1.21345-.63462-1.21345-1.30411s.54396-1.192528 1.185554-1.192528c.648568 0 1.094894 .530012 1.764384 1.338979z%27/%3E%0A%3Cpath id=%27g6-40%27 d=%27m3.297634 2.391034c0-.029888 0-.049813-.169365-.219178c-1.24533-1.255293-1.564134-3.138232-1.564134-4.662516c0-1.733499 .37858-3.466999 1.603985-4.712329c.129514-.119552 .129514-.139477 .129514-.169365c0-.069738-.039851-.099626-.099626-.099626c-.099626 0-.996264 .67746-1.58406 1.942715c-.508095 1.09589-.627646 2.201743-.627646 3.038605c0 .777086 .109589 1.982565 .657534 3.108344c.597758 1.225405 1.454545 1.872976 1.554172 1.872976c.059776 0 .099626-.029888 .099626-.099626z%27/%3E%0A%3Cpath id=%27g6-41%27 d=%27m2.879203-2.49066c0-.777086-.109589-1.982565-.657534-3.108344c-.597758-1.225405-1.454545-1.872976-1.554172-1.872976c-.059776 0-.099626 .039851-.099626 .099626c0 .029888 0 .049813 .18929 .229141c.976339 .986301 1.544209 2.570361 1.544209 4.652553c0 1.703611-.368618 3.457036-1.603985 4.712329c-.129514 .119552-.129514 .139477-.129514 .169365c0 .059776 .039851 .099626 .099626 .099626c.099626 0 .996264-.67746 1.58406-1.942715c.508095-1.09589 .627646-2.201743 .627646-3.038605z%27/%3E%0A%3Cpath id=%27g6-61%27 d=%27m6.844334-3.257783c.14944 0 .33873 0 .33873-.199253s-.18929-.199253-.328767-.199253h-5.967621c-.139477 0-.328767 0-.328767 .199253s.18929 .199253 .33873 .199253h5.947696zm.009963 1.932752c.139477 0 .328767 0 .328767-.199253s-.18929-.199253-.33873-.199253h-5.947696c-.14944 0-.33873 0-.33873 .199253s.18929 .199253 .328767 .199253h5.967621z%27/%3E%0A%3Cpath id=%27g4-76%27 d=%27m3.726027-6.027397c.089664-.358655 .119552-.468244 1.05604-.468244c.298879 0 .37858 0 .37858-.18929c0-.119552-.109589-.119552-.159402-.119552c-.328767 0-1.145704 .029888-1.474471 .029888c-.298879 0-1.026152-.029888-1.325031-.029888c-.069738 0-.18929 0-.18929 .199253c0 .109589 .089664 .109589 .278954 .109589c.019925 0 .209215 0 .37858 .019925c.179328 .019925 .268991 .029888 .268991 .159402c0 .039851-.009963 .069738-.039851 .18929l-1.334994 5.349938c-.099626 .388543-.119552 .468244-.9066 .468244c-.169365 0-.268991 0-.268991 .199253c0 .109589 .089664 .109589 .268991 .109589h4.612702c.239103 0 .249066 0 .308842-.169365l.787049-2.15193c.039851-.109589 .039851-.129514 .039851-.139477c0-.039851-.029888-.109589-.119552-.109589s-.099626 .049813-.169365 .209215c-.33873 .916563-.777086 2.052304-2.500623 2.052304h-.936488c-.139477 0-.159402 0-.219178-.009963c-.099626-.009963-.129514-.019925-.129514-.099626c0-.029888 0-.049813 .049813-.229141l1.344956-5.379826z%27/%3E%0A%3Cpath id=%27g4-120%27 d=%27m3.327522-3.008717c.059776-.259029 .288917-1.175592 .986301-1.175592c.049813 0 .288917 0 .498132 .129514c-.278954 .049813-.478207 .298879-.478207 .537983c0 .159402 .109589 .348692 .37858 .348692c.219178 0 .537983-.179328 .537983-.577833c0-.518057-.587796-.657534-.926526-.657534c-.577833 0-.926526 .52802-1.046077 .757161c-.249066-.657534-.787049-.757161-1.075965-.757161c-1.036115 0-1.603985 1.285181-1.603985 1.534247c0 .099626 .099626 .099626 .119552 .099626c.079701 0 .109589-.019925 .129514-.109589c.33873-1.05604 .996264-1.305106 1.334994-1.305106c.18929 0 .537983 .089664 .537983 .667497c0 .308842-.169365 .976339-.537983 2.371108c-.159402 .617684-.508095 1.036115-.946451 1.036115c-.059776 0-.288917 0-.498132-.129514c.249066-.049813 .468244-.259029 .468244-.537983c0-.268991-.219178-.348692-.368618-.348692c-.298879 0-.547945 .259029-.547945 .577833c0 .458281 .498132 .657534 .936488 .657534c.657534 0 1.016189-.697385 1.046077-.757161c.119552 .368618 .478207 .757161 1.075965 .757161c1.026152 0 1.594022-1.285181 1.594022-1.534247c0-.099626-.089664-.099626-.119552-.099626c-.089664 0-.109589 .039851-.129514 .109589c-.328767 1.066002-1.006227 1.305106-1.325031 1.305106c-.388543 0-.547945-.318804-.547945-.657534c0-.219178 .059776-.438356 .169365-.876712l.33873-1.364882z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page50%27%3E%0A%3Cuse x=%27141.207745%27 y=%27-12.630462%27 xlink:href=%27%23g4-76%27/%3E%0A%3Cuse x=%27147.987892%27 y=%27-12.630462%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%27151.862266%27 y=%27-12.630462%27 xlink:href=%27%23g4-120%27/%3E%0A%3Cuse x=%27157.556198%27 y=%27-12.630462%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%27164.197904%27 y=%27-12.630462%27 xlink:href=%27%23g6-61%27/%3E%0A%3Cuse x=%27178.248794%27 y=%27-25.083807%27 xlink:href=%27%23g3-49%27/%3E%0A%3Cuse x=%27175.024769%27 y=%27-22.095031%27 xlink:href=%27%23g8-88%27/%3E%0A%3Cuse x=%27174.713984%27 y=%27-.996264%27 xlink:href=%27%23g5-110%27/%3E%0A%3Cuse x=%27179.638847%27 y=%27-.996264%27 xlink:href=%27%23g7-61%27/%3E%0A%3Cuse x=%27185.754831%27 y=%27-.996264%27 xlink:href=%27%23g7-48%27/%3E%0A%3Cuse x=%27191.386463%27 y=%27-12.630462%27 xlink:href=%27%23g4-120%27/%3E%0A%3Cuse x=%27197.080395%27 y=%27-16.743958%27 xlink:href=%27%23g5-110%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\[ L(x) = \sum_{n=0}^{\infty} x^n \]" style="height: 3.0572em; display: block" class="org-latex org-latex-block" />
</p>

<p>
where <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2711.163292pt%27 height=%279.109622pt%27 viewBox=%27-.500002 -8.609621 11.163292 9.109622%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g7-48%27 d=%27m3.598506-2.224658c0-.767123-.09066-1.318057-.411457-1.806227c-.216189-.320797-.648568-.599751-1.206476-.599751c-1.617933 0-1.617933 1.903861-1.617933 2.405978s0 2.364134 1.617933 2.364134s1.617933-1.862017 1.617933-2.364134zm-1.617933 2.168867c-.320797 0-.746202-.188294-.885679-.760149c-.097634-.411457-.097634-.983313-.097634-1.499377c0-.509091 0-1.039103 .104608-1.422665c.146451-.550934 .592777-.697385 .878705-.697385c.376588 0 .739228 .230137 .864757 .63462c.111582 .376588 .118555 .878705 .118555 1.48543c0 .516065 0 1.03213-.09066 1.471482c-.139477 .63462-.613699 .788045-.892653 .788045z%27/%3E%0A%3Cpath id=%27g4-120%27 d=%27m3.327522-3.008717c.059776-.259029 .288917-1.175592 .986301-1.175592c.049813 0 .288917 0 .498132 .129514c-.278954 .049813-.478207 .298879-.478207 .537983c0 .159402 .109589 .348692 .37858 .348692c.219178 0 .537983-.179328 .537983-.577833c0-.518057-.587796-.657534-.926526-.657534c-.577833 0-.926526 .52802-1.046077 .757161c-.249066-.657534-.787049-.757161-1.075965-.757161c-1.036115 0-1.603985 1.285181-1.603985 1.534247c0 .099626 .099626 .099626 .119552 .099626c.079701 0 .109589-.019925 .129514-.109589c.33873-1.05604 .996264-1.305106 1.334994-1.305106c.18929 0 .537983 .089664 .537983 .667497c0 .308842-.169365 .976339-.537983 2.371108c-.159402 .617684-.508095 1.036115-.946451 1.036115c-.059776 0-.288917 0-.498132-.129514c.249066-.049813 .468244-.259029 .468244-.537983c0-.268991-.219178-.348692-.368618-.348692c-.298879 0-.547945 .259029-.547945 .577833c0 .458281 .498132 .657534 .936488 .657534c.657534 0 1.016189-.697385 1.046077-.757161c.119552 .368618 .478207 .757161 1.075965 .757161c1.026152 0 1.594022-1.285181 1.594022-1.534247c0-.099626-.089664-.099626-.119552-.099626c-.089664 0-.109589 .039851-.129514 .109589c-.328767 1.066002-1.006227 1.305106-1.325031 1.305106c-.388543 0-.547945-.318804-.547945-.657534c0-.219178 .059776-.438356 .169365-.876712l.33873-1.364882z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page51%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-120%27/%3E%0A%3Cuse x=%275.693932%27 y=%27-3.615364%27 xlink:href=%27%23g7-48%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( x^0 \)" style="height: 0.8961em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" /> is the singleton set and <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2712.116915pt%27 height=%277.617993pt%27 viewBox=%27-.500002 -7.117991 12.116915 7.617993%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g5-110%27 d=%27m.850809-.439352c-.027895 .09066-.069738 .265006-.069738 .285928c0 .153425 .125529 .223163 .237111 .223163c.125529 0 .237111-.09066 .27198-.153425s.09066-.285928 .125529-.432379c.034869-.132503 .111582-.4533 .153425-.627646c.041843-.153425 .083686-.306849 .118555-.467248c.076712-.285928 .09066-.341719 .292902-.627646c.195268-.278954 .523039-.641594 1.046077-.641594c.404483 0 .411457 .355666 .411457 .488169c0 .418431-.299875 1.192528-.411457 1.48543c-.076712 .195268-.104608 .258032-.104608 .376588c0 .369614 .306849 .599751 .662516 .599751c.697385 0 1.004234-.962391 1.004234-1.066999c0-.09066-.09066-.09066-.111582-.09066c-.097634 0-.104608 .041843-.132503 .118555c-.160399 .557908-.460274 .843836-.739228 .843836c-.146451 0-.174346-.097634-.174346-.244085c0-.160399 .034869-.251059 .160399-.564882c.083686-.216189 .369614-.955417 .369614-1.345953c0-.676463-.536986-.795019-.9066-.795019c-.578829 0-.969365 .355666-1.17858 .63462c-.048817-.481196-.460274-.63462-.746202-.63462c-.299875 0-.460274 .216189-.550934 .376588c-.153425 .258032-.251059 .655542-.251059 .690411c0 .09066 .097634 .09066 .118555 .09066c.097634 0 .104608-.020922 .153425-.209215c.104608-.411457 .237111-.753176 .509091-.753176c.18132 0 .230137 .153425 .230137 .341719c0 .132503-.062765 .390535-.111582 .578829s-.118555 .474222-.153425 .627646l-.223163 .892653z%27/%3E%0A%3Cpath id=%27g4-120%27 d=%27m3.327522-3.008717c.059776-.259029 .288917-1.175592 .986301-1.175592c.049813 0 .288917 0 .498132 .129514c-.278954 .049813-.478207 .298879-.478207 .537983c0 .159402 .109589 .348692 .37858 .348692c.219178 0 .537983-.179328 .537983-.577833c0-.518057-.587796-.657534-.926526-.657534c-.577833 0-.926526 .52802-1.046077 .757161c-.249066-.657534-.787049-.757161-1.075965-.757161c-1.036115 0-1.603985 1.285181-1.603985 1.534247c0 .099626 .099626 .099626 .119552 .099626c.079701 0 .109589-.019925 .129514-.109589c.33873-1.05604 .996264-1.305106 1.334994-1.305106c.18929 0 .537983 .089664 .537983 .667497c0 .308842-.169365 .976339-.537983 2.371108c-.159402 .617684-.508095 1.036115-.946451 1.036115c-.059776 0-.288917 0-.498132-.129514c.249066-.049813 .468244-.259029 .468244-.537983c0-.268991-.219178-.348692-.368618-.348692c-.298879 0-.547945 .259029-.547945 .577833c0 .458281 .498132 .657534 .936488 .657534c.657534 0 1.016189-.697385 1.046077-.757161c.119552 .368618 .478207 .757161 1.075965 .757161c1.026152 0 1.594022-1.285181 1.594022-1.534247c0-.099626-.089664-.099626-.119552-.099626c-.089664 0-.109589 .039851-.129514 .109589c-.328767 1.066002-1.006227 1.305106-1.325031 1.305106c-.388543 0-.547945-.318804-.547945-.657534c0-.219178 .059776-.438356 .169365-.876712l.33873-1.364882z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page52%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-120%27/%3E%0A%3Cuse x=%275.693932%27 y=%27-3.615364%27 xlink:href=%27%23g5-110%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( x^n \)" style="height: 0.7494em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" /> is the <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%276.979929pt%27 height=%275.28946pt%27 viewBox=%27-.500002 -4.789458 6.979929 5.28946%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-110%27 d=%27m.876712-.587796c-.029888 .14944-.089664 .37858-.089664 .428394c0 .179328 .139477 .268991 .288917 .268991c.119552 0 .298879-.079701 .368618-.278954c.009963-.019925 .129514-.488169 .18929-.737235l.219178-.896638c.059776-.219178 .119552-.438356 .169365-.667497c.039851-.169365 .119552-.458281 .129514-.498132c.14944-.308842 .67746-1.215442 1.62391-1.215442c.448319 0 .537983 .368618 .537983 .697385c0 .617684-.488169 1.892902-.647572 2.321295c-.089664 .229141-.099626 .348692-.099626 .458281c0 .468244 .348692 .816936 .816936 .816936c.936488 0 1.305106-1.454545 1.305106-1.534247c0-.099626-.089664-.099626-.119552-.099626c-.099626 0-.099626 .029888-.14944 .179328c-.199253 .67746-.52802 1.235367-1.016189 1.235367c-.169365 0-.239103-.099626-.239103-.328767c0-.249066 .089664-.488169 .179328-.707347c.18929-.52802 .607721-1.62391 .607721-2.191781c0-.667497-.428394-1.066002-1.145704-1.066002c-.896638 0-1.384807 .637609-1.554172 .86675c-.049813-.557908-.458281-.86675-.916563-.86675s-.647572 .388543-.747198 .56787c-.159402 .33873-.298879 .926526-.298879 .966376c0 .099626 .099626 .099626 .119552 .099626c.099626 0 .109589-.009963 .169365-.229141c.169365-.707347 .368618-1.185554 .727273-1.185554c.199253 0 .308842 .129514 .308842 .458281c0 .209215-.029888 .318804-.159402 .836862l-.577833 2.30137z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page53%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-110%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( n \)" style="height: 0.5203em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" />-tuple of <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%276.693922pt%27 height=%275.28946pt%27 viewBox=%27-.500002 -4.789458 6.693922 5.28946%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-120%27 d=%27m3.327522-3.008717c.059776-.259029 .288917-1.175592 .986301-1.175592c.049813 0 .288917 0 .498132 .129514c-.278954 .049813-.478207 .298879-.478207 .537983c0 .159402 .109589 .348692 .37858 .348692c.219178 0 .537983-.179328 .537983-.577833c0-.518057-.587796-.657534-.926526-.657534c-.577833 0-.926526 .52802-1.046077 .757161c-.249066-.657534-.787049-.757161-1.075965-.757161c-1.036115 0-1.603985 1.285181-1.603985 1.534247c0 .099626 .099626 .099626 .119552 .099626c.079701 0 .109589-.019925 .129514-.109589c.33873-1.05604 .996264-1.305106 1.334994-1.305106c.18929 0 .537983 .089664 .537983 .667497c0 .308842-.169365 .976339-.537983 2.371108c-.159402 .617684-.508095 1.036115-.946451 1.036115c-.059776 0-.288917 0-.498132-.129514c.249066-.049813 .468244-.259029 .468244-.537983c0-.268991-.219178-.348692-.368618-.348692c-.298879 0-.547945 .259029-.547945 .577833c0 .458281 .498132 .657534 .936488 .657534c.657534 0 1.016189-.697385 1.046077-.757161c.119552 .368618 .478207 .757161 1.075965 .757161c1.026152 0 1.594022-1.285181 1.594022-1.534247c0-.099626-.089664-.099626-.119552-.099626c-.089664 0-.109589 .039851-.129514 .109589c-.328767 1.066002-1.006227 1.305106-1.325031 1.305106c-.388543 0-.547945-.318804-.547945-.657534c0-.219178 .059776-.438356 .169365-.876712l.33873-1.364882z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page54%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-120%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( x
\)" style="height: 0.5203em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" />s.
</p>
</div>
</div>
<div id="outline-container-org35c40e1" class="outline-3">
<h3 id="org35c40e1"><span class="section-number-3">12.2.</span> Free monad</h3>
<div class="outline-text-3" id="text-12-2">
<p>
If we translate all of our operations from the set world to the endofunctor
world, this is what happens:
</p>

<ol class="org-ol">
<li><img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%278.748747pt%27 height=%277.641754pt%27 viewBox=%27-.500002 -6.311537 8.748747 7.641754%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g6-43%27 d=%27m4.07472-2.291407h2.779577c.139477 0 .328767 0 .328767-.199253s-.18929-.199253-.328767-.199253h-2.779577v-2.789539c0-.139477 0-.328767-.199253-.328767s-.199253 .18929-.199253 .328767v2.789539h-2.789539c-.139477 0-.328767 0-.328767 .199253s.18929 .199253 .328767 .199253h2.789539v2.789539c0 .139477 0 .328767 .199253 .328767s.199253-.18929 .199253-.328767v-2.789539z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page55%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g6-43%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( + \)" style="height: 0.7517em; vertical-align: -0.1309em; display: inline-block" class="org-latex org-latex-inline" /> which is the set disjoint union becomes the functor disjoint union
where <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%27108.831597pt%27 height=%2710.962644pt%27 viewBox=%27-.500002 -7.971982 108.831597 10.962644%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-102%27 d=%27m3.656289-3.985056h.856787c.199253 0 .298879 0 .298879-.199253c0-.109589-.099626-.109589-.268991-.109589h-.826899l.209215-1.135741c.039851-.209215 .179328-.916563 .239103-1.036115c.089664-.18929 .259029-.33873 .468244-.33873c.039851 0 .298879 0 .488169 .179328c-.438356 .039851-.537983 .388543-.537983 .537983c0 .229141 .179328 .348692 .368618 .348692c.259029 0 .547945-.219178 .547945-.597758c0-.458281-.458281-.687422-.86675-.687422c-.33873 0-.966376 .179328-1.265255 1.165629c-.059776 .209215-.089664 .308842-.328767 1.564134h-.687422c-.18929 0-.298879 0-.298879 .18929c0 .119552 .089664 .119552 .278954 .119552h.657534l-.747198 3.935243c-.179328 .966376-.348692 1.872976-.86675 1.872976c-.039851 0-.288917 0-.478207-.179328c.458281-.029888 .547945-.388543 .547945-.537983c0-.229141-.179328-.348692-.368618-.348692c-.259029 0-.547945 .219178-.547945 .597758c0 .448319 .438356 .687422 .846824 .687422c.547945 0 .946451-.587796 1.125778-.966376c.318804-.627646 .547945-1.833126 .557908-1.902864l.597758-3.158157z%27/%3E%0A%3Cpath id=%27g4-103%27 d=%27m4.692403-3.755915c.009963-.059776 .029888-.109589 .029888-.179328c0-.169365-.119552-.268991-.288917-.268991c-.099626 0-.368618 .069738-.408468 .428394c-.179328-.368618-.52802-.627646-.926526-.627646c-1.135741 0-2.371108 1.39477-2.371108 2.82939c0 .986301 .607721 1.574097 1.325031 1.574097c.587796 0 1.05604-.468244 1.155666-.577833l.009963 .009963c-.209215 .886675-.328767 1.295143-.328767 1.315068c-.039851 .089664-.37858 1.075965-1.43462 1.075965c-.18929 0-.518057-.009963-.797011-.099626c.298879-.089664 .408468-.348692 .408468-.518057c0-.159402-.109589-.348692-.37858-.348692c-.219178 0-.537983 .179328-.537983 .577833c0 .408468 .368618 .607721 1.325031 .607721c1.24533 0 1.96264-.777086 2.11208-1.374844l1.105853-4.423412zm-1.295143 2.480697c-.059776 .259029-.288917 .508095-.508095 .697385c-.209215 .179328-.518057 .358655-.806974 .358655c-.498132 0-.647572-.518057-.647572-.916563c0-.478207 .288917-1.653798 .557908-2.161893c.268991-.488169 .697385-.886675 1.115816-.886675c.657534 0 .797011 .806974 .797011 .856787s-.019925 .109589-.029888 .14944l-.478207 1.902864z%27/%3E%0A%3Cpath id=%27g4-120%27 d=%27m3.327522-3.008717c.059776-.259029 .288917-1.175592 .986301-1.175592c.049813 0 .288917 0 .498132 .129514c-.278954 .049813-.478207 .298879-.478207 .537983c0 .159402 .109589 .348692 .37858 .348692c.219178 0 .537983-.179328 .537983-.577833c0-.518057-.587796-.657534-.926526-.657534c-.577833 0-.926526 .52802-1.046077 .757161c-.249066-.657534-.787049-.757161-1.075965-.757161c-1.036115 0-1.603985 1.285181-1.603985 1.534247c0 .099626 .099626 .099626 .119552 .099626c.079701 0 .109589-.019925 .129514-.109589c.33873-1.05604 .996264-1.305106 1.334994-1.305106c.18929 0 .537983 .089664 .537983 .667497c0 .308842-.169365 .976339-.537983 2.371108c-.159402 .617684-.508095 1.036115-.946451 1.036115c-.059776 0-.288917 0-.498132-.129514c.249066-.049813 .468244-.259029 .468244-.537983c0-.268991-.219178-.348692-.368618-.348692c-.298879 0-.547945 .259029-.547945 .577833c0 .458281 .498132 .657534 .936488 .657534c.657534 0 1.016189-.697385 1.046077-.757161c.119552 .368618 .478207 .757161 1.075965 .757161c1.026152 0 1.594022-1.285181 1.594022-1.534247c0-.099626-.089664-.099626-.119552-.099626c-.089664 0-.109589 .039851-.129514 .109589c-.328767 1.066002-1.006227 1.305106-1.325031 1.305106c-.388543 0-.547945-.318804-.547945-.657534c0-.219178 .059776-.438356 .169365-.876712l.33873-1.364882z%27/%3E%0A%3Cpath id=%27g6-40%27 d=%27m3.297634 2.391034c0-.029888 0-.049813-.169365-.219178c-1.24533-1.255293-1.564134-3.138232-1.564134-4.662516c0-1.733499 .37858-3.466999 1.603985-4.712329c.129514-.119552 .129514-.139477 .129514-.169365c0-.069738-.039851-.099626-.099626-.099626c-.099626 0-.996264 .67746-1.58406 1.942715c-.508095 1.09589-.627646 2.201743-.627646 3.038605c0 .777086 .109589 1.982565 .657534 3.108344c.597758 1.225405 1.454545 1.872976 1.554172 1.872976c.059776 0 .099626-.029888 .099626-.099626z%27/%3E%0A%3Cpath id=%27g6-41%27 d=%27m2.879203-2.49066c0-.777086-.109589-1.982565-.657534-3.108344c-.597758-1.225405-1.454545-1.872976-1.554172-1.872976c-.059776 0-.099626 .039851-.099626 .099626c0 .029888 0 .049813 .18929 .229141c.976339 .986301 1.544209 2.570361 1.544209 4.652553c0 1.703611-.368618 3.457036-1.603985 4.712329c-.129514 .119552-.129514 .139477-.129514 .169365c0 .059776 .039851 .099626 .099626 .099626c.099626 0 .996264-.67746 1.58406-1.942715c.508095-1.09589 .627646-2.201743 .627646-3.038605z%27/%3E%0A%3Cpath id=%27g6-43%27 d=%27m4.07472-2.291407h2.779577c.139477 0 .328767 0 .328767-.199253s-.18929-.199253-.328767-.199253h-2.779577v-2.789539c0-.139477 0-.328767-.199253-.328767s-.199253 .18929-.199253 .328767v2.789539h-2.789539c-.139477 0-.328767 0-.328767 .199253s.18929 .199253 .328767 .199253h2.789539v2.789539c0 .139477 0 .328767 .199253 .328767s.199253-.18929 .199253-.328767v-2.789539z%27/%3E%0A%3Cpath id=%27g6-61%27 d=%27m6.844334-3.257783c.14944 0 .33873 0 .33873-.199253s-.18929-.199253-.328767-.199253h-5.967621c-.139477 0-.328767 0-.328767 .199253s.18929 .199253 .33873 .199253h5.947696zm.009963 1.932752c.139477 0 .328767 0 .328767-.199253s-.18929-.199253-.33873-.199253h-5.947696c-.14944 0-.33873 0-.33873 .199253s.18929 .199253 .328767 .199253h5.967621z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page56%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%273.874374%27 y=%270%27 xlink:href=%27%23g4-102%27/%3E%0A%3Cuse x=%2712.038187%27 y=%270%27 xlink:href=%27%23g6-43%27/%3E%0A%3Cuse x=%2722.0008%27 y=%270%27 xlink:href=%27%23g4-103%27/%3E%0A%3Cuse x=%2727.110108%27 y=%270%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%2730.984482%27 y=%270%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%2734.858856%27 y=%270%27 xlink:href=%27%23g4-120%27/%3E%0A%3Cuse x=%2740.552788%27 y=%270%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%2747.194494%27 y=%270%27 xlink:href=%27%23g6-61%27/%3E%0A%3Cuse x=%2757.710574%27 y=%270%27 xlink:href=%27%23g4-102%27/%3E%0A%3Cuse x=%2763.660521%27 y=%270%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%2767.534895%27 y=%270%27 xlink:href=%27%23g4-120%27/%3E%0A%3Cuse x=%2773.228827%27 y=%270%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%2779.317067%27 y=%270%27 xlink:href=%27%23g6-43%27/%3E%0A%3Cuse x=%2789.27968%27 y=%270%27 xlink:href=%27%23g4-103%27/%3E%0A%3Cuse x=%2794.388988%27 y=%270%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%2798.263362%27 y=%270%27 xlink:href=%27%23g4-120%27/%3E%0A%3Cuse x=%27103.957294%27 y=%270%27 xlink:href=%27%23g6-41%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( (f + g)(x) = f(x) + g(x) \)" style="height: 1.0784em; vertical-align: -0.2942em; display: inline-block" class="org-latex org-latex-inline" />.</li>
<li><img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%278.748747pt%27 height=%277.641754pt%27 viewBox=%27-.500002 -6.311537 8.748747 7.641754%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g2-2%27 d=%27m3.875467-2.769614l-1.992528-1.982565c-.119552-.119552-.139477-.139477-.219178-.139477c-.099626 0-.199253 .089664-.199253 .199253c0 .069738 .019925 .089664 .129514 .199253l1.992528 2.002491l-1.992528 2.002491c-.109589 .109589-.129514 .129514-.129514 .199253c0 .109589 .099626 .199253 .199253 .199253c.079701 0 .099626-.019925 .219178-.139477l1.982565-1.982565l2.062267 2.062267c.019925 .009963 .089664 .059776 .14944 .059776c.119552 0 .199253-.089664 .199253-.199253c0-.019925 0-.059776-.029888-.109589c-.009963-.019925-1.594022-1.58406-2.092154-2.092154l1.823163-1.823163c.049813-.059776 .199253-.18929 .249066-.249066c.009963-.019925 .049813-.059776 .049813-.129514c0-.109589-.079701-.199253-.199253-.199253c-.079701 0-.119552 .039851-.229141 .14944l-1.972603 1.972603z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page60%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g2-2%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( \times \)" style="height: 0.7517em; vertical-align: -0.1309em; display: inline-block" class="org-latex org-latex-inline" /> which was the cartesian product becomes <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%275.981339pt%27 height=%275.427842pt%27 viewBox=%27-.500002 -4.92784 5.981339 5.427842%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g2-14%27 d=%27m4.423412-2.49066c0-1.066002-.886675-1.932752-1.932752-1.932752c-1.075965 0-1.942715 .886675-1.942715 1.932752c0 1.05604 .86675 1.932752 1.942715 1.932752c1.046077 0 1.932752-.86675 1.932752-1.932752zm-1.932752 1.534247c-.86675 0-1.544209-.697385-1.544209-1.534247s.687422-1.534247 1.544209-1.534247c.826899 0 1.534247 .67746 1.534247 1.534247s-.707347 1.534247-1.534247 1.534247z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page62%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g2-14%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( \circ \)" style="height: 0.5339em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" /> the functor
composition.</li>
<li><img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%275.981339pt%27 height=%277.42037pt%27 viewBox=%27-.500002 -6.920368 5.981339 7.42037%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g6-49%27 d=%27m2.929016-6.37609c0-.239103 0-.259029-.229141-.259029c-.617684 .637609-1.494396 .637609-1.8132 .637609v.308842c.199253 0 .787049 0 1.305106-.259029v5.160648c0 .358655-.029888 .478207-.926526 .478207h-.318804v.308842c.348692-.029888 1.215442-.029888 1.613948-.029888s1.265255 0 1.613948 .029888v-.308842h-.318804c-.896638 0-.926526-.109589-.926526-.478207v-5.589041z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page59%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g6-49%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( 1 \)" style="height: 0.7299em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" /> which was the singleton set (neutral element of <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%278.748747pt%27 height=%277.641754pt%27 viewBox=%27-.500002 -6.311537 8.748747 7.641754%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g2-2%27 d=%27m3.875467-2.769614l-1.992528-1.982565c-.119552-.119552-.139477-.139477-.219178-.139477c-.099626 0-.199253 .089664-.199253 .199253c0 .069738 .019925 .089664 .129514 .199253l1.992528 2.002491l-1.992528 2.002491c-.109589 .109589-.129514 .129514-.129514 .199253c0 .109589 .099626 .199253 .199253 .199253c.079701 0 .099626-.019925 .219178-.139477l1.982565-1.982565l2.062267 2.062267c.019925 .009963 .089664 .059776 .14944 .059776c.119552 0 .199253-.089664 .199253-.199253c0-.019925 0-.059776-.029888-.109589c-.009963-.019925-1.594022-1.58406-2.092154-2.092154l1.823163-1.823163c.049813-.059776 .199253-.18929 .249066-.249066c.009963-.019925 .049813-.059776 .049813-.129514c0-.109589-.079701-.199253-.199253-.199253c-.079701 0-.119552 .039851-.229141 .14944l-1.972603 1.972603z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page60%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g2-2%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( \times \)" style="height: 0.7517em; vertical-align: -0.1309em; display: inline-block" class="org-latex org-latex-inline" />) becomes <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%279.300177pt%27 height=%277.86148pt%27 viewBox=%27-.500002 -7.361478 9.300177 7.86148%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g1-100%27 d=%27m3.028643-6.814446v.308842h.159402c.348692 0 .617684 .039851 .617684 .617684l-.009963 2.092154c-.239103-.398506-.806974-.607721-1.265255-.607721c-1.225405 0-2.201743 1.05604-2.201743 2.261519c0 1.066002 .816936 2.241594 2.132005 2.241594c.518057 0 .986301-.249066 1.315068-.647572v.647572l1.474471-.109589v-.308842h-.169365c-.308842 0-.607721-.029888-.607721-.498132v-6.107098l-1.444583 .109589zm-1.863014 4.911582v-.14944c0-.737235 .089664-1.484433 .777086-1.942715c.199253-.119552 .428394-.18929 .657534-.18929c.488169 0 1.185554 .398506 1.185554 1.026152c0 .129514-.009963 .259029-.009963 .388543v1.653798c0 .129514-.049813 .219178-.119552 .318804c-.259029 .388543-.687422 .67746-1.155666 .67746c-.727273 0-1.185554-.667497-1.295143-1.354919c-.019925-.139477-.019925-.288917-.039851-.428394z%27/%3E%0A%3Cpath id=%27g1-105%27 d=%27m.368618-4.293898v.308842h.18929c.288917 0 .547945 .039851 .547945 .498132v2.759651c0 .348692-.179328 .408468-.777086 .408468v.308842h2.141968v-.308842h-.199253c-.259029 0-.498132-.029888-.498132-.348692v-3.73599l-1.404732 .109589zm.836862-2.371108c-.249066 .029888-.448319 .249066-.448319 .518057c0 .288917 .249066 .52802 .52802 .52802c.268991 0 .52802-.219178 .52802-.52802c0-.288917-.249066-.52802-.52802-.52802c-.029888 0-.049813 .009963-.079701 .009963z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page61%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g1-105%27/%3E%0A%3Cuse x=%272.766724%27 y=%270%27 xlink:href=%27%23g1-100%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\(
   \text{id} \)" style="height: 0.7733em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" /> (neutral element of <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%275.981339pt%27 height=%275.427842pt%27 viewBox=%27-.500002 -4.92784 5.981339 5.427842%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g2-14%27 d=%27m4.423412-2.49066c0-1.066002-.886675-1.932752-1.932752-1.932752c-1.075965 0-1.942715 .886675-1.942715 1.932752c0 1.05604 .86675 1.932752 1.942715 1.932752c1.046077 0 1.932752-.86675 1.932752-1.932752zm-1.932752 1.534247c-.86675 0-1.544209-.697385-1.544209-1.534247s.687422-1.534247 1.544209-1.534247c.826899 0 1.534247 .67746 1.534247 1.534247s-.707347 1.534247-1.534247 1.534247z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page62%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g2-14%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( \circ \)" style="height: 0.5339em; vertical-align: -0.0492em; display: inline-block" class="org-latex org-latex-inline" />).</li>
</ol>

<p>
Finally, when translating the recursive equation for the list, we get:
</p>

<p>
<img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%27344.711087pt%27 height=%2715.445832pt%27 viewBox=%27-.500002 -14.94583 344.711087 15.445832%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g2-14%27 d=%27m4.423412-2.49066c0-1.066002-.886675-1.932752-1.932752-1.932752c-1.075965 0-1.942715 .886675-1.942715 1.932752c0 1.05604 .86675 1.932752 1.942715 1.932752c1.046077 0 1.932752-.86675 1.932752-1.932752zm-1.932752 1.534247c-.86675 0-1.544209-.697385-1.544209-1.534247s.687422-1.534247 1.544209-1.534247c.826899 0 1.534247 .67746 1.534247 1.534247s-.707347 1.534247-1.534247 1.534247z%27/%3E%0A%3Cpath id=%27g1-100%27 d=%27m3.028643-6.814446v.308842h.159402c.348692 0 .617684 .039851 .617684 .617684l-.009963 2.092154c-.239103-.398506-.806974-.607721-1.265255-.607721c-1.225405 0-2.201743 1.05604-2.201743 2.261519c0 1.066002 .816936 2.241594 2.132005 2.241594c.518057 0 .986301-.249066 1.315068-.647572v.647572l1.474471-.109589v-.308842h-.169365c-.308842 0-.607721-.029888-.607721-.498132v-6.107098l-1.444583 .109589zm-1.863014 4.911582v-.14944c0-.737235 .089664-1.484433 .777086-1.942715c.199253-.119552 .428394-.18929 .657534-.18929c.488169 0 1.185554 .398506 1.185554 1.026152c0 .129514-.009963 .259029-.009963 .388543v1.653798c0 .129514-.049813 .219178-.119552 .318804c-.259029 .388543-.687422 .67746-1.155666 .67746c-.727273 0-1.185554-.667497-1.295143-1.354919c-.019925-.139477-.019925-.288917-.039851-.428394z%27/%3E%0A%3Cpath id=%27g1-105%27 d=%27m.368618-4.293898v.308842h.18929c.288917 0 .547945 .039851 .547945 .498132v2.759651c0 .348692-.179328 .408468-.777086 .408468v.308842h2.141968v-.308842h-.199253c-.259029 0-.498132-.029888-.498132-.348692v-3.73599l-1.404732 .109589zm.836862-2.371108c-.249066 .029888-.448319 .249066-.448319 .518057c0 .288917 .249066 .52802 .52802 .52802c.268991 0 .52802-.219178 .52802-.52802c0-.288917-.249066-.52802-.52802-.52802c-.029888 0-.049813 .009963-.079701 .009963z%27/%3E%0A%3Cpath id=%27g6-40%27 d=%27m3.297634 2.391034c0-.029888 0-.049813-.169365-.219178c-1.24533-1.255293-1.564134-3.138232-1.564134-4.662516c0-1.733499 .37858-3.466999 1.603985-4.712329c.129514-.119552 .129514-.139477 .129514-.169365c0-.069738-.039851-.099626-.099626-.099626c-.099626 0-.996264 .67746-1.58406 1.942715c-.508095 1.09589-.627646 2.201743-.627646 3.038605c0 .777086 .109589 1.982565 .657534 3.108344c.597758 1.225405 1.454545 1.872976 1.554172 1.872976c.059776 0 .099626-.029888 .099626-.099626z%27/%3E%0A%3Cpath id=%27g6-41%27 d=%27m2.879203-2.49066c0-.777086-.109589-1.982565-.657534-3.108344c-.597758-1.225405-1.454545-1.872976-1.554172-1.872976c-.059776 0-.099626 .039851-.099626 .099626c0 .029888 0 .049813 .18929 .229141c.976339 .986301 1.544209 2.570361 1.544209 4.652553c0 1.703611-.368618 3.457036-1.603985 4.712329c-.129514 .119552-.129514 .139477-.129514 .169365c0 .059776 .039851 .099626 .099626 .099626c.099626 0 .996264-.67746 1.58406-1.942715c.508095-1.09589 .627646-2.201743 .627646-3.038605z%27/%3E%0A%3Cpath id=%27g6-43%27 d=%27m4.07472-2.291407h2.779577c.139477 0 .328767 0 .328767-.199253s-.18929-.199253-.328767-.199253h-2.779577v-2.789539c0-.139477 0-.328767-.199253-.328767s-.199253 .18929-.199253 .328767v2.789539h-2.789539c-.139477 0-.328767 0-.328767 .199253s.18929 .199253 .328767 .199253h2.789539v2.789539c0 .139477 0 .328767 .199253 .328767s.199253-.18929 .199253-.328767v-2.789539z%27/%3E%0A%3Cpath id=%27g6-61%27 d=%27m6.844334-3.257783c.14944 0 .33873 0 .33873-.199253s-.18929-.199253-.328767-.199253h-5.967621c-.139477 0-.328767 0-.328767 .199253s.18929 .199253 .33873 .199253h5.947696zm.009963 1.932752c.139477 0 .328767 0 .328767-.199253s-.18929-.199253-.33873-.199253h-5.947696c-.14944 0-.33873 0-.33873 .199253s.18929 .199253 .328767 .199253h5.967621z%27/%3E%0A%3Cpath id=%27g4-76%27 d=%27m3.726027-6.027397c.089664-.358655 .119552-.468244 1.05604-.468244c.298879 0 .37858 0 .37858-.18929c0-.119552-.109589-.119552-.159402-.119552c-.328767 0-1.145704 .029888-1.474471 .029888c-.298879 0-1.026152-.029888-1.325031-.029888c-.069738 0-.18929 0-.18929 .199253c0 .109589 .089664 .109589 .278954 .109589c.019925 0 .209215 0 .37858 .019925c.179328 .019925 .268991 .029888 .268991 .159402c0 .039851-.009963 .069738-.039851 .18929l-1.334994 5.349938c-.099626 .388543-.119552 .468244-.9066 .468244c-.169365 0-.268991 0-.268991 .199253c0 .109589 .089664 .109589 .268991 .109589h4.612702c.239103 0 .249066 0 .308842-.169365l.787049-2.15193c.039851-.109589 .039851-.129514 .039851-.139477c0-.039851-.029888-.109589-.119552-.109589s-.099626 .049813-.169365 .209215c-.33873 .916563-.777086 2.052304-2.500623 2.052304h-.936488c-.139477 0-.159402 0-.219178-.009963c-.099626-.009963-.129514-.019925-.129514-.099626c0-.029888 0-.049813 .049813-.229141l1.344956-5.379826z%27/%3E%0A%3Cpath id=%27g4-102%27 d=%27m3.656289-3.985056h.856787c.199253 0 .298879 0 .298879-.199253c0-.109589-.099626-.109589-.268991-.109589h-.826899l.209215-1.135741c.039851-.209215 .179328-.916563 .239103-1.036115c.089664-.18929 .259029-.33873 .468244-.33873c.039851 0 .298879 0 .488169 .179328c-.438356 .039851-.537983 .388543-.537983 .537983c0 .229141 .179328 .348692 .368618 .348692c.259029 0 .547945-.219178 .547945-.597758c0-.458281-.458281-.687422-.86675-.687422c-.33873 0-.966376 .179328-1.265255 1.165629c-.059776 .209215-.089664 .308842-.328767 1.564134h-.687422c-.18929 0-.298879 0-.298879 .18929c0 .119552 .089664 .119552 .278954 .119552h.657534l-.747198 3.935243c-.179328 .966376-.348692 1.872976-.86675 1.872976c-.039851 0-.288917 0-.478207-.179328c.458281-.029888 .547945-.388543 .547945-.537983c0-.229141-.179328-.348692-.368618-.348692c-.259029 0-.547945 .219178-.547945 .597758c0 .448319 .438356 .687422 .846824 .687422c.547945 0 .946451-.587796 1.125778-.966376c.318804-.627646 .547945-1.833126 .557908-1.902864l.597758-3.158157z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page63%27%3E%0A%3Cuse x=%27126.817175%27 y=%27-2.49066%27 xlink:href=%27%23g4-76%27/%3E%0A%3Cuse x=%27133.597322%27 y=%27-2.49066%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%27137.471696%27 y=%27-2.49066%27 xlink:href=%27%23g4-102%27/%3E%0A%3Cuse x=%27143.421643%27 y=%27-2.49066%27 xlink:href=%27%23g6-41%27/%3E%0A%3Cuse x=%27150.06335%27 y=%27-2.49066%27 xlink:href=%27%23g6-61%27/%3E%0A%3Cuse x=%27160.57943%27 y=%27-2.49066%27 xlink:href=%27%23g1-105%27/%3E%0A%3Cuse x=%27163.346154%27 y=%27-2.49066%27 xlink:href=%27%23g1-100%27/%3E%0A%3Cuse x=%27171.093469%27 y=%27-2.49066%27 xlink:href=%27%23g6-43%27/%3E%0A%3Cuse x=%27181.056082%27 y=%27-2.49066%27 xlink:href=%27%23g4-102%27/%3E%0A%3Cuse x=%27189.219895%27 y=%27-2.49066%27 xlink:href=%27%23g2-14%27/%3E%0A%3Cuse x=%27196.4151%27 y=%27-2.49066%27 xlink:href=%27%23g4-76%27/%3E%0A%3Cuse x=%27203.195247%27 y=%27-2.49066%27 xlink:href=%27%23g6-40%27/%3E%0A%3Cuse x=%27207.069621%27 y=%27-2.49066%27 xlink:href=%27%23g4-102%27/%3E%0A%3Cuse x=%27213.019568%27 y=%27-2.49066%27 xlink:href=%27%23g6-41%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\[ L(f) = \text{id} + f \circ L(f) \]" style="height: 1.5194em; display: block" class="org-latex org-latex-block" />
</p>

<p>
This object &ndash; the free monoid on an alphabet of endofunctors &ndash; is exactly
<code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Eff</span> fs</code>.
</p>
</div>
</div>
</div>
<div id="outline-container-org328707d" class="outline-2">
<h2 id="org328707d"><span class="section-number-2">13.</span> Show for <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Eff</span> fs x</code></h2>
<div class="outline-text-2" id="text-13">
<p>
When working with effectful values, it will be useful to have <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Show</span> (<span style="color: #531ab6; font-weight: bold;">Eff</span> fs x)</code> when possible. To achieve this, we will need to define new
typeclasses and some instances.
</p>


<p>
We say that a <code class="src src-haskell"><span style="color: #3548cf;">*</span> <span style="color: #3548cf;">-&gt;</span> <span style="color: #3548cf;">*</span></code> "preserves show" when <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Show</span> (f x)</code>
whenever <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Show</span> x</code>.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">class</span> (<span style="color: #005e8b; font-weight: bold;">forall</span> x<span style="color: #3548cf;">.</span> <span style="color: #531ab6; font-weight: bold;">Show</span> x <span style="color: #3548cf;">=&gt;</span> <span style="color: #531ab6; font-weight: bold;">Show</span> (f x)) <span style="color: #3548cf;">=&gt;</span> <span style="color: #531ab6; font-weight: bold;">PreservesShow</span> f
</code></pre>
</div>

<p>
We know that <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Sum</span> fs</code> preserves show if and only if al of the
elements of <code class="src src-haskell">fs</code> preserve it too.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">type</span> <span style="color: #005e8b; font-weight: bold;">family</span> <span style="color: #531ab6; font-weight: bold;">AllPreserveShow</span> (fs <span style="color: #3548cf;">::</span> [<span style="color: #3548cf;">*</span> <span style="color: #3548cf;">-&gt;</span> <span style="color: #3548cf;">*</span>]) <span style="color: #3548cf;">::</span> <span style="color: #531ab6; font-weight: bold;">Constraint</span> <span style="color: #005e8b; font-weight: bold;">where</span>
  <span style="color: #531ab6; font-weight: bold;">AllPreserveShow</span> (f '<span style="color: #531ab6; font-weight: bold;">:</span> fs) <span style="color: #3548cf;">=</span> (<span style="color: #531ab6; font-weight: bold;">PreservesShow</span> f, <span style="color: #531ab6; font-weight: bold;">AllPreserveShow</span> fs)
  <span style="color: #531ab6; font-weight: bold;">AllPreserveShow</span> '<span style="color: #531ab6; font-weight: bold;">[]</span> <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">()</span>

<span style="color: #005e8b; font-weight: bold;">instance</span> (<span style="color: #531ab6; font-weight: bold;">AllPreserveShow</span> fs, <span style="color: #531ab6; font-weight: bold;">Show</span> x) <span style="color: #3548cf;">=&gt;</span> <span style="color: #531ab6; font-weight: bold;">Show</span> (<span style="color: #531ab6; font-weight: bold;">Sum</span> fs x) <span style="color: #005e8b; font-weight: bold;">where</span>
  show (<span style="color: #531ab6; font-weight: bold;">Head</span> h) <span style="color: #3548cf;">=</span> show h
  show (<span style="color: #531ab6; font-weight: bold;">Tail</span> t) <span style="color: #3548cf;">=</span> show t
</code></pre>
</div>

<p>
Finally, because <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Eff</span> fs x</code> uses <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Sum</span> fs</code>, it also
preserves show whenever <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Sum</span> fs</code> preserves show.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">instance</span> (<span style="color: #531ab6; font-weight: bold;">AllPreserveShow</span> fs, <span style="color: #531ab6; font-weight: bold;">Show</span> x) <span style="color: #3548cf;">=&gt;</span> <span style="color: #531ab6; font-weight: bold;">Show</span> (<span style="color: #531ab6; font-weight: bold;">Eff</span> fs x) <span style="color: #005e8b; font-weight: bold;">where</span>
  show (<span style="color: #531ab6; font-weight: bold;">Pure</span> x) <span style="color: #3548cf;">=</span> show x
  show (<span style="color: #531ab6; font-weight: bold;">Impure</span> t) <span style="color: #3548cf;">=</span> show t
</code></pre>
</div>
</div>
</div>
<div id="outline-container-org2818b34" class="outline-2">
<h2 id="org2818b34"><span class="section-number-2">14.</span> When the effects <code class="src src-haskell">fs</code> are functors, <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Eff</span> fs</code> is a functor</h2>
<div class="outline-text-2" id="text-14">
<p>
Further down, having <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Functor</span></code> instances for everything will be very
useful. This is why it is important automatically derive <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Functor</span></code>
instances whenever possible.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">type</span> <span style="color: #005e8b; font-weight: bold;">family</span> <span style="color: #531ab6; font-weight: bold;">AllFunctors</span> (fs <span style="color: #3548cf;">::</span> [<span style="color: #3548cf;">*</span> <span style="color: #3548cf;">-&gt;</span> <span style="color: #3548cf;">*</span>]) <span style="color: #3548cf;">::</span> <span style="color: #531ab6; font-weight: bold;">Constraint</span> <span style="color: #005e8b; font-weight: bold;">where</span>
  <span style="color: #531ab6; font-weight: bold;">AllFunctors</span> (f '<span style="color: #531ab6; font-weight: bold;">:</span> fs) <span style="color: #3548cf;">=</span> (<span style="color: #531ab6; font-weight: bold;">Functor</span> f, <span style="color: #531ab6; font-weight: bold;">AllFunctors</span> fs)
  <span style="color: #531ab6; font-weight: bold;">AllFunctors</span> '<span style="color: #531ab6; font-weight: bold;">[]</span> <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">()</span>
</code></pre>
</div>

<p>
Again, a sum of <code class="src src-haskell"><span style="color: #3548cf;">*</span> <span style="color: #3548cf;">-&gt;</span> <span style="color: #3548cf;">*</span></code>s is a functor if and only if they all are.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">instance</span> <span style="color: #531ab6; font-weight: bold;">AllFunctors</span> fs <span style="color: #3548cf;">=&gt;</span> <span style="color: #531ab6; font-weight: bold;">Functor</span> (<span style="color: #531ab6; font-weight: bold;">Sum</span> fs) <span style="color: #005e8b; font-weight: bold;">where</span>
  fmap f (<span style="color: #531ab6; font-weight: bold;">Head</span> h) <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">Head</span> <span style="color: #3548cf;">$</span> fmap f h
  fmap f (<span style="color: #531ab6; font-weight: bold;">Tail</span> t) <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">Tail</span> <span style="color: #3548cf;">$</span> fmap f t
</code></pre>
</div>

<p>
By the same reasoning as with <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Show</span></code>, <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Eff</span> fs</code> is a
functor whenever <code class="src src-haskell">fs</code> are.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">instance</span> <span style="color: #531ab6; font-weight: bold;">AllFunctors</span> fs <span style="color: #3548cf;">=&gt;</span> <span style="color: #531ab6; font-weight: bold;">Functor</span> (<span style="color: #531ab6; font-weight: bold;">Eff</span> fs) <span style="color: #005e8b; font-weight: bold;">where</span>
  fmap f (<span style="color: #531ab6; font-weight: bold;">Pure</span> x) <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">Pure</span> <span style="color: #3548cf;">$</span> f x
  fmap f (<span style="color: #531ab6; font-weight: bold;">Impure</span> fx) <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">Impure</span> <span style="color: #3548cf;">$</span> (fmap <span style="color: #3548cf;">.</span> fmap) f fx
</code></pre>
</div>
</div>
</div>
<div id="outline-container-org6fb8aba" class="outline-2">
<h2 id="org6fb8aba"><span class="section-number-2">15.</span> <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Eff</span> fs</code> is also a monad</h2>
<div class="outline-text-2" id="text-15">
<p>
The categorical presentation of a monad uses a <code class="src src-haskell">join</code> operator
instead of <code class="src src-haskell"><span style="color: #3548cf;">&gt;&gt;=</span></code>. Here, we will first implement <code class="src src-haskell">effJoin</code>
(it simply removes a <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Pure</span></code> between the two layers of <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Eff</span> fs</code>) and derive <code class="src src-haskell">effBind</code> with it.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #8f0075;">effJoin</span> <span style="color: #3548cf;">::</span> <span style="color: #531ab6; font-weight: bold;">AllFunctors</span> fs <span style="color: #3548cf;">=&gt;</span> <span style="color: #531ab6; font-weight: bold;">Eff</span> fs (<span style="color: #531ab6; font-weight: bold;">Eff</span> fs x) <span style="color: #3548cf;">-&gt;</span> <span style="color: #531ab6; font-weight: bold;">Eff</span> fs x
<span style="color: #8f0075;">effJoin</span> (<span style="color: #531ab6; font-weight: bold;">Pure</span> x) <span style="color: #3548cf;">=</span> x
<span style="color: #8f0075;">effJoin</span> (<span style="color: #531ab6; font-weight: bold;">Impure</span> fx) <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">Impure</span> <span style="color: #3548cf;">$</span> (fmap effJoin) fx

<span style="color: #8f0075;">effBind</span> <span style="color: #3548cf;">::</span> <span style="color: #531ab6; font-weight: bold;">AllFunctors</span> fs <span style="color: #3548cf;">=&gt;</span> <span style="color: #531ab6; font-weight: bold;">Eff</span> fs x <span style="color: #3548cf;">-&gt;</span> (x <span style="color: #3548cf;">-&gt;</span> <span style="color: #531ab6; font-weight: bold;">Eff</span> fs y) <span style="color: #3548cf;">-&gt;</span> <span style="color: #531ab6; font-weight: bold;">Eff</span> fs y
<span style="color: #8f0075;">effBind</span> fx f <span style="color: #3548cf;">=</span> effJoin <span style="color: #3548cf;">$</span> fmap f fx
</code></pre>
</div>

<p>
The two instances we need to have <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Monad</span> (<span style="color: #531ab6; font-weight: bold;">Eff</span> fs)</code> then flow
naturally.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">instance</span> (<span style="color: #531ab6; font-weight: bold;">AllFunctors</span> fs) <span style="color: #3548cf;">=&gt;</span> <span style="color: #531ab6; font-weight: bold;">Applicative</span> (<span style="color: #531ab6; font-weight: bold;">Eff</span> fs) <span style="color: #005e8b; font-weight: bold;">where</span>
  pure <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">Pure</span>
  ff <span style="color: #3548cf;">&lt;*&gt;</span> fx <span style="color: #3548cf;">=</span> effBind ff (<span style="color: #3548cf;">\</span>f <span style="color: #3548cf;">-&gt;</span> fmap f fx)

<span style="color: #005e8b; font-weight: bold;">instance</span> (<span style="color: #531ab6; font-weight: bold;">AllFunctors</span> fs) <span style="color: #3548cf;">=&gt;</span> <span style="color: #531ab6; font-weight: bold;">Monad</span> (<span style="color: #531ab6; font-weight: bold;">Eff</span> fs) <span style="color: #005e8b; font-weight: bold;">where</span>
  (<span style="color: #3548cf;">&gt;&gt;=</span>) <span style="color: #3548cf;">=</span> effBind
</code></pre>
</div>
</div>
</div>
<div id="outline-container-org29163fd" class="outline-2">
<h2 id="org29163fd"><span class="section-number-2">16.</span> Why do we need <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Monad</span> (<span style="color: #531ab6; font-weight: bold;">Eff</span> fs)</code>?</h2>
<div class="outline-text-2" id="text-16">
<p>
I hear you ask: "At the beginning, you presented algebraic effects as an
alternative to monads, so why are you making <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Eff</span> fs</code> a monad?"
</p>

<p>
The reason algebraic effects are interesting is because they compose very well.
Monads, in their normal form, don't. What we do here is compose the effects
<b>before</b> turning them into a monad. This way, we only have to think about a single
"monad constructor": <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Eff</span></code>.
</p>
</div>
</div>
<div id="outline-container-orgd7f8f50" class="outline-2">
<h2 id="orgd7f8f50"><span class="section-number-2">17.</span> Lift a term into an effect</h2>
<div class="outline-text-2" id="text-17">
<p>
Now that we have built ourselves an ontology of typeclasses, functors and
monads, we need utilities to actually use the algebraic effects. The first one
of them will be this simple <code class="src src-haskell">effInj</code> function which will let us turn
a naked effect into a fully-clothed effectful value.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #8f0075;">effInj</span> <span style="color: #3548cf;">::</span> (<span style="color: #531ab6; font-weight: bold;">Functor</span> f, f <span style="color: #531ab6; font-weight: bold;">:&#8712;:</span> fs) <span style="color: #3548cf;">=&gt;</span> f x <span style="color: #3548cf;">-&gt;</span> <span style="color: #531ab6; font-weight: bold;">Eff</span> fs x
<span style="color: #8f0075;">effInj</span> e <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">Impure</span> <span style="color: #3548cf;">$</span> inject <span style="color: #3548cf;">$</span> fmap <span style="color: #531ab6; font-weight: bold;">Pure</span> e
</code></pre>
</div>
</div>
</div>
<div id="outline-container-orgdf43673" class="outline-2">
<h2 id="orgdf43673"><span class="section-number-2">18.</span> Example</h2>
<div class="outline-text-2" id="text-18">
<p>
Here is how to use it. Let's say we defined two effects for asking for a string
and asking for an integer. The function that will find itself inside the
<code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">GetInt</span></code> or the <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">GetString</span></code> will be the continuation (you
can read more about continuations in <a href="async-await-syntax.html#ID-bc6ba032-8b50-4403-95db-abb7da96ae83">My last post</a>) to which will be passed the
<code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">String</span></code> or <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Int</span></code>. Here, we use <code class="src src-haskell">id</code>, because
the continuation of our block will automatically be add through the monadic
operations.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">data</span> <span style="color: #531ab6; font-weight: bold;">GetString</span> a <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">GetString</span> (<span style="color: #531ab6; font-weight: bold;">String</span> <span style="color: #3548cf;">-&gt;</span> a)
  <span style="color: #005e8b; font-weight: bold;">deriving</span> <span style="color: #531ab6; font-weight: bold;">Functor</span>

<span style="color: #005e8b; font-weight: bold;">data</span> <span style="color: #531ab6; font-weight: bold;">GetInt</span> a <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">GetInt</span> (<span style="color: #531ab6; font-weight: bold;">Int</span> <span style="color: #3548cf;">-&gt;</span> a)
  <span style="color: #005e8b; font-weight: bold;">deriving</span> <span style="color: #531ab6; font-weight: bold;">Functor</span>

<span style="color: #005e8b; font-weight: bold;">type</span> <span style="color: #531ab6; font-weight: bold;">MyEff</span> <span style="color: #3548cf;">=</span> [<span style="color: #531ab6; font-weight: bold;">GetString</span>, <span style="color: #531ab6; font-weight: bold;">GetInt</span>]

<span style="color: #8f0075;">comp</span> <span style="color: #3548cf;">::</span> <span style="color: #531ab6; font-weight: bold;">Eff</span> <span style="color: #531ab6; font-weight: bold;">MyEff</span> <span style="color: #531ab6; font-weight: bold;">String</span>
<span style="color: #8f0075;">comp</span> <span style="color: #3548cf;">=</span> <span style="color: #005e8b; font-weight: bold;">do</span>
  int <span style="color: #3548cf;">&lt;-</span> effInj <span style="color: #3548cf;">$</span> <span style="color: #531ab6; font-weight: bold;">GetInt</span> id
  str <span style="color: #3548cf;">&lt;-</span> effInj <span style="color: #3548cf;">$</span> <span style="color: #531ab6; font-weight: bold;">GetString</span> id
  return <span style="color: #3548cf;">$</span> str <span style="color: #3548cf;">++</span> show int
</code></pre>
</div>
</div>
</div>
<div id="outline-container-org12caea5" class="outline-2">
<h2 id="org12caea5"><span class="section-number-2">19.</span> Permuting effects</h2>
<div class="outline-text-2" id="text-19">
<p>
Here is an utility function to embed an effectful value into a bigger effect
space.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #8f0075;">effPerm</span> <span style="color: #3548cf;">::</span> <span style="color: #005e8b; font-weight: bold;">forall</span> fs gs x<span style="color: #3548cf;">.</span> (<span style="color: #531ab6; font-weight: bold;">AllFunctors</span> fs, fs <span style="color: #531ab6; font-weight: bold;">:&#8838;:</span> gs) <span style="color: #3548cf;">=&gt;</span> <span style="color: #531ab6; font-weight: bold;">Eff</span> fs x <span style="color: #3548cf;">-&gt;</span> <span style="color: #531ab6; font-weight: bold;">Eff</span> gs x
<span style="color: #8f0075;">effPerm</span> (<span style="color: #531ab6; font-weight: bold;">Pure</span> x) <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">Pure</span> x
<span style="color: #8f0075;">effPerm</span> (<span style="color: #531ab6; font-weight: bold;">Impure</span> sx) <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">Impure</span> <span style="color: #3548cf;">$</span> permute <span style="color: #3548cf;">@</span>fs <span style="color: #3548cf;">@</span>gs <span style="color: #3548cf;">$</span> fmap (effPerm <span style="color: #3548cf;">@</span>fs <span style="color: #3548cf;">@</span>gs) sx
</code></pre>
</div>
</div>
</div>
<div id="outline-container-orgaaad7be" class="outline-2">
<h2 id="orgaaad7be"><span class="section-number-2">20.</span> Handlers</h2>
<div class="outline-text-2" id="text-20">
<p>
The idea of a handler is what makes algebraic effects ergonomic. It lets us
easily handle one of the effects using the other effects in the set.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #8f0075;">handle</span> <span style="color: #3548cf;">::</span> <span style="color: #005e8b; font-weight: bold;">forall</span> fs g gs x<span style="color: #3548cf;">.</span> (<span style="color: #531ab6; font-weight: bold;">Functor</span> g, <span style="color: #531ab6; font-weight: bold;">AllFunctors</span> gs, <span style="color: #531ab6; font-weight: bold;">AllFunctors</span> fs,fs <span style="color: #531ab6; font-weight: bold;">:&#8838;:</span> (g '<span style="color: #531ab6; font-weight: bold;">:</span> gs))
  <span style="color: #3548cf;">=&gt;</span> (<span style="color: #005e8b; font-weight: bold;">forall</span> x<span style="color: #3548cf;">.</span> g x <span style="color: #3548cf;">-&gt;</span> <span style="color: #531ab6; font-weight: bold;">Eff</span> gs x) <span style="color: #3548cf;">-&gt;</span> <span style="color: #531ab6; font-weight: bold;">Eff</span> fs x <span style="color: #3548cf;">-&gt;</span> <span style="color: #531ab6; font-weight: bold;">Eff</span> gs x
<span style="color: #8f0075;">handle</span> trans (<span style="color: #531ab6; font-weight: bold;">Pure</span> x) <span style="color: #3548cf;">=</span> (<span style="color: #531ab6; font-weight: bold;">Pure</span> x)
<span style="color: #8f0075;">handle</span> trans (<span style="color: #531ab6; font-weight: bold;">Impure</span> x) <span style="color: #3548cf;">=</span> <span style="color: #005e8b; font-weight: bold;">case</span> permute <span style="color: #3548cf;">@</span>fs <span style="color: #3548cf;">@</span>(g '<span style="color: #531ab6; font-weight: bold;">:</span> gs) x <span style="color: #005e8b; font-weight: bold;">of</span>
  <span style="color: #531ab6; font-weight: bold;">Head</span> h <span style="color: #3548cf;">-&gt;</span> <span style="color: #005e8b; font-weight: bold;">let</span> val <span style="color: #3548cf;">=</span> fmap (handle trans) h
                val' <span style="color: #3548cf;">=</span> trans val
            <span style="color: #005e8b; font-weight: bold;">in</span> effJoin val'
  <span style="color: #531ab6; font-weight: bold;">Tail</span> t <span style="color: #3548cf;">-&gt;</span> <span style="color: #005e8b; font-weight: bold;">let</span> val <span style="color: #3548cf;">=</span> fmap (handle <span style="color: #3548cf;">@</span>fs <span style="color: #3548cf;">@</span>g <span style="color: #3548cf;">@</span>gs trans) t
            <span style="color: #005e8b; font-weight: bold;">in</span> <span style="color: #531ab6; font-weight: bold;">Impure</span> val
</code></pre>
</div>

<p>
You use <code class="src src-haskell">handle</code> a bit like you use <code>try</code> / <code>catch</code> blocks in other
programming languages. Whenever the effect you want to eliminate is used, you
must do so using one of the remaining effects in the set.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #8f0075;">comp'</span> <span style="color: #3548cf;">::</span> <span style="color: #531ab6; font-weight: bold;">Eff</span> '[<span style="color: #531ab6; font-weight: bold;">GetString</span>] <span style="color: #531ab6; font-weight: bold;">String</span>
<span style="color: #8f0075;">comp'</span> <span style="color: #3548cf;">=</span> handle func comp
  <span style="color: #005e8b; font-weight: bold;">where</span> func <span style="color: #3548cf;">::</span> <span style="color: #531ab6; font-weight: bold;">GetInt</span> x <span style="color: #3548cf;">-&gt;</span> <span style="color: #531ab6; font-weight: bold;">Eff</span> '[<span style="color: #531ab6; font-weight: bold;">GetString</span>] x
        func (<span style="color: #531ab6; font-weight: bold;">GetInt</span> f) <span style="color: #3548cf;">=</span> return <span style="color: #3548cf;">$</span> f 0
</code></pre>
</div>
</div>
</div>
<div id="outline-container-orgaaf8b2e" class="outline-2">
<h2 id="orgaaf8b2e"><span class="section-number-2">21.</span> More advanced handler</h2>
<div class="outline-text-2" id="text-21">
<p>
Let's say you want an effect <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">GenSym</span> <span style="color: #3548cf;">::</span> (<span style="color: #531ab6; font-weight: bold;">Int</span> <span style="color: #3548cf;">-&gt;</span> x) <span style="color: #3548cf;">-&gt;</span> <span style="color: #531ab6; font-weight: bold;">GenSym</span> x</code> that
generates unique integers. We need some kind of way to remember the last number
we gave out. A <code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Handler</span> f fs</code> lets us handle a <code class="src src-haskell">f</code> effect
using <code class="src src-haskell">fs</code> and also, at the same time, give the next
<code class="src src-haskell"><span style="color: #531ab6; font-weight: bold;">Handler</span> f fs</code> to use.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">data</span> <span style="color: #531ab6; font-weight: bold;">Handler</span> (f <span style="color: #3548cf;">::</span> <span style="color: #3548cf;">*</span> <span style="color: #3548cf;">-&gt;</span> <span style="color: #3548cf;">*</span>) (fs <span style="color: #3548cf;">::</span> [<span style="color: #3548cf;">*</span> <span style="color: #3548cf;">-&gt;</span> <span style="color: #3548cf;">*</span>]) <span style="color: #005e8b; font-weight: bold;">where</span>
  <span style="color: #531ab6; font-weight: bold;">Handler</span> <span style="color: #3548cf;">::</span> (<span style="color: #005e8b; font-weight: bold;">forall</span> x<span style="color: #3548cf;">.</span> f x <span style="color: #3548cf;">-&gt;</span> <span style="color: #531ab6; font-weight: bold;">Eff</span> fs (x, <span style="color: #531ab6; font-weight: bold;">Handler</span> f fs)) <span style="color: #3548cf;">-&gt;</span> <span style="color: #531ab6; font-weight: bold;">Handler</span> f fs
</code></pre>
</div>

<p>
Now we need a <code class="src src-haskell">handleFold</code> function.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #8f0075;">handleFold</span> <span style="color: #3548cf;">::</span> <span style="color: #005e8b; font-weight: bold;">forall</span> fs g gs x<span style="color: #3548cf;">.</span> (<span style="color: #531ab6; font-weight: bold;">Functor</span> g, <span style="color: #531ab6; font-weight: bold;">AllFunctors</span> gs, <span style="color: #531ab6; font-weight: bold;">AllFunctors</span> fs,fs <span style="color: #531ab6; font-weight: bold;">:&#8838;:</span> (g '<span style="color: #531ab6; font-weight: bold;">:</span> gs))
  <span style="color: #3548cf;">=&gt;</span> <span style="color: #531ab6; font-weight: bold;">Handler</span> g gs <span style="color: #3548cf;">-&gt;</span> <span style="color: #531ab6; font-weight: bold;">Eff</span> fs x <span style="color: #3548cf;">-&gt;</span> <span style="color: #531ab6; font-weight: bold;">Eff</span> gs x
<span style="color: #8f0075;">handleFold</span> <span style="color: #005e8b; font-weight: bold;">_</span> (<span style="color: #531ab6; font-weight: bold;">Pure</span> x) <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">Pure</span> x
<span style="color: #8f0075;">handleFold</span> (<span style="color: #531ab6; font-weight: bold;">Handler</span> fold) (<span style="color: #531ab6; font-weight: bold;">Impure</span> x) <span style="color: #3548cf;">=</span> <span style="color: #005e8b; font-weight: bold;">case</span> permute <span style="color: #3548cf;">@</span>fs <span style="color: #3548cf;">@</span>(g '<span style="color: #531ab6; font-weight: bold;">:</span> gs) x <span style="color: #005e8b; font-weight: bold;">of</span>
  <span style="color: #531ab6; font-weight: bold;">Tail</span> t <span style="color: #3548cf;">-&gt;</span> <span style="color: #531ab6; font-weight: bold;">Impure</span> <span style="color: #3548cf;">$</span> fmap (handleFold (<span style="color: #531ab6; font-weight: bold;">Handler</span> fold)) t
  <span style="color: #531ab6; font-weight: bold;">Head</span> h <span style="color: #3548cf;">-&gt;</span> <span style="color: #005e8b; font-weight: bold;">do</span>
    (val, fold') <span style="color: #3548cf;">&lt;-</span> fold h
    handleFold fold' val
</code></pre>
</div>

<p>
Example:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><code><span style="color: #005e8b; font-weight: bold;">data</span> <span style="color: #531ab6; font-weight: bold;">GenSym</span> x <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">GenSym</span> (<span style="color: #531ab6; font-weight: bold;">Int</span> <span style="color: #3548cf;">-&gt;</span> x)
  <span style="color: #005e8b; font-weight: bold;">deriving</span> <span style="color: #531ab6; font-weight: bold;">Functor</span>

<span style="color: #8f0075;">syms</span> <span style="color: #3548cf;">::</span> <span style="color: #531ab6; font-weight: bold;">Eff</span> '[<span style="color: #531ab6; font-weight: bold;">GenSym</span>] [<span style="color: #531ab6; font-weight: bold;">Int</span>]
<span style="color: #8f0075;">syms</span> <span style="color: #3548cf;">=</span> <span style="color: #005e8b; font-weight: bold;">do</span>
  x <span style="color: #3548cf;">&lt;-</span> effInj <span style="color: #3548cf;">$</span> <span style="color: #531ab6; font-weight: bold;">GenSym</span> id
  y <span style="color: #3548cf;">&lt;-</span> effInj <span style="color: #3548cf;">$</span> <span style="color: #531ab6; font-weight: bold;">GenSym</span> id
  z <span style="color: #3548cf;">&lt;-</span> effInj <span style="color: #3548cf;">$</span> <span style="color: #531ab6; font-weight: bold;">GenSym</span> id
  return [x, y, z<span style="color: #3548cf;">+</span>1]

<span style="color: #8f0075;">symsEvaled</span> <span style="color: #3548cf;">::</span> <span style="color: #531ab6; font-weight: bold;">Eff</span> '<span style="color: #531ab6; font-weight: bold;">[]</span> [<span style="color: #531ab6; font-weight: bold;">Int</span>]
<span style="color: #8f0075;">symsEvaled</span> <span style="color: #3548cf;">=</span> handleFold (fh 0) syms
  <span style="color: #005e8b; font-weight: bold;">where</span> fh <span style="color: #3548cf;">::</span> <span style="color: #531ab6; font-weight: bold;">Int</span> <span style="color: #3548cf;">-&gt;</span> <span style="color: #531ab6; font-weight: bold;">Handler</span> <span style="color: #531ab6; font-weight: bold;">GenSym</span> '<span style="color: #531ab6; font-weight: bold;">[]</span>
        fh k <span style="color: #3548cf;">=</span> <span style="color: #531ab6; font-weight: bold;">Handler</span> <span style="color: #3548cf;">$</span> <span style="color: #3548cf;">\</span>(<span style="color: #531ab6; font-weight: bold;">GenSym</span> cont) <span style="color: #3548cf;">-&gt;</span> return <span style="color: #3548cf;">$</span> (cont k, fh (k<span style="color: #3548cf;">+</span>1))
</code></pre>
</div>
</div>
</div>
<div id="outline-container-org78d3fe1" class="outline-2">
<h2 id="org78d3fe1"><span class="section-number-2">22.</span> References</h2>
<div class="outline-text-2" id="text-22">
<style>.csl-left-margin{float: left; padding-right: 0em;}
 .csl-right-inline{margin: 0 0 0 1em;}</style><div class="csl-bib-body">
  <div class="csl-entry"><a id="citeproc_bib_item_1"></a>
    <div class="csl-left-margin">[1]</div><div class="csl-right-inline">W. Swierstra, “Data types à la carte,” <i>J. funct. program.</i>, vol. 18, no. 4, pp. 423–436, Jul. 2008, doi: <a href="https://doi.org/10.1017/S0956796808006758">10.1017/S0956796808006758</a>.</div>
  </div>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1" role="doc-backlink">1</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
A monad transformer is a thing that takes a monad and returns a monad.
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2" role="doc-backlink">2</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
We used delimited continuations to implement <code>async</code> and <code>await</code> syntax in
<a href="async-await-syntax.html#ID-bc6ba032-8b50-4403-95db-abb7da96ae83">this post</a>.
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3" role="doc-backlink">3</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
Not an actual thing people say, but I use this term to point to the fact
that the universe of types behaves (under isomorphism) like a semiring. It has
all the things you expect from the natural numbers: addition, multiplication,
distribution and the right units.
</p></div></div>

<div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4" role="doc-backlink">4</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
I wish English had better ways of making precedence explicit.
</p></div></div>

<div class="footdef"><sup><a id="fn.5" class="footnum" href="#fnr.5" role="doc-backlink">5</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
The monad identities (recall it is "just" a monoid) are basically
associativity of <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%277.002975pt%27 height=%277.226639pt%27 viewBox=%27-.500002 -4.789458 7.002975 7.226639%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-22%27 d=%27m2.30137-3.496887c.049813-.209215 .14944-.587796 .14944-.637609c0-.169365-.119552-.268991-.288917-.268991c-.029888 0-.308842 .009963-.398506 .358655l-1.43462 5.768369c-.029888 .119552-.029888 .139477-.029888 .159402c0 .14944 .109589 .268991 .278954 .268991c.209215 0 .328767-.179328 .348692-.209215c.039851-.089664 .169365-.607721 .547945-2.141968c.318804 .268991 .767123 .308842 .966376 .308842c.697385 0 1.085928-.448319 1.325031-.727273c.089664 .448319 .458281 .727273 .896638 .727273c.348692 0 .577833-.229141 .737235-.547945c.169365-.358655 .298879-.966376 .298879-.986301c0-.099626-.089664-.099626-.119552-.099626c-.099626 0-.109589 .039851-.139477 .179328c-.169365 .647572-.348692 1.235367-.757161 1.235367c-.268991 0-.298879-.259029-.298879-.458281c0-.219178 .119552-.687422 .199253-1.036115l.278954-1.075965c.029888-.14944 .129514-.52802 .169365-.67746c.049813-.229141 .14944-.607721 .14944-.667497c0-.179328-.139477-.268991-.288917-.268991c-.049813 0-.308842 .009963-.388543 .348692l-.468244 1.863014c-.119552 .498132-.229141 .916563-.259029 1.016189c-.009963 .049813-.488169 .956413-1.295143 .956413c-.498132 0-.737235-.328767-.737235-.86675c0-.288917 .069738-.56787 .139477-.846824l.418431-1.673724z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page35%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-22%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( \mu \)" style="height: 0.7109em; vertical-align: -0.2397em; display: inline-block" class="org-latex org-latex-inline" /> and <img src="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%0A%3C%21-- This file was generated by dvisvgm 3.4.3 --%3E%0A%3Csvg version=%271.1%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%276.304194pt%27 height=%277.226639pt%27 viewBox=%27-.500002 -4.789458 6.304194 7.226639%27%3E%0A%3Cdefs%3E%0A%3Cpath id=%27g4-17%27 d=%27m4.861768-2.759651c.049813-.179328 .079701-.308842 .079701-.577833c0-.647572-.398506-1.066002-1.145704-1.066002c-.787049 0-1.305106 .518057-1.544209 .86675c-.049813-.56787-.468244-.86675-.916563-.86675c-.458281 0-.647572 .388543-.737235 .56787c-.179328 .33873-.308842 .936488-.308842 .966376c0 .099626 .099626 .099626 .119552 .099626c.099626 0 .109589-.009963 .169365-.229141c.169365-.707347 .368618-1.185554 .727273-1.185554c.169365 0 .308842 .079701 .308842 .458281c0 .209215-.029888 .318804-.159402 .836862l-.577833 2.30137c-.029888 .14944-.089664 .37858-.089664 .428394c0 .179328 .139477 .268991 .288917 .268991c.119552 0 .298879-.079701 .368618-.278954c.009963-.019925 .129514-.488169 .18929-.737235l.219178-.896638c.059776-.219178 .119552-.438356 .169365-.667497c.019925-.059776 .099626-.388543 .109589-.448319c.029888-.089664 .33873-.647572 .67746-.916563c.219178-.159402 .52802-.348692 .956413-.348692s.537983 .33873 .537983 .697385c0 .049813 0 .229141-.099626 .627646l-1.135741 4.582814c-.029888 .119552-.029888 .139477-.029888 .159402c0 .14944 .109589 .268991 .278954 .268991c.308842 0 .37858-.288917 .408468-.398506l1.135741-4.513076z%27/%3E%0A%3C/defs%3E%0A%3Cg id=%27page36%27%3E%0A%3Cuse x=%270%27 y=%270%27 xlink:href=%27%23g4-17%27/%3E%0A%3C/g%3E%0A%3C/svg%3E" alt="\( \eta \)" style="height: 0.7109em; vertical-align: -0.2397em; display: inline-block" class="org-latex org-latex-inline" /> being its left and right unit.
</p></div></div>

<div class="footdef"><sup><a id="fn.6" class="footnum" href="#fnr.6" role="doc-backlink">6</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
Derivation rules as in the type of stuff you see in my post on <a href="blog.Sequent.html#ID-a8bc74ff-eca5-4848-8ce9-f1c56170d4d4">formal
logic and type systems</a>.
</p></div></div>

<div class="footdef"><sup><a id="fn.7" class="footnum" href="#fnr.7" role="doc-backlink">7</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
This doesn't say much, because we always do that.
</p></div></div>

<div class="footdef"><sup><a id="fn.8" class="footnum" href="#fnr.8" role="doc-backlink">8</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
This is more often described as a "mechanism for ad-hoc polymorphism", but
ad-hoc polymorphism really is just "fill this argument with a value that is
consistent with the type".
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="date">Date: 2024-05-29 Wed 00:00</p>
<p class="author">Author: Justin Veilleux</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
